(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function d1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Iy={exports:{}},Fu={},ky={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ka=Symbol.for("react.element"),h1=Symbol.for("react.portal"),f1=Symbol.for("react.fragment"),p1=Symbol.for("react.strict_mode"),m1=Symbol.for("react.profiler"),g1=Symbol.for("react.provider"),y1=Symbol.for("react.context"),v1=Symbol.for("react.forward_ref"),_1=Symbol.for("react.suspense"),w1=Symbol.for("react.memo"),x1=Symbol.for("react.lazy"),Wp=Symbol.iterator;function E1(t){return t===null||typeof t!="object"?null:(t=Wp&&t[Wp]||t["@@iterator"],typeof t=="function"?t:null)}var Sy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ay=Object.assign,Cy={};function Ys(t,e,n){this.props=t,this.context=e,this.refs=Cy,this.updater=n||Sy}Ys.prototype.isReactComponent={};Ys.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ys.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function by(){}by.prototype=Ys.prototype;function Mh(t,e,n){this.props=t,this.context=e,this.refs=Cy,this.updater=n||Sy}var Lh=Mh.prototype=new by;Lh.constructor=Mh;Ay(Lh,Ys.prototype);Lh.isPureReactComponent=!0;var qp=Array.isArray,Ry=Object.prototype.hasOwnProperty,jh={current:null},Py={key:!0,ref:!0,__self:!0,__source:!0};function Ny(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ry.call(e,r)&&!Py.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ka,type:t,key:s,ref:o,props:i,_owner:jh.current}}function T1(t,e){return{$$typeof:ka,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ka}function I1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hp=/\/+/g;function Ac(t,e){return typeof t=="object"&&t!==null&&t.key!=null?I1(""+t.key):e.toString(36)}function Pl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ka:case h1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ac(o,0):r,qp(i)?(n="",t!=null&&(n=t.replace(Hp,"$&/")+"/"),Pl(i,e,n,"",function(h){return h})):i!=null&&(Vh(i)&&(i=T1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Hp,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",qp(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Ac(s,l);o+=Pl(s,e,n,u,i)}else if(u=E1(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Ac(s,l++),o+=Pl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ll(t,e,n){if(t==null)return t;var r=[],i=0;return Pl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function k1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},Nl={transition:null},S1={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Nl,ReactCurrentOwner:jh};function Dy(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:ll,forEach:function(t,e,n){ll(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ll(t,function(){e++}),e},toArray:function(t){return ll(t,function(e){return e})||[]},only:function(t){if(!Vh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Ys;me.Fragment=f1;me.Profiler=m1;me.PureComponent=Mh;me.StrictMode=p1;me.Suspense=_1;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S1;me.act=Dy;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ay({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=jh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Ry.call(e,u)&&!Py.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:ka,type:t.type,key:i,ref:s,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:y1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:g1,_context:t},t.Consumer=t};me.createElement=Ny;me.createFactory=function(t){var e=Ny.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:v1,render:t}};me.isValidElement=Vh;me.lazy=function(t){return{$$typeof:x1,_payload:{_status:-1,_result:t},_init:k1}};me.memo=function(t,e){return{$$typeof:w1,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=Nl.transition;Nl.transition={};try{t()}finally{Nl.transition=e}};me.unstable_act=Dy;me.useCallback=function(t,e){return Gt.current.useCallback(t,e)};me.useContext=function(t){return Gt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};me.useEffect=function(t,e){return Gt.current.useEffect(t,e)};me.useId=function(){return Gt.current.useId()};me.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Gt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};me.useRef=function(t){return Gt.current.useRef(t)};me.useState=function(t){return Gt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Gt.current.useTransition()};me.version="18.3.1";ky.exports=me;var Q=ky.exports;const My=d1(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A1=Q,C1=Symbol.for("react.element"),b1=Symbol.for("react.fragment"),R1=Object.prototype.hasOwnProperty,P1=A1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N1={key:!0,ref:!0,__self:!0,__source:!0};function Ly(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)R1.call(e,r)&&!N1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:C1,type:t,key:s,ref:o,props:i,_owner:P1.current}}Fu.Fragment=b1;Fu.jsx=Ly;Fu.jsxs=Ly;Iy.exports=Fu;var d=Iy.exports,pd={},jy={exports:{}},mn={},Vy={exports:{}},Oy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,ie){var le=W.length;W.push(ie);e:for(;0<le;){var Pe=le-1>>>1,ve=W[Pe];if(0<i(ve,ie))W[Pe]=ie,W[le]=ve,le=Pe;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ie=W[0],le=W.pop();if(le!==ie){W[0]=le;e:for(var Pe=0,ve=W.length,Be=ve>>>1;Pe<Be;){var Xe=2*(Pe+1)-1,an=W[Xe],mt=Xe+1,Ue=W[mt];if(0>i(an,le))mt<ve&&0>i(Ue,an)?(W[Pe]=Ue,W[mt]=le,Pe=mt):(W[Pe]=an,W[Xe]=le,Pe=Xe);else if(mt<ve&&0>i(Ue,le))W[Pe]=Ue,W[mt]=le,Pe=mt;else break e}}return ie}function i(W,ie){var le=W.sortIndex-ie.sortIndex;return le!==0?le:W.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,m=null,v=3,C=!1,P=!1,M=!1,V=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(W){for(var ie=n(h);ie!==null;){if(ie.callback===null)r(h);else if(ie.startTime<=W)r(h),ie.sortIndex=ie.expirationTime,e(u,ie);else break;ie=n(h)}}function D(W){if(M=!1,x(W),!P)if(n(u)!==null)P=!0,Me(F);else{var ie=n(h);ie!==null&&At(D,ie.startTime-W)}}function F(W,ie){P=!1,M&&(M=!1,A(g),g=-1),C=!0;var le=v;try{for(x(ie),m=n(u);m!==null&&(!(m.expirationTime>ie)||W&&!b());){var Pe=m.callback;if(typeof Pe=="function"){m.callback=null,v=m.priorityLevel;var ve=Pe(m.expirationTime<=ie);ie=t.unstable_now(),typeof ve=="function"?m.callback=ve:m===n(u)&&r(u),x(ie)}else r(u);m=n(u)}if(m!==null)var Be=!0;else{var Xe=n(h);Xe!==null&&At(D,Xe.startTime-ie),Be=!1}return Be}finally{m=null,v=le,C=!1}}var B=!1,I=null,g=-1,w=5,E=-1;function b(){return!(t.unstable_now()-E<w)}function R(){if(I!==null){var W=t.unstable_now();E=W;var ie=!0;try{ie=I(!0,W)}finally{ie?S():(B=!1,I=null)}}else B=!1}var S;if(typeof T=="function")S=function(){T(R)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,St=ee.port2;ee.port1.onmessage=R,S=function(){St.postMessage(null)}}else S=function(){V(R,0)};function Me(W){I=W,B||(B=!0,S())}function At(W,ie){g=V(function(){W(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){P||C||(P=!0,Me(F))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(W){switch(v){case 1:case 2:case 3:var ie=3;break;default:ie=v}var le=v;v=ie;try{return W()}finally{v=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,ie){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var le=v;v=W;try{return ie()}finally{v=le}},t.unstable_scheduleCallback=function(W,ie,le){var Pe=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Pe+le:Pe):le=Pe,W){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=le+ve,W={id:p++,callback:ie,priorityLevel:W,startTime:le,expirationTime:ve,sortIndex:-1},le>Pe?(W.sortIndex=le,e(h,W),n(u)===null&&W===n(h)&&(M?(A(g),g=-1):M=!0,At(D,le-Pe))):(W.sortIndex=ve,e(u,W),P||C||(P=!0,Me(F))),W},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(W){var ie=v;return function(){var le=v;v=ie;try{return W.apply(this,arguments)}finally{v=le}}}})(Oy);Vy.exports=Oy;var D1=Vy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M1=Q,pn=D1;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fy=new Set,Xo={};function Hi(t,e){Ds(t,e),Ds(t+"Capture",e)}function Ds(t,e){for(Xo[t]=e,t=0;t<e.length;t++)Fy.add(e[t])}var yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),md=Object.prototype.hasOwnProperty,L1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gp={},Kp={};function j1(t){return md.call(Kp,t)?!0:md.call(Gp,t)?!1:L1.test(t)?Kp[t]=!0:(Gp[t]=!0,!1)}function V1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function O1(t,e,n,r){if(e===null||typeof e>"u"||V1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new Kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new Kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new Kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new Kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new Kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new Kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new Kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new Kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new Kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Oh=/[\-:]([a-z])/g;function Fh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Oh,Fh);It[e]=new Kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Oh,Fh);It[e]=new Kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Oh,Fh);It[e]=new Kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new Kt(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new Kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Uh(t,e,n,r){var i=It.hasOwnProperty(e)?It[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(O1(e,n,i,r)&&(n=null),r||i===null?j1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ar=M1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ul=Symbol.for("react.element"),cs=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),zh=Symbol.for("react.strict_mode"),gd=Symbol.for("react.profiler"),Uy=Symbol.for("react.provider"),zy=Symbol.for("react.context"),$h=Symbol.for("react.forward_ref"),yd=Symbol.for("react.suspense"),vd=Symbol.for("react.suspense_list"),Bh=Symbol.for("react.memo"),Or=Symbol.for("react.lazy"),$y=Symbol.for("react.offscreen"),Qp=Symbol.iterator;function _o(t){return t===null||typeof t!="object"?null:(t=Qp&&t[Qp]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Cc;function Co(t){if(Cc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cc=e&&e[1]||""}return`
`+Cc+t}var bc=!1;function Rc(t,e){if(!t||bc)return"";bc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{bc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Co(t):""}function F1(t){switch(t.tag){case 5:return Co(t.type);case 16:return Co("Lazy");case 13:return Co("Suspense");case 19:return Co("SuspenseList");case 0:case 2:case 15:return t=Rc(t.type,!1),t;case 11:return t=Rc(t.type.render,!1),t;case 1:return t=Rc(t.type,!0),t;default:return""}}function _d(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ds:return"Fragment";case cs:return"Portal";case gd:return"Profiler";case zh:return"StrictMode";case yd:return"Suspense";case vd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zy:return(t.displayName||"Context")+".Consumer";case Uy:return(t._context.displayName||"Context")+".Provider";case $h:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bh:return e=t.displayName||null,e!==null?e:_d(t.type)||"Memo";case Or:e=t._payload,t=t._init;try{return _d(t(e))}catch{}}return null}function U1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _d(e);case 8:return e===zh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function li(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function By(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function z1(t){var e=By(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cl(t){t._valueTracker||(t._valueTracker=z1(t))}function Wy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=By(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wd(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Yp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=li(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qy(t,e){e=e.checked,e!=null&&Uh(t,"checked",e,!1)}function xd(t,e){qy(t,e);var n=li(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ed(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ed(t,e.type,li(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ed(t,e,n){(e!=="number"||Jl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bo=Array.isArray;function Ts(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+li(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Td(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(bo(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:li(n)}}function Hy(t,e){var n=li(e.value),r=li(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Zp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Gy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Id(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Gy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dl,Ky=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dl=dl||document.createElement("div"),dl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$1=["Webkit","ms","Moz","O"];Object.keys(Vo).forEach(function(t){$1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vo[e]=Vo[t]})});function Qy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vo.hasOwnProperty(t)&&Vo[t]?(""+e).trim():e+"px"}function Yy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Qy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var B1=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kd(t,e){if(e){if(B1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Sd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ad=null;function Wh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cd=null,Is=null,ks=null;function em(t){if(t=Ca(t)){if(typeof Cd!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Wu(e),Cd(t.stateNode,t.type,e))}}function Xy(t){Is?ks?ks.push(t):ks=[t]:Is=t}function Jy(){if(Is){var t=Is,e=ks;if(ks=Is=null,em(t),e)for(t=0;t<e.length;t++)em(e[t])}}function Zy(t,e){return t(e)}function e0(){}var Pc=!1;function t0(t,e,n){if(Pc)return t(e,n);Pc=!0;try{return Zy(t,e,n)}finally{Pc=!1,(Is!==null||ks!==null)&&(e0(),Jy())}}function Zo(t,e){var n=t.stateNode;if(n===null)return null;var r=Wu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var bd=!1;if(yr)try{var wo={};Object.defineProperty(wo,"passive",{get:function(){bd=!0}}),window.addEventListener("test",wo,wo),window.removeEventListener("test",wo,wo)}catch{bd=!1}function W1(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Oo=!1,Zl=null,eu=!1,Rd=null,q1={onError:function(t){Oo=!0,Zl=t}};function H1(t,e,n,r,i,s,o,l,u){Oo=!1,Zl=null,W1.apply(q1,arguments)}function G1(t,e,n,r,i,s,o,l,u){if(H1.apply(this,arguments),Oo){if(Oo){var h=Zl;Oo=!1,Zl=null}else throw Error(q(198));eu||(eu=!0,Rd=h)}}function Gi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function n0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tm(t){if(Gi(t)!==t)throw Error(q(188))}function K1(t){var e=t.alternate;if(!e){if(e=Gi(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return tm(i),t;if(s===r)return tm(i),e;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function r0(t){return t=K1(t),t!==null?i0(t):null}function i0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=i0(t);if(e!==null)return e;t=t.sibling}return null}var s0=pn.unstable_scheduleCallback,nm=pn.unstable_cancelCallback,Q1=pn.unstable_shouldYield,Y1=pn.unstable_requestPaint,tt=pn.unstable_now,X1=pn.unstable_getCurrentPriorityLevel,qh=pn.unstable_ImmediatePriority,o0=pn.unstable_UserBlockingPriority,tu=pn.unstable_NormalPriority,J1=pn.unstable_LowPriority,a0=pn.unstable_IdlePriority,Uu=null,Gn=null;function Z1(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(Uu,t,void 0,(t.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:nx,ex=Math.log,tx=Math.LN2;function nx(t){return t>>>=0,t===0?32:31-(ex(t)/tx|0)|0}var hl=64,fl=4194304;function Ro(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Ro(l):(s&=o,s!==0&&(r=Ro(s)))}else o=n&~i,o!==0?r=Ro(o):s!==0&&(r=Ro(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-jn(e),i=1<<n,r|=t[n],e&=~i;return r}function rx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ix(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-jn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=rx(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Pd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function l0(){var t=hl;return hl<<=1,!(hl&4194240)&&(hl=64),t}function Nc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jn(e),t[e]=n}function sx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-jn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Hh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-jn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ce=0;function u0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var c0,Gh,d0,h0,f0,Nd=!1,pl=[],Qr=null,Yr=null,Xr=null,ea=new Map,ta=new Map,Ur=[],ox="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rm(t,e){switch(t){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":ea.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ta.delete(e.pointerId)}}function xo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ca(e),e!==null&&Gh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ax(t,e,n,r,i){switch(e){case"focusin":return Qr=xo(Qr,t,e,n,r,i),!0;case"dragenter":return Yr=xo(Yr,t,e,n,r,i),!0;case"mouseover":return Xr=xo(Xr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ea.set(s,xo(ea.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ta.set(s,xo(ta.get(s)||null,t,e,n,r,i)),!0}return!1}function p0(t){var e=Ai(t.target);if(e!==null){var n=Gi(e);if(n!==null){if(e=n.tag,e===13){if(e=n0(n),e!==null){t.blockedOn=e,f0(t.priority,function(){d0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Dd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ad=r,n.target.dispatchEvent(r),Ad=null}else return e=Ca(n),e!==null&&Gh(e),t.blockedOn=n,!1;e.shift()}return!0}function im(t,e,n){Dl(t)&&n.delete(e)}function lx(){Nd=!1,Qr!==null&&Dl(Qr)&&(Qr=null),Yr!==null&&Dl(Yr)&&(Yr=null),Xr!==null&&Dl(Xr)&&(Xr=null),ea.forEach(im),ta.forEach(im)}function Eo(t,e){t.blockedOn===e&&(t.blockedOn=null,Nd||(Nd=!0,pn.unstable_scheduleCallback(pn.unstable_NormalPriority,lx)))}function na(t){function e(i){return Eo(i,t)}if(0<pl.length){Eo(pl[0],t);for(var n=1;n<pl.length;n++){var r=pl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qr!==null&&Eo(Qr,t),Yr!==null&&Eo(Yr,t),Xr!==null&&Eo(Xr,t),ea.forEach(e),ta.forEach(e),n=0;n<Ur.length;n++)r=Ur[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ur.length&&(n=Ur[0],n.blockedOn===null);)p0(n),n.blockedOn===null&&Ur.shift()}var Ss=Ar.ReactCurrentBatchConfig,ru=!0;function ux(t,e,n,r){var i=Ce,s=Ss.transition;Ss.transition=null;try{Ce=1,Kh(t,e,n,r)}finally{Ce=i,Ss.transition=s}}function cx(t,e,n,r){var i=Ce,s=Ss.transition;Ss.transition=null;try{Ce=4,Kh(t,e,n,r)}finally{Ce=i,Ss.transition=s}}function Kh(t,e,n,r){if(ru){var i=Dd(t,e,n,r);if(i===null)$c(t,e,r,iu,n),rm(t,r);else if(ax(i,t,e,n,r))r.stopPropagation();else if(rm(t,r),e&4&&-1<ox.indexOf(t)){for(;i!==null;){var s=Ca(i);if(s!==null&&c0(s),s=Dd(t,e,n,r),s===null&&$c(t,e,r,iu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else $c(t,e,r,null,n)}}var iu=null;function Dd(t,e,n,r){if(iu=null,t=Wh(r),t=Ai(t),t!==null)if(e=Gi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=n0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return iu=t,null}function m0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(X1()){case qh:return 1;case o0:return 4;case tu:case J1:return 16;case a0:return 536870912;default:return 16}default:return 16}}var Hr=null,Qh=null,Ml=null;function g0(){if(Ml)return Ml;var t,e=Qh,n=e.length,r,i="value"in Hr?Hr.value:Hr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ml=i.slice(t,1<r?1-r:void 0)}function Ll(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ml(){return!0}function sm(){return!1}function gn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ml:sm,this.isPropagationStopped=sm,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ml)},persist:function(){},isPersistent:ml}),e}var Xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yh=gn(Xs),Aa=Ge({},Xs,{view:0,detail:0}),dx=gn(Aa),Dc,Mc,To,zu=Ge({},Aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==To&&(To&&t.type==="mousemove"?(Dc=t.screenX-To.screenX,Mc=t.screenY-To.screenY):Mc=Dc=0,To=t),Dc)},movementY:function(t){return"movementY"in t?t.movementY:Mc}}),om=gn(zu),hx=Ge({},zu,{dataTransfer:0}),fx=gn(hx),px=Ge({},Aa,{relatedTarget:0}),Lc=gn(px),mx=Ge({},Xs,{animationName:0,elapsedTime:0,pseudoElement:0}),gx=gn(mx),yx=Ge({},Xs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vx=gn(yx),_x=Ge({},Xs,{data:0}),am=gn(_x),wx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ex={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ex[t])?!!e[t]:!1}function Xh(){return Tx}var Ix=Ge({},Aa,{key:function(t){if(t.key){var e=wx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ll(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xh,charCode:function(t){return t.type==="keypress"?Ll(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ll(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kx=gn(Ix),Sx=Ge({},zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lm=gn(Sx),Ax=Ge({},Aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xh}),Cx=gn(Ax),bx=Ge({},Xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rx=gn(bx),Px=Ge({},zu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Nx=gn(Px),Dx=[9,13,27,32],Jh=yr&&"CompositionEvent"in window,Fo=null;yr&&"documentMode"in document&&(Fo=document.documentMode);var Mx=yr&&"TextEvent"in window&&!Fo,y0=yr&&(!Jh||Fo&&8<Fo&&11>=Fo),um=" ",cm=!1;function v0(t,e){switch(t){case"keyup":return Dx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hs=!1;function Lx(t,e){switch(t){case"compositionend":return _0(e);case"keypress":return e.which!==32?null:(cm=!0,um);case"textInput":return t=e.data,t===um&&cm?null:t;default:return null}}function jx(t,e){if(hs)return t==="compositionend"||!Jh&&v0(t,e)?(t=g0(),Ml=Qh=Hr=null,hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return y0&&e.locale!=="ko"?null:e.data;default:return null}}var Vx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Vx[t.type]:e==="textarea"}function w0(t,e,n,r){Xy(r),e=su(e,"onChange"),0<e.length&&(n=new Yh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Uo=null,ra=null;function Ox(t){P0(t,0)}function $u(t){var e=ms(t);if(Wy(e))return t}function Fx(t,e){if(t==="change")return e}var x0=!1;if(yr){var jc;if(yr){var Vc="oninput"in document;if(!Vc){var hm=document.createElement("div");hm.setAttribute("oninput","return;"),Vc=typeof hm.oninput=="function"}jc=Vc}else jc=!1;x0=jc&&(!document.documentMode||9<document.documentMode)}function fm(){Uo&&(Uo.detachEvent("onpropertychange",E0),ra=Uo=null)}function E0(t){if(t.propertyName==="value"&&$u(ra)){var e=[];w0(e,ra,t,Wh(t)),t0(Ox,e)}}function Ux(t,e,n){t==="focusin"?(fm(),Uo=e,ra=n,Uo.attachEvent("onpropertychange",E0)):t==="focusout"&&fm()}function zx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $u(ra)}function $x(t,e){if(t==="click")return $u(e)}function Bx(t,e){if(t==="input"||t==="change")return $u(e)}function Wx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var On=typeof Object.is=="function"?Object.is:Wx;function ia(t,e){if(On(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!md.call(e,i)||!On(t[i],e[i]))return!1}return!0}function pm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mm(t,e){var n=pm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pm(n)}}function T0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?T0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function I0(){for(var t=window,e=Jl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jl(t.document)}return e}function Zh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qx(t){var e=I0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&T0(n.ownerDocument.documentElement,n)){if(r!==null&&Zh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=mm(n,s);var o=mm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Hx=yr&&"documentMode"in document&&11>=document.documentMode,fs=null,Md=null,zo=null,Ld=!1;function gm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ld||fs==null||fs!==Jl(r)||(r=fs,"selectionStart"in r&&Zh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zo&&ia(zo,r)||(zo=r,r=su(Md,"onSelect"),0<r.length&&(e=new Yh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fs)))}function gl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ps={animationend:gl("Animation","AnimationEnd"),animationiteration:gl("Animation","AnimationIteration"),animationstart:gl("Animation","AnimationStart"),transitionend:gl("Transition","TransitionEnd")},Oc={},k0={};yr&&(k0=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function Bu(t){if(Oc[t])return Oc[t];if(!ps[t])return t;var e=ps[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in k0)return Oc[t]=e[n];return t}var S0=Bu("animationend"),A0=Bu("animationiteration"),C0=Bu("animationstart"),b0=Bu("transitionend"),R0=new Map,ym="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fi(t,e){R0.set(t,e),Hi(e,[t])}for(var Fc=0;Fc<ym.length;Fc++){var Uc=ym[Fc],Gx=Uc.toLowerCase(),Kx=Uc[0].toUpperCase()+Uc.slice(1);fi(Gx,"on"+Kx)}fi(S0,"onAnimationEnd");fi(A0,"onAnimationIteration");fi(C0,"onAnimationStart");fi("dblclick","onDoubleClick");fi("focusin","onFocus");fi("focusout","onBlur");fi(b0,"onTransitionEnd");Ds("onMouseEnter",["mouseout","mouseover"]);Ds("onMouseLeave",["mouseout","mouseover"]);Ds("onPointerEnter",["pointerout","pointerover"]);Ds("onPointerLeave",["pointerout","pointerover"]);Hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Po));function vm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,G1(r,e,void 0,t),t.currentTarget=null}function P0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;vm(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;vm(i,l,h),s=u}}}if(eu)throw t=Rd,eu=!1,Rd=null,t}function Ve(t,e){var n=e[Ud];n===void 0&&(n=e[Ud]=new Set);var r=t+"__bubble";n.has(r)||(N0(e,t,2,!1),n.add(r))}function zc(t,e,n){var r=0;e&&(r|=4),N0(n,t,r,e)}var yl="_reactListening"+Math.random().toString(36).slice(2);function sa(t){if(!t[yl]){t[yl]=!0,Fy.forEach(function(n){n!=="selectionchange"&&(Qx.has(n)||zc(n,!1,t),zc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yl]||(e[yl]=!0,zc("selectionchange",!1,e))}}function N0(t,e,n,r){switch(m0(e)){case 1:var i=ux;break;case 4:i=cx;break;default:i=Kh}n=i.bind(null,e,n,t),i=void 0,!bd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function $c(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Ai(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}t0(function(){var h=s,p=Wh(n),m=[];e:{var v=R0.get(t);if(v!==void 0){var C=Yh,P=t;switch(t){case"keypress":if(Ll(n)===0)break e;case"keydown":case"keyup":C=kx;break;case"focusin":P="focus",C=Lc;break;case"focusout":P="blur",C=Lc;break;case"beforeblur":case"afterblur":C=Lc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=om;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=fx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Cx;break;case S0:case A0:case C0:C=gx;break;case b0:C=Rx;break;case"scroll":C=dx;break;case"wheel":C=Nx;break;case"copy":case"cut":case"paste":C=vx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=lm}var M=(e&4)!==0,V=!M&&t==="scroll",A=M?v!==null?v+"Capture":null:v;M=[];for(var T=h,x;T!==null;){x=T;var D=x.stateNode;if(x.tag===5&&D!==null&&(x=D,A!==null&&(D=Zo(T,A),D!=null&&M.push(oa(T,D,x)))),V)break;T=T.return}0<M.length&&(v=new C(v,P,null,n,p),m.push({event:v,listeners:M}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",v&&n!==Ad&&(P=n.relatedTarget||n.fromElement)&&(Ai(P)||P[vr]))break e;if((C||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,C?(P=n.relatedTarget||n.toElement,C=h,P=P?Ai(P):null,P!==null&&(V=Gi(P),P!==V||P.tag!==5&&P.tag!==6)&&(P=null)):(C=null,P=h),C!==P)){if(M=om,D="onMouseLeave",A="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(M=lm,D="onPointerLeave",A="onPointerEnter",T="pointer"),V=C==null?v:ms(C),x=P==null?v:ms(P),v=new M(D,T+"leave",C,n,p),v.target=V,v.relatedTarget=x,D=null,Ai(p)===h&&(M=new M(A,T+"enter",P,n,p),M.target=x,M.relatedTarget=V,D=M),V=D,C&&P)t:{for(M=C,A=P,T=0,x=M;x;x=ss(x))T++;for(x=0,D=A;D;D=ss(D))x++;for(;0<T-x;)M=ss(M),T--;for(;0<x-T;)A=ss(A),x--;for(;T--;){if(M===A||A!==null&&M===A.alternate)break t;M=ss(M),A=ss(A)}M=null}else M=null;C!==null&&_m(m,v,C,M,!1),P!==null&&V!==null&&_m(m,V,P,M,!0)}}e:{if(v=h?ms(h):window,C=v.nodeName&&v.nodeName.toLowerCase(),C==="select"||C==="input"&&v.type==="file")var F=Fx;else if(dm(v))if(x0)F=Bx;else{F=zx;var B=Ux}else(C=v.nodeName)&&C.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(F=$x);if(F&&(F=F(t,h))){w0(m,F,n,p);break e}B&&B(t,v,h),t==="focusout"&&(B=v._wrapperState)&&B.controlled&&v.type==="number"&&Ed(v,"number",v.value)}switch(B=h?ms(h):window,t){case"focusin":(dm(B)||B.contentEditable==="true")&&(fs=B,Md=h,zo=null);break;case"focusout":zo=Md=fs=null;break;case"mousedown":Ld=!0;break;case"contextmenu":case"mouseup":case"dragend":Ld=!1,gm(m,n,p);break;case"selectionchange":if(Hx)break;case"keydown":case"keyup":gm(m,n,p)}var I;if(Jh)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else hs?v0(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(y0&&n.locale!=="ko"&&(hs||g!=="onCompositionStart"?g==="onCompositionEnd"&&hs&&(I=g0()):(Hr=p,Qh="value"in Hr?Hr.value:Hr.textContent,hs=!0)),B=su(h,g),0<B.length&&(g=new am(g,t,null,n,p),m.push({event:g,listeners:B}),I?g.data=I:(I=_0(n),I!==null&&(g.data=I)))),(I=Mx?Lx(t,n):jx(t,n))&&(h=su(h,"onBeforeInput"),0<h.length&&(p=new am("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=I))}P0(m,e)})}function oa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function su(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Zo(t,n),s!=null&&r.unshift(oa(t,s,i)),s=Zo(t,e),s!=null&&r.push(oa(t,s,i))),t=t.return}return r}function ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _m(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Zo(n,s),u!=null&&o.unshift(oa(n,u,l))):i||(u=Zo(n,s),u!=null&&o.push(oa(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Yx=/\r\n?/g,Xx=/\u0000|\uFFFD/g;function wm(t){return(typeof t=="string"?t:""+t).replace(Yx,`
`).replace(Xx,"")}function vl(t,e,n){if(e=wm(e),wm(t)!==e&&n)throw Error(q(425))}function ou(){}var jd=null,Vd=null;function Od(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fd=typeof setTimeout=="function"?setTimeout:void 0,Jx=typeof clearTimeout=="function"?clearTimeout:void 0,xm=typeof Promise=="function"?Promise:void 0,Zx=typeof queueMicrotask=="function"?queueMicrotask:typeof xm<"u"?function(t){return xm.resolve(null).then(t).catch(eE)}:Fd;function eE(t){setTimeout(function(){throw t})}function Bc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),na(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);na(e)}function Jr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Em(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Js=Math.random().toString(36).slice(2),qn="__reactFiber$"+Js,aa="__reactProps$"+Js,vr="__reactContainer$"+Js,Ud="__reactEvents$"+Js,tE="__reactListeners$"+Js,nE="__reactHandles$"+Js;function Ai(t){var e=t[qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vr]||n[qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Em(t);t!==null;){if(n=t[qn])return n;t=Em(t)}return e}t=n,n=t.parentNode}return null}function Ca(t){return t=t[qn]||t[vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ms(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Wu(t){return t[aa]||null}var zd=[],gs=-1;function pi(t){return{current:t}}function Fe(t){0>gs||(t.current=zd[gs],zd[gs]=null,gs--)}function De(t,e){gs++,zd[gs]=t.current,t.current=e}var ui={},zt=pi(ui),tn=pi(!1),ji=ui;function Ms(t,e){var n=t.type.contextTypes;if(!n)return ui;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function nn(t){return t=t.childContextTypes,t!=null}function au(){Fe(tn),Fe(zt)}function Tm(t,e,n){if(zt.current!==ui)throw Error(q(168));De(zt,e),De(tn,n)}function D0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,U1(t)||"Unknown",i));return Ge({},n,r)}function lu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ui,ji=zt.current,De(zt,t),De(tn,tn.current),!0}function Im(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=D0(t,e,ji),r.__reactInternalMemoizedMergedChildContext=t,Fe(tn),Fe(zt),De(zt,t)):Fe(tn),De(tn,n)}var ur=null,qu=!1,Wc=!1;function M0(t){ur===null?ur=[t]:ur.push(t)}function rE(t){qu=!0,M0(t)}function mi(){if(!Wc&&ur!==null){Wc=!0;var t=0,e=Ce;try{var n=ur;for(Ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ur=null,qu=!1}catch(i){throw ur!==null&&(ur=ur.slice(t+1)),s0(qh,mi),i}finally{Ce=e,Wc=!1}}return null}var ys=[],vs=0,uu=null,cu=0,En=[],Tn=0,Vi=null,cr=1,dr="";function Ii(t,e){ys[vs++]=cu,ys[vs++]=uu,uu=t,cu=e}function L0(t,e,n){En[Tn++]=cr,En[Tn++]=dr,En[Tn++]=Vi,Vi=t;var r=cr;t=dr;var i=32-jn(r)-1;r&=~(1<<i),n+=1;var s=32-jn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,cr=1<<32-jn(e)+i|n<<i|r,dr=s+t}else cr=1<<s|n<<i|r,dr=t}function ef(t){t.return!==null&&(Ii(t,1),L0(t,1,0))}function tf(t){for(;t===uu;)uu=ys[--vs],ys[vs]=null,cu=ys[--vs],ys[vs]=null;for(;t===Vi;)Vi=En[--Tn],En[Tn]=null,dr=En[--Tn],En[Tn]=null,cr=En[--Tn],En[Tn]=null}var fn=null,hn=null,$e=!1,Mn=null;function j0(t,e){var n=kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function km(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fn=t,hn=Jr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fn=t,hn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vi!==null?{id:cr,overflow:dr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fn=t,hn=null,!0):!1;default:return!1}}function $d(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bd(t){if($e){var e=hn;if(e){var n=e;if(!km(t,e)){if($d(t))throw Error(q(418));e=Jr(n.nextSibling);var r=fn;e&&km(t,e)?j0(r,n):(t.flags=t.flags&-4097|2,$e=!1,fn=t)}}else{if($d(t))throw Error(q(418));t.flags=t.flags&-4097|2,$e=!1,fn=t}}}function Sm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fn=t}function _l(t){if(t!==fn)return!1;if(!$e)return Sm(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Od(t.type,t.memoizedProps)),e&&(e=hn)){if($d(t))throw V0(),Error(q(418));for(;e;)j0(t,e),e=Jr(e.nextSibling)}if(Sm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){hn=Jr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}hn=null}}else hn=fn?Jr(t.stateNode.nextSibling):null;return!0}function V0(){for(var t=hn;t;)t=Jr(t.nextSibling)}function Ls(){hn=fn=null,$e=!1}function nf(t){Mn===null?Mn=[t]:Mn.push(t)}var iE=Ar.ReactCurrentBatchConfig;function Io(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function wl(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Am(t){var e=t._init;return e(t._payload)}function O0(t){function e(A,T){if(t){var x=A.deletions;x===null?(A.deletions=[T],A.flags|=16):x.push(T)}}function n(A,T){if(!t)return null;for(;T!==null;)e(A,T),T=T.sibling;return null}function r(A,T){for(A=new Map;T!==null;)T.key!==null?A.set(T.key,T):A.set(T.index,T),T=T.sibling;return A}function i(A,T){return A=ni(A,T),A.index=0,A.sibling=null,A}function s(A,T,x){return A.index=x,t?(x=A.alternate,x!==null?(x=x.index,x<T?(A.flags|=2,T):x):(A.flags|=2,T)):(A.flags|=1048576,T)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function l(A,T,x,D){return T===null||T.tag!==6?(T=Xc(x,A.mode,D),T.return=A,T):(T=i(T,x),T.return=A,T)}function u(A,T,x,D){var F=x.type;return F===ds?p(A,T,x.props.children,D,x.key):T!==null&&(T.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Or&&Am(F)===T.type)?(D=i(T,x.props),D.ref=Io(A,T,x),D.return=A,D):(D=$l(x.type,x.key,x.props,null,A.mode,D),D.ref=Io(A,T,x),D.return=A,D)}function h(A,T,x,D){return T===null||T.tag!==4||T.stateNode.containerInfo!==x.containerInfo||T.stateNode.implementation!==x.implementation?(T=Jc(x,A.mode,D),T.return=A,T):(T=i(T,x.children||[]),T.return=A,T)}function p(A,T,x,D,F){return T===null||T.tag!==7?(T=Ni(x,A.mode,D,F),T.return=A,T):(T=i(T,x),T.return=A,T)}function m(A,T,x){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Xc(""+T,A.mode,x),T.return=A,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ul:return x=$l(T.type,T.key,T.props,null,A.mode,x),x.ref=Io(A,null,T),x.return=A,x;case cs:return T=Jc(T,A.mode,x),T.return=A,T;case Or:var D=T._init;return m(A,D(T._payload),x)}if(bo(T)||_o(T))return T=Ni(T,A.mode,x,null),T.return=A,T;wl(A,T)}return null}function v(A,T,x,D){var F=T!==null?T.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return F!==null?null:l(A,T,""+x,D);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ul:return x.key===F?u(A,T,x,D):null;case cs:return x.key===F?h(A,T,x,D):null;case Or:return F=x._init,v(A,T,F(x._payload),D)}if(bo(x)||_o(x))return F!==null?null:p(A,T,x,D,null);wl(A,x)}return null}function C(A,T,x,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return A=A.get(x)||null,l(T,A,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ul:return A=A.get(D.key===null?x:D.key)||null,u(T,A,D,F);case cs:return A=A.get(D.key===null?x:D.key)||null,h(T,A,D,F);case Or:var B=D._init;return C(A,T,x,B(D._payload),F)}if(bo(D)||_o(D))return A=A.get(x)||null,p(T,A,D,F,null);wl(T,D)}return null}function P(A,T,x,D){for(var F=null,B=null,I=T,g=T=0,w=null;I!==null&&g<x.length;g++){I.index>g?(w=I,I=null):w=I.sibling;var E=v(A,I,x[g],D);if(E===null){I===null&&(I=w);break}t&&I&&E.alternate===null&&e(A,I),T=s(E,T,g),B===null?F=E:B.sibling=E,B=E,I=w}if(g===x.length)return n(A,I),$e&&Ii(A,g),F;if(I===null){for(;g<x.length;g++)I=m(A,x[g],D),I!==null&&(T=s(I,T,g),B===null?F=I:B.sibling=I,B=I);return $e&&Ii(A,g),F}for(I=r(A,I);g<x.length;g++)w=C(I,A,g,x[g],D),w!==null&&(t&&w.alternate!==null&&I.delete(w.key===null?g:w.key),T=s(w,T,g),B===null?F=w:B.sibling=w,B=w);return t&&I.forEach(function(b){return e(A,b)}),$e&&Ii(A,g),F}function M(A,T,x,D){var F=_o(x);if(typeof F!="function")throw Error(q(150));if(x=F.call(x),x==null)throw Error(q(151));for(var B=F=null,I=T,g=T=0,w=null,E=x.next();I!==null&&!E.done;g++,E=x.next()){I.index>g?(w=I,I=null):w=I.sibling;var b=v(A,I,E.value,D);if(b===null){I===null&&(I=w);break}t&&I&&b.alternate===null&&e(A,I),T=s(b,T,g),B===null?F=b:B.sibling=b,B=b,I=w}if(E.done)return n(A,I),$e&&Ii(A,g),F;if(I===null){for(;!E.done;g++,E=x.next())E=m(A,E.value,D),E!==null&&(T=s(E,T,g),B===null?F=E:B.sibling=E,B=E);return $e&&Ii(A,g),F}for(I=r(A,I);!E.done;g++,E=x.next())E=C(I,A,g,E.value,D),E!==null&&(t&&E.alternate!==null&&I.delete(E.key===null?g:E.key),T=s(E,T,g),B===null?F=E:B.sibling=E,B=E);return t&&I.forEach(function(R){return e(A,R)}),$e&&Ii(A,g),F}function V(A,T,x,D){if(typeof x=="object"&&x!==null&&x.type===ds&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case ul:e:{for(var F=x.key,B=T;B!==null;){if(B.key===F){if(F=x.type,F===ds){if(B.tag===7){n(A,B.sibling),T=i(B,x.props.children),T.return=A,A=T;break e}}else if(B.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Or&&Am(F)===B.type){n(A,B.sibling),T=i(B,x.props),T.ref=Io(A,B,x),T.return=A,A=T;break e}n(A,B);break}else e(A,B);B=B.sibling}x.type===ds?(T=Ni(x.props.children,A.mode,D,x.key),T.return=A,A=T):(D=$l(x.type,x.key,x.props,null,A.mode,D),D.ref=Io(A,T,x),D.return=A,A=D)}return o(A);case cs:e:{for(B=x.key;T!==null;){if(T.key===B)if(T.tag===4&&T.stateNode.containerInfo===x.containerInfo&&T.stateNode.implementation===x.implementation){n(A,T.sibling),T=i(T,x.children||[]),T.return=A,A=T;break e}else{n(A,T);break}else e(A,T);T=T.sibling}T=Jc(x,A.mode,D),T.return=A,A=T}return o(A);case Or:return B=x._init,V(A,T,B(x._payload),D)}if(bo(x))return P(A,T,x,D);if(_o(x))return M(A,T,x,D);wl(A,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,T!==null&&T.tag===6?(n(A,T.sibling),T=i(T,x),T.return=A,A=T):(n(A,T),T=Xc(x,A.mode,D),T.return=A,A=T),o(A)):n(A,T)}return V}var js=O0(!0),F0=O0(!1),du=pi(null),hu=null,_s=null,rf=null;function sf(){rf=_s=hu=null}function of(t){var e=du.current;Fe(du),t._currentValue=e}function Wd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function As(t,e){hu=t,rf=_s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(en=!0),t.firstContext=null)}function An(t){var e=t._currentValue;if(rf!==t)if(t={context:t,memoizedValue:e,next:null},_s===null){if(hu===null)throw Error(q(308));_s=t,hu.dependencies={lanes:0,firstContext:t}}else _s=_s.next=t;return e}var Ci=null;function af(t){Ci===null?Ci=[t]:Ci.push(t)}function U0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,af(e)):(n.next=i.next,i.next=n),e.interleaved=n,_r(t,r)}function _r(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fr=!1;function lf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,_r(t,n)}return i=r.interleaved,i===null?(e.next=e,af(r)):(e.next=i.next,i.next=e),r.interleaved=e,_r(t,n)}function jl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hh(t,n)}}function Cm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fu(t,e,n,r){var i=t.updateQueue;Fr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,p=h=u=null,l=s;do{var v=l.lane,C=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,M=l;switch(v=e,C=n,M.tag){case 1:if(P=M.payload,typeof P=="function"){m=P.call(C,m,v);break e}m=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=M.payload,v=typeof P=="function"?P.call(C,m,v):P,v==null)break e;m=Ge({},m,v);break e;case 2:Fr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[l]:v.push(l))}else C={eventTime:C,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=C,u=m):p=p.next=C,o|=v;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;v=l,l=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(p===null&&(u=m),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Fi|=o,t.lanes=o,t.memoizedState=m}}function bm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var ba={},Kn=pi(ba),la=pi(ba),ua=pi(ba);function bi(t){if(t===ba)throw Error(q(174));return t}function uf(t,e){switch(De(ua,e),De(la,t),De(Kn,ba),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Id(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Id(e,t)}Fe(Kn),De(Kn,e)}function Vs(){Fe(Kn),Fe(la),Fe(ua)}function $0(t){bi(ua.current);var e=bi(Kn.current),n=Id(e,t.type);e!==n&&(De(la,t),De(Kn,n))}function cf(t){la.current===t&&(Fe(Kn),Fe(la))}var qe=pi(0);function pu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qc=[];function df(){for(var t=0;t<qc.length;t++)qc[t]._workInProgressVersionPrimary=null;qc.length=0}var Vl=Ar.ReactCurrentDispatcher,Hc=Ar.ReactCurrentBatchConfig,Oi=0,He=null,at=null,ht=null,mu=!1,$o=!1,ca=0,sE=0;function Mt(){throw Error(q(321))}function hf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!On(t[n],e[n]))return!1;return!0}function ff(t,e,n,r,i,s){if(Oi=s,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vl.current=t===null||t.memoizedState===null?uE:cE,t=n(r,i),$o){s=0;do{if($o=!1,ca=0,25<=s)throw Error(q(301));s+=1,ht=at=null,e.updateQueue=null,Vl.current=dE,t=n(r,i)}while($o)}if(Vl.current=gu,e=at!==null&&at.next!==null,Oi=0,ht=at=He=null,mu=!1,e)throw Error(q(300));return t}function pf(){var t=ca!==0;return ca=0,t}function Wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?He.memoizedState=ht=t:ht=ht.next=t,ht}function Cn(){if(at===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var e=ht===null?He.memoizedState:ht.next;if(e!==null)ht=e,at=t;else{if(t===null)throw Error(q(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},ht===null?He.memoizedState=ht=t:ht=ht.next=t}return ht}function da(t,e){return typeof e=="function"?e(t):e}function Gc(t){var e=Cn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=at,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var p=h.lane;if((Oi&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,He.lanes|=p,Fi|=p}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,On(r,e.memoizedState)||(en=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,He.lanes|=s,Fi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Kc(t){var e=Cn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);On(s,e.memoizedState)||(en=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function B0(){}function W0(t,e){var n=He,r=Cn(),i=e(),s=!On(r.memoizedState,i);if(s&&(r.memoizedState=i,en=!0),r=r.queue,mf(G0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,ha(9,H0.bind(null,n,r,i,e),void 0,null),pt===null)throw Error(q(349));Oi&30||q0(n,e,i)}return i}function q0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function H0(t,e,n,r){e.value=n,e.getSnapshot=r,K0(e)&&Q0(t)}function G0(t,e,n){return n(function(){K0(e)&&Q0(t)})}function K0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!On(t,n)}catch{return!0}}function Q0(t){var e=_r(t,1);e!==null&&Vn(e,t,1,-1)}function Rm(t){var e=Wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:t},e.queue=t,t=t.dispatch=lE.bind(null,He,t),[e.memoizedState,t]}function ha(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Y0(){return Cn().memoizedState}function Ol(t,e,n,r){var i=Wn();He.flags|=t,i.memoizedState=ha(1|e,n,void 0,r===void 0?null:r)}function Hu(t,e,n,r){var i=Cn();r=r===void 0?null:r;var s=void 0;if(at!==null){var o=at.memoizedState;if(s=o.destroy,r!==null&&hf(r,o.deps)){i.memoizedState=ha(e,n,s,r);return}}He.flags|=t,i.memoizedState=ha(1|e,n,s,r)}function Pm(t,e){return Ol(8390656,8,t,e)}function mf(t,e){return Hu(2048,8,t,e)}function X0(t,e){return Hu(4,2,t,e)}function J0(t,e){return Hu(4,4,t,e)}function Z0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ev(t,e,n){return n=n!=null?n.concat([t]):null,Hu(4,4,Z0.bind(null,e,t),n)}function gf(){}function tv(t,e){var n=Cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function nv(t,e){var n=Cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function rv(t,e,n){return Oi&21?(On(n,e)||(n=l0(),He.lanes|=n,Fi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,en=!0),t.memoizedState=n)}function oE(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var r=Hc.transition;Hc.transition={};try{t(!1),e()}finally{Ce=n,Hc.transition=r}}function iv(){return Cn().memoizedState}function aE(t,e,n){var r=ti(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sv(t))ov(e,n);else if(n=U0(t,e,n,r),n!==null){var i=Ht();Vn(n,t,r,i),av(n,e,r)}}function lE(t,e,n){var r=ti(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sv(t))ov(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,On(l,o)){var u=e.interleaved;u===null?(i.next=i,af(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=U0(t,e,i,r),n!==null&&(i=Ht(),Vn(n,t,r,i),av(n,e,r))}}function sv(t){var e=t.alternate;return t===He||e!==null&&e===He}function ov(t,e){$o=mu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function av(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hh(t,n)}}var gu={readContext:An,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},uE={readContext:An,useCallback:function(t,e){return Wn().memoizedState=[t,e===void 0?null:e],t},useContext:An,useEffect:Pm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ol(4194308,4,Z0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ol(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ol(4,2,t,e)},useMemo:function(t,e){var n=Wn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aE.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=Wn();return t={current:t},e.memoizedState=t},useState:Rm,useDebugValue:gf,useDeferredValue:function(t){return Wn().memoizedState=t},useTransition:function(){var t=Rm(!1),e=t[0];return t=oE.bind(null,t[1]),Wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,i=Wn();if($e){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),pt===null)throw Error(q(349));Oi&30||q0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Pm(G0.bind(null,r,s,t),[t]),r.flags|=2048,ha(9,H0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Wn(),e=pt.identifierPrefix;if($e){var n=dr,r=cr;n=(r&~(1<<32-jn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ca++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cE={readContext:An,useCallback:tv,useContext:An,useEffect:mf,useImperativeHandle:ev,useInsertionEffect:X0,useLayoutEffect:J0,useMemo:nv,useReducer:Gc,useRef:Y0,useState:function(){return Gc(da)},useDebugValue:gf,useDeferredValue:function(t){var e=Cn();return rv(e,at.memoizedState,t)},useTransition:function(){var t=Gc(da)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:B0,useSyncExternalStore:W0,useId:iv,unstable_isNewReconciler:!1},dE={readContext:An,useCallback:tv,useContext:An,useEffect:mf,useImperativeHandle:ev,useInsertionEffect:X0,useLayoutEffect:J0,useMemo:nv,useReducer:Kc,useRef:Y0,useState:function(){return Kc(da)},useDebugValue:gf,useDeferredValue:function(t){var e=Cn();return at===null?e.memoizedState=t:rv(e,at.memoizedState,t)},useTransition:function(){var t=Kc(da)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:B0,useSyncExternalStore:W0,useId:iv,unstable_isNewReconciler:!1};function Nn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gu={isMounted:function(t){return(t=t._reactInternals)?Gi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ht(),i=ti(t),s=mr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Zr(t,s,i),e!==null&&(Vn(e,t,i,r),jl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ht(),i=ti(t),s=mr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Zr(t,s,i),e!==null&&(Vn(e,t,i,r),jl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ht(),r=ti(t),i=mr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Zr(t,i,r),e!==null&&(Vn(e,t,r,n),jl(e,t,r))}};function Nm(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ia(n,r)||!ia(i,s):!0}function lv(t,e,n){var r=!1,i=ui,s=e.contextType;return typeof s=="object"&&s!==null?s=An(s):(i=nn(e)?ji:zt.current,r=e.contextTypes,s=(r=r!=null)?Ms(t,i):ui),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Dm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gu.enqueueReplaceState(e,e.state,null)}function Hd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},lf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=An(s):(s=nn(e)?ji:zt.current,i.context=Ms(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(qd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Gu.enqueueReplaceState(i,i.state,null),fu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Os(t,e){try{var n="",r=e;do n+=F1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Qc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hE=typeof WeakMap=="function"?WeakMap:Map;function uv(t,e,n){n=mr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vu||(vu=!0,rh=r),Gd(t,e)},n}function cv(t,e,n){n=mr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Gd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Gd(t,e),typeof r!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Mm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=SE.bind(null,t,e,n),e.then(t,t))}function Lm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mr(-1,1),e.tag=2,Zr(n,e,1))),n.lanes|=1),t)}var fE=Ar.ReactCurrentOwner,en=!1;function qt(t,e,n,r){e.child=t===null?F0(e,null,n,r):js(e,t.child,n,r)}function Vm(t,e,n,r,i){n=n.render;var s=e.ref;return As(e,i),r=ff(t,e,n,r,s,i),n=pf(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wr(t,e,i)):($e&&n&&ef(e),e.flags|=1,qt(t,e,r,i),e.child)}function Om(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!If(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,dv(t,e,s,r,i)):(t=$l(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ia,n(o,r)&&t.ref===e.ref)return wr(t,e,i)}return e.flags|=1,t=ni(s,r),t.ref=e.ref,t.return=e,e.child=t}function dv(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ia(s,r)&&t.ref===e.ref)if(en=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(en=!0);else return e.lanes=t.lanes,wr(t,e,i)}return Kd(t,e,n,r,i)}function hv(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(xs,dn),dn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(xs,dn),dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,De(xs,dn),dn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,De(xs,dn),dn|=r;return qt(t,e,i,n),e.child}function fv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Kd(t,e,n,r,i){var s=nn(n)?ji:zt.current;return s=Ms(e,s),As(e,i),n=ff(t,e,n,r,s,i),r=pf(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wr(t,e,i)):($e&&r&&ef(e),e.flags|=1,qt(t,e,n,i),e.child)}function Fm(t,e,n,r,i){if(nn(n)){var s=!0;lu(e)}else s=!1;if(As(e,i),e.stateNode===null)Fl(t,e),lv(e,n,r),Hd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=An(h):(h=nn(n)?ji:zt.current,h=Ms(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Dm(e,o,r,h),Fr=!1;var v=e.memoizedState;o.state=v,fu(e,r,o,i),u=e.memoizedState,l!==r||v!==u||tn.current||Fr?(typeof p=="function"&&(qd(e,n,p,r),u=e.memoizedState),(l=Fr||Nm(e,n,l,r,v,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,z0(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Nn(e.type,l),o.props=h,m=e.pendingProps,v=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=An(u):(u=nn(n)?ji:zt.current,u=Ms(e,u));var C=n.getDerivedStateFromProps;(p=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||v!==u)&&Dm(e,o,r,u),Fr=!1,v=e.memoizedState,o.state=v,fu(e,r,o,i);var P=e.memoizedState;l!==m||v!==P||tn.current||Fr?(typeof C=="function"&&(qd(e,n,C,r),P=e.memoizedState),(h=Fr||Nm(e,n,h,r,v,P,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return Qd(t,e,n,r,s,i)}function Qd(t,e,n,r,i,s){fv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Im(e,n,!1),wr(t,e,s);r=e.stateNode,fE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=js(e,t.child,null,s),e.child=js(e,null,l,s)):qt(t,e,l,s),e.memoizedState=r.state,i&&Im(e,n,!0),e.child}function pv(t){var e=t.stateNode;e.pendingContext?Tm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Tm(t,e.context,!1),uf(t,e.containerInfo)}function Um(t,e,n,r,i){return Ls(),nf(i),e.flags|=256,qt(t,e,n,r),e.child}var Yd={dehydrated:null,treeContext:null,retryLane:0};function Xd(t){return{baseLanes:t,cachePool:null,transitions:null}}function mv(t,e,n){var r=e.pendingProps,i=qe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),De(qe,i&1),t===null)return Bd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Yu(o,r,0,null),t=Ni(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Xd(n),e.memoizedState=Yd,t):yf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return pE(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ni(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ni(l,s):(s=Ni(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Xd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Yd,r}return s=t.child,t=s.sibling,r=ni(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function yf(t,e){return e=Yu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xl(t,e,n,r){return r!==null&&nf(r),js(e,t.child,null,n),t=yf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pE(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Qc(Error(q(422))),xl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Yu({mode:"visible",children:r.children},i,0,null),s=Ni(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&js(e,t.child,null,o),e.child.memoizedState=Xd(o),e.memoizedState=Yd,s);if(!(e.mode&1))return xl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(q(419)),r=Qc(s,r,void 0),xl(t,e,o,r)}if(l=(o&t.childLanes)!==0,en||l){if(r=pt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,_r(t,i),Vn(r,t,i,-1))}return Tf(),r=Qc(Error(q(421))),xl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=AE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,hn=Jr(i.nextSibling),fn=e,$e=!0,Mn=null,t!==null&&(En[Tn++]=cr,En[Tn++]=dr,En[Tn++]=Vi,cr=t.id,dr=t.overflow,Vi=e),e=yf(e,r.children),e.flags|=4096,e)}function zm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wd(t.return,e,n)}function Yc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function gv(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(qt(t,e,r.children,n),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zm(t,n,e);else if(t.tag===19)zm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De(qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&pu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Yc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&pu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Yc(e,!0,n,null,s);break;case"together":Yc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=ni(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ni(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mE(t,e,n){switch(e.tag){case 3:pv(e),Ls();break;case 5:$0(e);break;case 1:nn(e.type)&&lu(e);break;case 4:uf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;De(du,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?mv(t,e,n):(De(qe,qe.current&1),t=wr(t,e,n),t!==null?t.sibling:null);De(qe,qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return gv(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),De(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,hv(t,e,n)}return wr(t,e,n)}var yv,Jd,vv,_v;yv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jd=function(){};vv=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,bi(Kn.current);var s=null;switch(n){case"input":i=wd(t,i),r=wd(t,r),s=[];break;case"select":i=Ge({},i,{value:void 0}),r=Ge({},r,{value:void 0}),s=[];break;case"textarea":i=Td(t,i),r=Td(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ou)}kd(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Xo.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Xo.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ve("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};_v=function(t,e,n,r){n!==r&&(e.flags|=4)};function ko(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gE(t,e,n){var r=e.pendingProps;switch(tf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return nn(e.type)&&au(),Lt(e),null;case 3:return r=e.stateNode,Vs(),Fe(tn),Fe(zt),df(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_l(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mn!==null&&(oh(Mn),Mn=null))),Jd(t,e),Lt(e),null;case 5:cf(e);var i=bi(ua.current);if(n=e.type,t!==null&&e.stateNode!=null)vv(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return Lt(e),null}if(t=bi(Kn.current),_l(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[qn]=e,r[aa]=s,t=(e.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(i=0;i<Po.length;i++)Ve(Po[i],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":Yp(r,s),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ve("invalid",r);break;case"textarea":Jp(r,s),Ve("invalid",r)}kd(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&vl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&vl(r.textContent,l,t),i=["children",""+l]):Xo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ve("scroll",r)}switch(n){case"input":cl(r),Xp(r,s,!0);break;case"textarea":cl(r),Zp(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ou)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Gy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[qn]=e,t[aa]=r,yv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sd(n,r),n){case"dialog":Ve("cancel",t),Ve("close",t),i=r;break;case"iframe":case"object":case"embed":Ve("load",t),i=r;break;case"video":case"audio":for(i=0;i<Po.length;i++)Ve(Po[i],t);i=r;break;case"source":Ve("error",t),i=r;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),i=r;break;case"details":Ve("toggle",t),i=r;break;case"input":Yp(t,r),i=wd(t,r),Ve("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ge({},r,{value:void 0}),Ve("invalid",t);break;case"textarea":Jp(t,r),i=Td(t,r),Ve("invalid",t);break;default:i=r}kd(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Yy(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ky(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Jo(t,u):typeof u=="number"&&Jo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ve("scroll",t):u!=null&&Uh(t,s,u,o))}switch(n){case"input":cl(t),Xp(t,r,!1);break;case"textarea":cl(t),Zp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+li(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ts(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ts(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ou)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)_v(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=bi(ua.current),bi(Kn.current),_l(e)){if(r=e.stateNode,n=e.memoizedProps,r[qn]=e,(s=r.nodeValue!==n)&&(t=fn,t!==null))switch(t.tag){case 3:vl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qn]=e,e.stateNode=r}return Lt(e),null;case 13:if(Fe(qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&hn!==null&&e.mode&1&&!(e.flags&128))V0(),Ls(),e.flags|=98560,s=!1;else if(s=_l(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[qn]=e}else Ls(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),s=!1}else Mn!==null&&(oh(Mn),Mn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?lt===0&&(lt=3):Tf())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return Vs(),Jd(t,e),t===null&&sa(e.stateNode.containerInfo),Lt(e),null;case 10:return of(e.type._context),Lt(e),null;case 17:return nn(e.type)&&au(),Lt(e),null;case 19:if(Fe(qe),s=e.memoizedState,s===null)return Lt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ko(s,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pu(t),o!==null){for(e.flags|=128,ko(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(qe,qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&tt()>Fs&&(e.flags|=128,r=!0,ko(s,!1),e.lanes=4194304)}else{if(!r)if(t=pu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ko(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!$e)return Lt(e),null}else 2*tt()-s.renderingStartTime>Fs&&n!==1073741824&&(e.flags|=128,r=!0,ko(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=tt(),e.sibling=null,n=qe.current,De(qe,r?n&1|2:n&1),e):(Lt(e),null);case 22:case 23:return Ef(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dn&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function yE(t,e){switch(tf(e),e.tag){case 1:return nn(e.type)&&au(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vs(),Fe(tn),Fe(zt),df(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cf(e),null;case 13:if(Fe(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Ls()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(qe),null;case 4:return Vs(),null;case 10:return of(e.type._context),null;case 22:case 23:return Ef(),null;case 24:return null;default:return null}}var El=!1,Ft=!1,vE=typeof WeakSet=="function"?WeakSet:Set,X=null;function ws(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(t,e,r)}else n.current=null}function Zd(t,e,n){try{n()}catch(r){Ye(t,e,r)}}var $m=!1;function _E(t,e){if(jd=ru,t=I0(),Zh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,p=0,m=t,v=null;t:for(;;){for(var C;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(C=m.firstChild)!==null;)v=m,m=C;for(;;){if(m===t)break t;if(v===n&&++h===i&&(l=o),v===s&&++p===r&&(u=o),(C=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=C}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vd={focusedElem:t,selectionRange:n},ru=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var M=P.memoizedProps,V=P.memoizedState,A=e.stateNode,T=A.getSnapshotBeforeUpdate(e.elementType===e.type?M:Nn(e.type,M),V);A.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(D){Ye(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return P=$m,$m=!1,P}function Bo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Zd(e,n,s)}i=i.next}while(i!==r)}}function Ku(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function eh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function wv(t){var e=t.alternate;e!==null&&(t.alternate=null,wv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qn],delete e[aa],delete e[Ud],delete e[tE],delete e[nE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xv(t){return t.tag===5||t.tag===3||t.tag===4}function Bm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function th(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ou));else if(r!==4&&(t=t.child,t!==null))for(th(t,e,n),t=t.sibling;t!==null;)th(t,e,n),t=t.sibling}function nh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(nh(t,e,n),t=t.sibling;t!==null;)nh(t,e,n),t=t.sibling}var _t=null,Dn=!1;function jr(t,e,n){for(n=n.child;n!==null;)Ev(t,e,n),n=n.sibling}function Ev(t,e,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(Uu,n)}catch{}switch(n.tag){case 5:Ft||ws(n,e);case 6:var r=_t,i=Dn;_t=null,jr(t,e,n),_t=r,Dn=i,_t!==null&&(Dn?(t=_t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_t.removeChild(n.stateNode));break;case 18:_t!==null&&(Dn?(t=_t,n=n.stateNode,t.nodeType===8?Bc(t.parentNode,n):t.nodeType===1&&Bc(t,n),na(t)):Bc(_t,n.stateNode));break;case 4:r=_t,i=Dn,_t=n.stateNode.containerInfo,Dn=!0,jr(t,e,n),_t=r,Dn=i;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Zd(n,e,o),i=i.next}while(i!==r)}jr(t,e,n);break;case 1:if(!Ft&&(ws(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ye(n,e,l)}jr(t,e,n);break;case 21:jr(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,jr(t,e,n),Ft=r):jr(t,e,n);break;default:jr(t,e,n)}}function Wm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vE),e.forEach(function(r){var i=CE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:_t=l.stateNode,Dn=!1;break e;case 3:_t=l.stateNode.containerInfo,Dn=!0;break e;case 4:_t=l.stateNode.containerInfo,Dn=!0;break e}l=l.return}if(_t===null)throw Error(q(160));Ev(s,o,i),_t=null,Dn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Ye(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Tv(e,t),e=e.sibling}function Tv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rn(e,t),Bn(t),r&4){try{Bo(3,t,t.return),Ku(3,t)}catch(M){Ye(t,t.return,M)}try{Bo(5,t,t.return)}catch(M){Ye(t,t.return,M)}}break;case 1:Rn(e,t),Bn(t),r&512&&n!==null&&ws(n,n.return);break;case 5:if(Rn(e,t),Bn(t),r&512&&n!==null&&ws(n,n.return),t.flags&32){var i=t.stateNode;try{Jo(i,"")}catch(M){Ye(t,t.return,M)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&qy(i,s),Sd(l,o);var h=Sd(l,s);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?Yy(i,m):p==="dangerouslySetInnerHTML"?Ky(i,m):p==="children"?Jo(i,m):Uh(i,p,m,h)}switch(l){case"input":xd(i,s);break;case"textarea":Hy(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var C=s.value;C!=null?Ts(i,!!s.multiple,C,!1):v!==!!s.multiple&&(s.defaultValue!=null?Ts(i,!!s.multiple,s.defaultValue,!0):Ts(i,!!s.multiple,s.multiple?[]:"",!1))}i[aa]=s}catch(M){Ye(t,t.return,M)}}break;case 6:if(Rn(e,t),Bn(t),r&4){if(t.stateNode===null)throw Error(q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(M){Ye(t,t.return,M)}}break;case 3:if(Rn(e,t),Bn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{na(e.containerInfo)}catch(M){Ye(t,t.return,M)}break;case 4:Rn(e,t),Bn(t);break;case 13:Rn(e,t),Bn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(wf=tt())),r&4&&Wm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(h=Ft)||p,Rn(e,t),Ft=h):Rn(e,t),Bn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(X=t,p=t.child;p!==null;){for(m=X=p;X!==null;){switch(v=X,C=v.child,v.tag){case 0:case 11:case 14:case 15:Bo(4,v,v.return);break;case 1:ws(v,v.return);var P=v.stateNode;if(typeof P.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(M){Ye(r,n,M)}}break;case 5:ws(v,v.return);break;case 22:if(v.memoizedState!==null){Hm(m);continue}}C!==null?(C.return=v,X=C):Hm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Qy("display",o))}catch(M){Ye(t,t.return,M)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(M){Ye(t,t.return,M)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Rn(e,t),Bn(t),r&4&&Wm(t);break;case 21:break;default:Rn(e,t),Bn(t)}}function Bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xv(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Jo(i,""),r.flags&=-33);var s=Bm(t);nh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Bm(t);th(t,l,o);break;default:throw Error(q(161))}}catch(u){Ye(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wE(t,e,n){X=t,Iv(t)}function Iv(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||El;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Ft;l=El;var h=Ft;if(El=o,(Ft=u)&&!h)for(X=i;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?Gm(i):u!==null?(u.return=o,X=u):Gm(i);for(;s!==null;)X=s,Iv(s),s=s.sibling;X=i,El=l,Ft=h}qm(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):qm(t)}}function qm(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||Ku(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Nn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&bm(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&na(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Ft||e.flags&512&&eh(e)}catch(v){Ye(e,e.return,v)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Hm(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function Gm(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ku(4,e)}catch(u){Ye(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ye(e,i,u)}}var s=e.return;try{eh(e)}catch(u){Ye(e,s,u)}break;case 5:var o=e.return;try{eh(e)}catch(u){Ye(e,o,u)}}}catch(u){Ye(e,e.return,u)}if(e===t){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var xE=Math.ceil,yu=Ar.ReactCurrentDispatcher,vf=Ar.ReactCurrentOwner,Sn=Ar.ReactCurrentBatchConfig,Te=0,pt=null,it=null,Et=0,dn=0,xs=pi(0),lt=0,fa=null,Fi=0,Qu=0,_f=0,Wo=null,Zt=null,wf=0,Fs=1/0,ar=null,vu=!1,rh=null,ei=null,Tl=!1,Gr=null,_u=0,qo=0,ih=null,Ul=-1,zl=0;function Ht(){return Te&6?tt():Ul!==-1?Ul:Ul=tt()}function ti(t){return t.mode&1?Te&2&&Et!==0?Et&-Et:iE.transition!==null?(zl===0&&(zl=l0()),zl):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:m0(t.type)),t):1}function Vn(t,e,n,r){if(50<qo)throw qo=0,ih=null,Error(q(185));Sa(t,n,r),(!(Te&2)||t!==pt)&&(t===pt&&(!(Te&2)&&(Qu|=n),lt===4&&zr(t,Et)),rn(t,r),n===1&&Te===0&&!(e.mode&1)&&(Fs=tt()+500,qu&&mi()))}function rn(t,e){var n=t.callbackNode;ix(t,e);var r=nu(t,t===pt?Et:0);if(r===0)n!==null&&nm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&nm(n),e===1)t.tag===0?rE(Km.bind(null,t)):M0(Km.bind(null,t)),Zx(function(){!(Te&6)&&mi()}),n=null;else{switch(u0(r)){case 1:n=qh;break;case 4:n=o0;break;case 16:n=tu;break;case 536870912:n=a0;break;default:n=tu}n=Nv(n,kv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kv(t,e){if(Ul=-1,zl=0,Te&6)throw Error(q(327));var n=t.callbackNode;if(Cs()&&t.callbackNode!==n)return null;var r=nu(t,t===pt?Et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=wu(t,r);else{e=r;var i=Te;Te|=2;var s=Av();(pt!==t||Et!==e)&&(ar=null,Fs=tt()+500,Pi(t,e));do try{IE();break}catch(l){Sv(t,l)}while(!0);sf(),yu.current=s,Te=i,it!==null?e=0:(pt=null,Et=0,e=lt)}if(e!==0){if(e===2&&(i=Pd(t),i!==0&&(r=i,e=sh(t,i))),e===1)throw n=fa,Pi(t,0),zr(t,r),rn(t,tt()),n;if(e===6)zr(t,r);else{if(i=t.current.alternate,!(r&30)&&!EE(i)&&(e=wu(t,r),e===2&&(s=Pd(t),s!==0&&(r=s,e=sh(t,s))),e===1))throw n=fa,Pi(t,0),zr(t,r),rn(t,tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:ki(t,Zt,ar);break;case 3:if(zr(t,r),(r&130023424)===r&&(e=wf+500-tt(),10<e)){if(nu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ht(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Fd(ki.bind(null,t,Zt,ar),e);break}ki(t,Zt,ar);break;case 4:if(zr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-jn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xE(r/1960))-r,10<r){t.timeoutHandle=Fd(ki.bind(null,t,Zt,ar),r);break}ki(t,Zt,ar);break;case 5:ki(t,Zt,ar);break;default:throw Error(q(329))}}}return rn(t,tt()),t.callbackNode===n?kv.bind(null,t):null}function sh(t,e){var n=Wo;return t.current.memoizedState.isDehydrated&&(Pi(t,e).flags|=256),t=wu(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&oh(e)),t}function oh(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function EE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!On(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zr(t,e){for(e&=~_f,e&=~Qu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jn(e),r=1<<n;t[n]=-1,e&=~r}}function Km(t){if(Te&6)throw Error(q(327));Cs();var e=nu(t,0);if(!(e&1))return rn(t,tt()),null;var n=wu(t,e);if(t.tag!==0&&n===2){var r=Pd(t);r!==0&&(e=r,n=sh(t,r))}if(n===1)throw n=fa,Pi(t,0),zr(t,e),rn(t,tt()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ki(t,Zt,ar),rn(t,tt()),null}function xf(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(Fs=tt()+500,qu&&mi())}}function Ui(t){Gr!==null&&Gr.tag===0&&!(Te&6)&&Cs();var e=Te;Te|=1;var n=Sn.transition,r=Ce;try{if(Sn.transition=null,Ce=1,t)return t()}finally{Ce=r,Sn.transition=n,Te=e,!(Te&6)&&mi()}}function Ef(){dn=xs.current,Fe(xs)}function Pi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Jx(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(tf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&au();break;case 3:Vs(),Fe(tn),Fe(zt),df();break;case 5:cf(r);break;case 4:Vs();break;case 13:Fe(qe);break;case 19:Fe(qe);break;case 10:of(r.type._context);break;case 22:case 23:Ef()}n=n.return}if(pt=t,it=t=ni(t.current,null),Et=dn=e,lt=0,fa=null,_f=Qu=Fi=0,Zt=Wo=null,Ci!==null){for(e=0;e<Ci.length;e++)if(n=Ci[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ci=null}return t}function Sv(t,e){do{var n=it;try{if(sf(),Vl.current=gu,mu){for(var r=He.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}mu=!1}if(Oi=0,ht=at=He=null,$o=!1,ca=0,vf.current=null,n===null||n.return===null){lt=1,fa=e,it=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=Et,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var C=Lm(o);if(C!==null){C.flags&=-257,jm(C,o,l,s,e),C.mode&1&&Mm(s,h,e),e=C,u=h;var P=e.updateQueue;if(P===null){var M=new Set;M.add(u),e.updateQueue=M}else P.add(u);break e}else{if(!(e&1)){Mm(s,h,e),Tf();break e}u=Error(q(426))}}else if($e&&l.mode&1){var V=Lm(o);if(V!==null){!(V.flags&65536)&&(V.flags|=256),jm(V,o,l,s,e),nf(Os(u,l));break e}}s=u=Os(u,l),lt!==4&&(lt=2),Wo===null?Wo=[s]:Wo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var A=uv(s,u,e);Cm(s,A);break e;case 1:l=u;var T=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ei===null||!ei.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=cv(s,l,e);Cm(s,D);break e}}s=s.return}while(s!==null)}bv(n)}catch(F){e=F,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function Av(){var t=yu.current;return yu.current=gu,t===null?gu:t}function Tf(){(lt===0||lt===3||lt===2)&&(lt=4),pt===null||!(Fi&268435455)&&!(Qu&268435455)||zr(pt,Et)}function wu(t,e){var n=Te;Te|=2;var r=Av();(pt!==t||Et!==e)&&(ar=null,Pi(t,e));do try{TE();break}catch(i){Sv(t,i)}while(!0);if(sf(),Te=n,yu.current=r,it!==null)throw Error(q(261));return pt=null,Et=0,lt}function TE(){for(;it!==null;)Cv(it)}function IE(){for(;it!==null&&!Q1();)Cv(it)}function Cv(t){var e=Pv(t.alternate,t,dn);t.memoizedProps=t.pendingProps,e===null?bv(t):it=e,vf.current=null}function bv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yE(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,it=null;return}}else if(n=gE(n,e,dn),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);lt===0&&(lt=5)}function ki(t,e,n){var r=Ce,i=Sn.transition;try{Sn.transition=null,Ce=1,kE(t,e,n,r)}finally{Sn.transition=i,Ce=r}return null}function kE(t,e,n,r){do Cs();while(Gr!==null);if(Te&6)throw Error(q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(sx(t,s),t===pt&&(it=pt=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tl||(Tl=!0,Nv(tu,function(){return Cs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Sn.transition,Sn.transition=null;var o=Ce;Ce=1;var l=Te;Te|=4,vf.current=null,_E(t,n),Tv(n,t),qx(Vd),ru=!!jd,Vd=jd=null,t.current=n,wE(n),Y1(),Te=l,Ce=o,Sn.transition=s}else t.current=n;if(Tl&&(Tl=!1,Gr=t,_u=i),s=t.pendingLanes,s===0&&(ei=null),Z1(n.stateNode),rn(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(vu)throw vu=!1,t=rh,rh=null,t;return _u&1&&t.tag!==0&&Cs(),s=t.pendingLanes,s&1?t===ih?qo++:(qo=0,ih=t):qo=0,mi(),null}function Cs(){if(Gr!==null){var t=u0(_u),e=Sn.transition,n=Ce;try{if(Sn.transition=null,Ce=16>t?16:t,Gr===null)var r=!1;else{if(t=Gr,Gr=null,_u=0,Te&6)throw Error(q(331));var i=Te;for(Te|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(X=h;X!==null;){var p=X;switch(p.tag){case 0:case 11:case 15:Bo(8,p,s)}var m=p.child;if(m!==null)m.return=p,X=m;else for(;X!==null;){p=X;var v=p.sibling,C=p.return;if(wv(p),p===h){X=null;break}if(v!==null){v.return=C,X=v;break}X=C}}}var P=s.alternate;if(P!==null){var M=P.child;if(M!==null){P.child=null;do{var V=M.sibling;M.sibling=null,M=V}while(M!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bo(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,X=A;break e}X=s.return}}var T=t.current;for(X=T;X!==null;){o=X;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,X=x;else e:for(o=T;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ku(9,l)}}catch(F){Ye(l,l.return,F)}if(l===o){X=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,X=D;break e}X=l.return}}if(Te=i,mi(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(Uu,t)}catch{}r=!0}return r}finally{Ce=n,Sn.transition=e}}return!1}function Qm(t,e,n){e=Os(n,e),e=uv(t,e,1),t=Zr(t,e,1),e=Ht(),t!==null&&(Sa(t,1,e),rn(t,e))}function Ye(t,e,n){if(t.tag===3)Qm(t,t,n);else for(;e!==null;){if(e.tag===3){Qm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ei===null||!ei.has(r))){t=Os(n,t),t=cv(e,t,1),e=Zr(e,t,1),t=Ht(),e!==null&&(Sa(e,1,t),rn(e,t));break}}e=e.return}}function SE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ht(),t.pingedLanes|=t.suspendedLanes&n,pt===t&&(Et&n)===n&&(lt===4||lt===3&&(Et&130023424)===Et&&500>tt()-wf?Pi(t,0):_f|=n),rn(t,e)}function Rv(t,e){e===0&&(t.mode&1?(e=fl,fl<<=1,!(fl&130023424)&&(fl=4194304)):e=1);var n=Ht();t=_r(t,e),t!==null&&(Sa(t,e,n),rn(t,n))}function AE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Rv(t,n)}function CE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),Rv(t,n)}var Pv;Pv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tn.current)en=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return en=!1,mE(t,e,n);en=!!(t.flags&131072)}else en=!1,$e&&e.flags&1048576&&L0(e,cu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fl(t,e),t=e.pendingProps;var i=Ms(e,zt.current);As(e,n),i=ff(null,e,r,t,i,n);var s=pf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nn(r)?(s=!0,lu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,lf(e),i.updater=Gu,e.stateNode=i,i._reactInternals=e,Hd(e,r,t,n),e=Qd(null,e,r,!0,s,n)):(e.tag=0,$e&&s&&ef(e),qt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=RE(r),t=Nn(r,t),i){case 0:e=Kd(null,e,r,t,n);break e;case 1:e=Fm(null,e,r,t,n);break e;case 11:e=Vm(null,e,r,t,n);break e;case 14:e=Om(null,e,r,Nn(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nn(r,i),Kd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nn(r,i),Fm(t,e,r,i,n);case 3:e:{if(pv(e),t===null)throw Error(q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,z0(t,e),fu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Os(Error(q(423)),e),e=Um(t,e,r,n,i);break e}else if(r!==i){i=Os(Error(q(424)),e),e=Um(t,e,r,n,i);break e}else for(hn=Jr(e.stateNode.containerInfo.firstChild),fn=e,$e=!0,Mn=null,n=F0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ls(),r===i){e=wr(t,e,n);break e}qt(t,e,r,n)}e=e.child}return e;case 5:return $0(e),t===null&&Bd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Od(r,i)?o=null:s!==null&&Od(r,s)&&(e.flags|=32),fv(t,e),qt(t,e,o,n),e.child;case 6:return t===null&&Bd(e),null;case 13:return mv(t,e,n);case 4:return uf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=js(e,null,r,n):qt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nn(r,i),Vm(t,e,r,i,n);case 7:return qt(t,e,e.pendingProps,n),e.child;case 8:return qt(t,e,e.pendingProps.children,n),e.child;case 12:return qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,De(du,r._currentValue),r._currentValue=o,s!==null)if(On(s.value,o)){if(s.children===i.children&&!tn.current){e=wr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=mr(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Wd(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Wd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}qt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,As(e,n),i=An(i),r=r(i),e.flags|=1,qt(t,e,r,n),e.child;case 14:return r=e.type,i=Nn(r,e.pendingProps),i=Nn(r.type,i),Om(t,e,r,i,n);case 15:return dv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nn(r,i),Fl(t,e),e.tag=1,nn(r)?(t=!0,lu(e)):t=!1,As(e,n),lv(e,r,i),Hd(e,r,i,n),Qd(null,e,r,!0,t,n);case 19:return gv(t,e,n);case 22:return hv(t,e,n)}throw Error(q(156,e.tag))};function Nv(t,e){return s0(t,e)}function bE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,e,n,r){return new bE(t,e,n,r)}function If(t){return t=t.prototype,!(!t||!t.isReactComponent)}function RE(t){if(typeof t=="function")return If(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$h)return 11;if(t===Bh)return 14}return 2}function ni(t,e){var n=t.alternate;return n===null?(n=kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $l(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")If(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ds:return Ni(n.children,i,s,e);case zh:o=8,i|=8;break;case gd:return t=kn(12,n,e,i|2),t.elementType=gd,t.lanes=s,t;case yd:return t=kn(13,n,e,i),t.elementType=yd,t.lanes=s,t;case vd:return t=kn(19,n,e,i),t.elementType=vd,t.lanes=s,t;case $y:return Yu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Uy:o=10;break e;case zy:o=9;break e;case $h:o=11;break e;case Bh:o=14;break e;case Or:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=kn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ni(t,e,n,r){return t=kn(7,t,r,e),t.lanes=n,t}function Yu(t,e,n,r){return t=kn(22,t,r,e),t.elementType=$y,t.lanes=n,t.stateNode={isHidden:!1},t}function Xc(t,e,n){return t=kn(6,t,null,e),t.lanes=n,t}function Jc(t,e,n){return e=kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nc(0),this.expirationTimes=Nc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function kf(t,e,n,r,i,s,o,l,u){return t=new PE(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=kn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lf(s),t}function NE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Dv(t){if(!t)return ui;t=t._reactInternals;e:{if(Gi(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(nn(n))return D0(t,n,e)}return e}function Mv(t,e,n,r,i,s,o,l,u){return t=kf(n,r,!0,t,i,s,o,l,u),t.context=Dv(null),n=t.current,r=Ht(),i=ti(n),s=mr(r,i),s.callback=e??null,Zr(n,s,i),t.current.lanes=i,Sa(t,i,r),rn(t,r),t}function Xu(t,e,n,r){var i=e.current,s=Ht(),o=ti(i);return n=Dv(n),e.context===null?e.context=n:e.pendingContext=n,e=mr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zr(i,e,o),t!==null&&(Vn(t,i,o,s),jl(t,i,o)),o}function xu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ym(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Sf(t,e){Ym(t,e),(t=t.alternate)&&Ym(t,e)}function DE(){return null}var Lv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Af(t){this._internalRoot=t}Ju.prototype.render=Af.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));Xu(t,e,null,null)};Ju.prototype.unmount=Af.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ui(function(){Xu(null,t,null,null)}),e[vr]=null}};function Ju(t){this._internalRoot=t}Ju.prototype.unstable_scheduleHydration=function(t){if(t){var e=h0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ur.length&&e!==0&&e<Ur[n].priority;n++);Ur.splice(n,0,t),n===0&&p0(t)}};function Cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xm(){}function ME(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=xu(o);s.call(h)}}var o=Mv(e,r,t,0,null,!1,!1,"",Xm);return t._reactRootContainer=o,t[vr]=o.current,sa(t.nodeType===8?t.parentNode:t),Ui(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=xu(u);l.call(h)}}var u=kf(t,0,!1,null,null,!1,!1,"",Xm);return t._reactRootContainer=u,t[vr]=u.current,sa(t.nodeType===8?t.parentNode:t),Ui(function(){Xu(e,u,n,r)}),u}function ec(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=xu(o);l.call(u)}}Xu(e,o,t,i)}else o=ME(n,e,t,i,r);return xu(o)}c0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ro(e.pendingLanes);n!==0&&(Hh(e,n|1),rn(e,tt()),!(Te&6)&&(Fs=tt()+500,mi()))}break;case 13:Ui(function(){var r=_r(t,1);if(r!==null){var i=Ht();Vn(r,t,1,i)}}),Sf(t,1)}};Gh=function(t){if(t.tag===13){var e=_r(t,134217728);if(e!==null){var n=Ht();Vn(e,t,134217728,n)}Sf(t,134217728)}};d0=function(t){if(t.tag===13){var e=ti(t),n=_r(t,e);if(n!==null){var r=Ht();Vn(n,t,e,r)}Sf(t,e)}};h0=function(){return Ce};f0=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};Cd=function(t,e,n){switch(e){case"input":if(xd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Wu(r);if(!i)throw Error(q(90));Wy(r),xd(r,i)}}}break;case"textarea":Hy(t,n);break;case"select":e=n.value,e!=null&&Ts(t,!!n.multiple,e,!1)}};Zy=xf;e0=Ui;var LE={usingClientEntryPoint:!1,Events:[Ca,ms,Wu,Xy,Jy,xf]},So={findFiberByHostInstance:Ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jE={bundleType:So.bundleType,version:So.version,rendererPackageName:So.rendererPackageName,rendererConfig:So.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=r0(t),t===null?null:t.stateNode},findFiberByHostInstance:So.findFiberByHostInstance||DE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Il.isDisabled&&Il.supportsFiber)try{Uu=Il.inject(jE),Gn=Il}catch{}}mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LE;mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cf(e))throw Error(q(200));return NE(t,e,null,n)};mn.createRoot=function(t,e){if(!Cf(t))throw Error(q(299));var n=!1,r="",i=Lv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=kf(t,1,!1,null,null,n,!1,r,i),t[vr]=e.current,sa(t.nodeType===8?t.parentNode:t),new Af(e)};mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=r0(e),t=t===null?null:t.stateNode,t};mn.flushSync=function(t){return Ui(t)};mn.hydrate=function(t,e,n){if(!Zu(e))throw Error(q(200));return ec(null,t,e,!0,n)};mn.hydrateRoot=function(t,e,n){if(!Cf(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Lv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Mv(e,null,t,1,n??null,i,!1,s,o),t[vr]=e.current,sa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ju(e)};mn.render=function(t,e,n){if(!Zu(e))throw Error(q(200));return ec(null,t,e,!1,n)};mn.unmountComponentAtNode=function(t){if(!Zu(t))throw Error(q(40));return t._reactRootContainer?(Ui(function(){ec(null,null,t,!1,function(){t._reactRootContainer=null,t[vr]=null})}),!0):!1};mn.unstable_batchedUpdates=xf;mn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zu(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return ec(t,e,n,!1,r)};mn.version="18.3.1-next-f1338f8080-20240426";function jv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jv)}catch(t){console.error(t)}}jv(),jy.exports=mn;var VE=jy.exports,Jm=VE;pd.createRoot=Jm.createRoot,pd.hydrateRoot=Jm.hydrateRoot;/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ue=(t,e)=>{const n=Q.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:u,...h},p)=>Q.createElement("svg",{ref:p,...OE,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${FE(t)}`,l].join(" "),...h},[...e.map(([m,v])=>Q.createElement(m,v)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=ue("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=ue("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=ue("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=ue("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=ue("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=ue("CircleDashed",[["path",{d:"M10.1 2.18a9.93 9.93 0 0 1 3.8 0",key:"1qdqn0"}],["path",{d:"M17.6 3.71a9.95 9.95 0 0 1 2.69 2.7",key:"1bq7p6"}],["path",{d:"M21.82 10.1a9.93 9.93 0 0 1 0 3.8",key:"1rlaqf"}],["path",{d:"M20.29 17.6a9.95 9.95 0 0 1-2.7 2.69",key:"1xk03u"}],["path",{d:"M13.9 21.82a9.94 9.94 0 0 1-3.8 0",key:"l7re25"}],["path",{d:"M6.4 20.29a9.95 9.95 0 0 1-2.69-2.7",key:"1v18p6"}],["path",{d:"M2.18 13.9a9.93 9.93 0 0 1 0-3.8",key:"xdo6bj"}],["path",{d:"M3.71 6.4a9.95 9.95 0 0 1 2.7-2.69",key:"1jjmaz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=ue("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=ue("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=ue("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=ue("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=ue("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=ue("Grip",[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"19",cy:"5",r:"1",key:"w8mnmm"}],["circle",{cx:"5",cy:"5",r:"1",key:"lttvr7"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}],["circle",{cx:"19",cy:"19",r:"1",key:"shf9b7"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=ue("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=ue("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=ue("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=ue("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=ue("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=ue("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=ue("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=ue("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=ue("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=ue("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=ue("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=ue("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=ue("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=ue("Waypoints",[["circle",{cx:"12",cy:"4.5",r:"2.5",key:"r5ysbb"}],["path",{d:"m10.2 6.3-3.9 3.9",key:"1nzqf6"}],["circle",{cx:"4.5",cy:"12",r:"2.5",key:"jydg6v"}],["path",{d:"M7 12h10",key:"b7w52i"}],["circle",{cx:"19.5",cy:"12",r:"2.5",key:"1piiel"}],["path",{d:"m13.8 17.7 3.9-3.9",key:"1wyg1y"}],["circle",{cx:"12",cy:"19.5",r:"2.5",key:"13o1pw"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=ue("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=ue("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var ig={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},mT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Bv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=s>>2,m=(s&3)<<4|l>>4;let v=(l&15)<<2|h>>6,C=h&63;u||(C=64,o||(v=64)),r.push(n[p],n[m],n[v],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($v(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||m==null)throw new gT;const v=s<<2|l>>4;if(r.push(v),h!==64){const C=l<<4&240|h>>2;if(r.push(C),m!==64){const P=h<<6&192|m;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yT=function(t){const e=$v(t);return Bv.encodeByteArray(e,!0)},Tu=function(t){return yT(t).replace(/\./g,"")},Wv=function(t){try{return Bv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=()=>vT().__FIREBASE_DEFAULTS__,wT=()=>{if(typeof process>"u"||typeof ig>"u")return;const t=ig.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Wv(t[1]);return e&&JSON.parse(e)},nc=()=>{try{return _T()||wT()||xT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qv=t=>{var e,n;return(n=(e=nc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ET=t=>{const e=qv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Hv=()=>{var t;return(t=nc())===null||t===void 0?void 0:t.config},Gv=t=>{var e;return(e=nc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Tu(JSON.stringify(n)),Tu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function ST(){var t;const e=(t=nc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RT(){const t=$t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PT(){return!ST()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NT(){try{return typeof indexedDB=="object"}catch{return!1}}function DT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="FirebaseError";class Cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MT,Object.setPrototypeOf(this,Cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ra.prototype.create)}}class Ra{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?LT(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Cr(i,l,r)}}function LT(t,e){return t.replace(jT,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const jT=/\{\$([^}]+)}/g;function VT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Iu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(sg(s)&&sg(o)){if(!Iu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function sg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function OT(t,e){const n=new FT(t,e);return n.subscribe.bind(n)}class FT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");UT(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Zc),i.error===void 0&&(i.error=Zc),i.complete===void 0&&(i.complete=Zc);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Zc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t){return t&&t._delegate?t._delegate:t}class zi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new TT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BT(e))try{this.getOrInitializeService({instanceIdentifier:Si})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Si){return this.instances.has(e)}getOptions(e=Si){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$T(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Si){return this.component?this.component.multipleInstances?e:Si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $T(t){return t===Si?void 0:t}function BT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const qT={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},HT=_e.INFO,GT={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},KT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=GT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bf{constructor(e){this.name=e,this._logLevel=HT,this._logHandler=KT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const QT=(t,e)=>e.some(n=>t instanceof n);let og,ag;function YT(){return og||(og=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XT(){return ag||(ag=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kv=new WeakMap,ch=new WeakMap,Qv=new WeakMap,ed=new WeakMap,Rf=new WeakMap;function JT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ri(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Kv.set(n,t)}).catch(()=>{}),Rf.set(e,t),e}function ZT(t){if(ch.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ch.set(t,e)}let dh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ch.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ri(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eI(t){dh=t(dh)}function tI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(td(this),e,...n);return Qv.set(r,e.sort?e.sort():[e]),ri(r)}:XT().includes(t)?function(...e){return t.apply(td(this),e),ri(Kv.get(this))}:function(...e){return ri(t.apply(td(this),e))}}function nI(t){return typeof t=="function"?tI(t):(t instanceof IDBTransaction&&ZT(t),QT(t,YT())?new Proxy(t,dh):t)}function ri(t){if(t instanceof IDBRequest)return JT(t);if(ed.has(t))return ed.get(t);const e=nI(t);return e!==t&&(ed.set(t,e),Rf.set(e,t)),e}const td=t=>Rf.get(t);function rI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=ri(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ri(o.result),u.oldVersion,u.newVersion,ri(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const iI=["get","getKey","getAll","getAllKeys","count"],sI=["put","add","delete","clear"],nd=new Map;function lg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nd.get(e))return nd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=sI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||iI.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return nd.set(e,s),s}eI(t=>({...t,get:(e,n,r)=>lg(e,n)||t.get(e,n,r),has:(e,n)=>!!lg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function aI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hh="@firebase/app",ug="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr=new bf("@firebase/app"),lI="@firebase/app-compat",uI="@firebase/analytics-compat",cI="@firebase/analytics",dI="@firebase/app-check-compat",hI="@firebase/app-check",fI="@firebase/auth",pI="@firebase/auth-compat",mI="@firebase/database",gI="@firebase/data-connect",yI="@firebase/database-compat",vI="@firebase/functions",_I="@firebase/functions-compat",wI="@firebase/installations",xI="@firebase/installations-compat",EI="@firebase/messaging",TI="@firebase/messaging-compat",II="@firebase/performance",kI="@firebase/performance-compat",SI="@firebase/remote-config",AI="@firebase/remote-config-compat",CI="@firebase/storage",bI="@firebase/storage-compat",RI="@firebase/firestore",PI="@firebase/vertexai-preview",NI="@firebase/firestore-compat",DI="firebase",MI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh="[DEFAULT]",LI={[hh]:"fire-core",[lI]:"fire-core-compat",[cI]:"fire-analytics",[uI]:"fire-analytics-compat",[hI]:"fire-app-check",[dI]:"fire-app-check-compat",[fI]:"fire-auth",[pI]:"fire-auth-compat",[mI]:"fire-rtdb",[gI]:"fire-data-connect",[yI]:"fire-rtdb-compat",[vI]:"fire-fn",[_I]:"fire-fn-compat",[wI]:"fire-iid",[xI]:"fire-iid-compat",[EI]:"fire-fcm",[TI]:"fire-fcm-compat",[II]:"fire-perf",[kI]:"fire-perf-compat",[SI]:"fire-rc",[AI]:"fire-rc-compat",[CI]:"fire-gcs",[bI]:"fire-gcs-compat",[RI]:"fire-fst",[NI]:"fire-fst-compat",[PI]:"fire-vertex","fire-js":"fire-js",[DI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new Map,jI=new Map,ph=new Map;function cg(t,e){try{t.container.addComponent(e)}catch(n){xr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zs(t){const e=t.name;if(ph.has(e))return xr.debug(`There were multiple attempts to register component ${e}.`),!1;ph.set(e,t);for(const n of pa.values())cg(n,t);for(const n of jI.values())cg(n,t);return!0}function Pf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ii=new Ra("app","Firebase",VI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=MI;function Yv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:fh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ii.create("bad-app-name",{appName:String(i)});if(n||(n=Hv()),!n)throw ii.create("no-options");const s=pa.get(i);if(s){if(Iu(n,s.options)&&Iu(r,s.config))return s;throw ii.create("duplicate-app",{appName:i})}const o=new WT(i);for(const u of ph.values())o.addComponent(u);const l=new OI(n,r,o);return pa.set(i,l),l}function Nf(t=fh){const e=pa.get(t);if(!e&&t===fh&&Hv())return Yv();if(!e)throw ii.create("no-app",{appName:t});return e}function FI(){return Array.from(pa.values())}function si(t,e,n){var r;let i=(r=LI[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xr.warn(l.join(" "));return}zs(new zi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="firebase-heartbeat-database",zI=1,ma="firebase-heartbeat-store";let rd=null;function Xv(){return rd||(rd=rI(UI,zI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ma)}catch(n){console.warn(n)}}}}).catch(t=>{throw ii.create("idb-open",{originalErrorMessage:t.message})})),rd}async function $I(t){try{const n=(await Xv()).transaction(ma),r=await n.objectStore(ma).get(Jv(t));return await n.done,r}catch(e){if(e instanceof Cr)xr.warn(e.message);else{const n=ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xr.warn(n.message)}}}async function dg(t,e){try{const r=(await Xv()).transaction(ma,"readwrite");await r.objectStore(ma).put(e,Jv(t)),await r.done}catch(n){if(n instanceof Cr)xr.warn(n.message);else{const r=ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xr.warn(r.message)}}}function Jv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=1024,WI=30*24*60*60*1e3;class qI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=WI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){xr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hg(),{heartbeatsToSend:r,unsentEntries:i}=HI(this._heartbeatsCache.heartbeats),s=Tu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return xr.warn(n),""}}}function hg(){return new Date().toISOString().substring(0,10)}function HI(t,e=BI){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),fg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),fg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NT()?DT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $I(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return dg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return dg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function fg(t){return Tu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(t){zs(new zi("platform-logger",e=>new oI(e),"PRIVATE")),zs(new zi("heartbeat",e=>new qI(e),"PRIVATE")),si(hh,ug,t),si(hh,ug,"esm2017"),si("fire-js","")}KI("");var QI="firebase",YI="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */si(QI,YI,"app");function Df(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Zv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XI=Zv,e_=new Ra("auth","Firebase",Zv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new bf("@firebase/auth");function JI(t,...e){ku.logLevel<=_e.WARN&&ku.warn(`Auth (${Zs}): ${t}`,...e)}function Bl(t,...e){ku.logLevel<=_e.ERROR&&ku.error(`Auth (${Zs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,...e){throw Mf(t,...e)}function Qn(t,...e){return Mf(t,...e)}function t_(t,e,n){const r=Object.assign(Object.assign({},XI()),{[e]:n});return new Ra("auth","Firebase",r).create(e,{appName:t.name})}function gr(t){return t_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return e_.create(t,...e)}function oe(t,e,...n){if(!t)throw Mf(e,...n)}function hr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bl(e),new Error(e)}function Tr(t,e){t||hr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ZI(){return pg()==="http:"||pg()==="https:"}function pg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZI()||CT()||"connection"in navigator)?navigator.onLine:!0}function tk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){this.shortDelay=e,this.longDelay=n,Tr(n>e,"Short delay should be less than long delay!"),this.isMobile=kT()||bT()}get(){return ek()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t,e){Tr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=new Na(3e4,6e4);function Da(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function eo(t,e,n,r,i={}){return r_(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Pa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},s);return AT()||(h.referrerPolicy="no-referrer"),n_.fetch()(i_(t,t.config.apiHost,n,l),h)})}async function r_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},nk),e);try{const i=new ik(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw kl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw kl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw kl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw kl(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw t_(t,p,h);Er(t,p)}}catch(i){if(i instanceof Cr)throw i;Er(t,"network-request-failed",{message:String(i)})}}async function jf(t,e,n,r,i={}){const s=await eo(t,e,n,r,i);return"mfaPendingCredential"in s&&Er(t,"multi-factor-auth-required",{_serverResponse:s}),s}function i_(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Lf(t.config,i):`${t.config.apiScheme}://${i}`}class ik{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qn(this.auth,"network-request-failed")),rk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Qn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sk(t,e){return eo(t,"POST","/v1/accounts:delete",e)}async function s_(t,e){return eo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ok(t,e=!1){const n=on(t),r=await n.getIdToken(e),i=Vf(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ho(id(i.auth_time)),issuedAtTime:Ho(id(i.iat)),expirationTime:Ho(id(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function id(t){return Number(t)*1e3}function Vf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bl("JWT malformed, contained fewer than 3 sections"),null;try{const i=Wv(n);return i?JSON.parse(i):(Bl("Failed to decode base64 JWT payload"),null)}catch(i){return Bl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function mg(t){const e=Vf(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ga(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Cr&&ak(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ak({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ho(this.lastLoginAt),this.creationTime=Ho(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Su(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ga(t,s_(n,{idToken:r}));oe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?o_(s.providerUserInfo):[],l=ck(t.providerData,o),u=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=u?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new gh(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function uk(t){const e=on(t);await Su(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ck(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function o_(t){return t.map(e=>{var{providerId:n}=e,r=Df(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(t,e){const n=await r_(t,{},async()=>{const r=Pa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=i_(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",n_.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hk(t,e){return eo(t,"POST","/v2/accounts:revokeToken",Da(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=mg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await dk(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new bs;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bs,this.toJSON())}_performRefresh(){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Df(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new gh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ga(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ok(this,e)}reload(){return uk(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Su(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(gr(this.auth));const e=await this.getIdToken();return await ga(this,sk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,u,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(i=n.email)!==null&&i!==void 0?i:void 0,C=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,P=(o=n.photoURL)!==null&&o!==void 0?o:void 0,M=(l=n.tenantId)!==null&&l!==void 0?l:void 0,V=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,A=(h=n.createdAt)!==null&&h!==void 0?h:void 0,T=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:x,emailVerified:D,isAnonymous:F,providerData:B,stsTokenManager:I}=n;oe(x&&I,e,"internal-error");const g=bs.fromJSON(this.name,I);oe(typeof x=="string",e,"internal-error"),Vr(m,e.name),Vr(v,e.name),oe(typeof D=="boolean",e,"internal-error"),oe(typeof F=="boolean",e,"internal-error"),Vr(C,e.name),Vr(P,e.name),Vr(M,e.name),Vr(V,e.name),Vr(A,e.name),Vr(T,e.name);const w=new fr({uid:x,auth:e,email:v,emailVerified:D,displayName:m,isAnonymous:F,photoURL:P,phoneNumber:C,tenantId:M,stsTokenManager:g,createdAt:A,lastLoginAt:T});return B&&Array.isArray(B)&&(w.providerData=B.map(E=>Object.assign({},E))),V&&(w._redirectEventId=V),w}static async _fromIdTokenResponse(e,n,r=!1){const i=new bs;i.updateFromServerResponse(n);const s=new fr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Su(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];oe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?o_(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new bs;l.updateFromIdToken(r);const u=new fr({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new gh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg=new Map;function pr(t){Tr(t instanceof Function,"Expected a class definition");let e=gg.get(t);return e?(Tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}a_.type="NONE";const yg=a_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(t,e,n){return`firebase:${t}:${e}:${n}`}class Rs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Wl(this.userKey,i.apiKey,s),this.fullPersistenceKey=Wl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?fr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Rs(pr(yg),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||pr(yg);const o=Wl(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){const m=fr._fromJSON(e,p);h!==s&&(l=m),s=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Rs(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new Rs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(l_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(f_(e))return"Blackberry";if(p_(e))return"Webos";if(u_(e))return"Safari";if((e.includes("chrome/")||c_(e))&&!e.includes("edge/"))return"Chrome";if(h_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function l_(t=$t()){return/firefox\//i.test(t)}function u_(t=$t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function c_(t=$t()){return/crios\//i.test(t)}function d_(t=$t()){return/iemobile/i.test(t)}function h_(t=$t()){return/android/i.test(t)}function f_(t=$t()){return/blackberry/i.test(t)}function p_(t=$t()){return/webos/i.test(t)}function Of(t=$t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fk(t=$t()){var e;return Of(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pk(){return RT()&&document.documentMode===10}function m_(t=$t()){return Of(t)||h_(t)||p_(t)||f_(t)||/windows phone/i.test(t)||d_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t,e=[]){let n;switch(t){case"Browser":n=vg($t());break;case"Worker":n=`${vg($t())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(t,e={}){return eo(t,"GET","/v2/passwordPolicy",Da(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=6;class vk{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:yk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _g(this),this.idTokenSubscription=new _g(this),this.beforeStateQueue=new mk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=e_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Rs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await s_(this,{idToken:e}),r=await fr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Su(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(gr(this));const n=e?on(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(gr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(gr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gk(this),n=new vk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ra("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pr(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Rs.create(this,[pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=g_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&JI(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ma(t){return on(t)}class _g{constructor(e){this.auth=e,this.observer=null,this.addObserver=OT(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wk(t){Ff=t}function xk(t){return Ff.loadJS(t)}function Ek(){return Ff.gapiScript}function Tk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t,e){const n=Pf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Iu(s,e??{}))return i;Er(i,"already-initialized")}return n.initialize({options:e})}function kk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(pr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Sk(t,e,n){const r=Ma(t);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=y_(e),{host:o,port:l}=Ak(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Ck()}function y_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ak(t){const e=y_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:wg(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:wg(o)}}}function wg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Ck(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ps(t,e){return jf(t,"POST","/v1/accounts:signInWithIdp",Da(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="http://localhost";class $i extends v_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Df(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new $i(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ps(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ps(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ps(e,n)}buildRequest(){const e={requestUri:bk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Pa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends __{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends La{constructor(){super("facebook.com")}static credential(e){return $i._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends La{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $i._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Br.credential(n,r)}catch{return null}}}Br.GOOGLE_SIGN_IN_METHOD="google.com";Br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends La{constructor(){super("github.com")}static credential(e){return $i._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.GITHUB_SIGN_IN_METHOD="github.com";Wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends La{constructor(){super("twitter.com")}static credential(e,n){return $i._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return qr.credential(n,r)}catch{return null}}}qr.TWITTER_SIGN_IN_METHOD="twitter.com";qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(t,e){return jf(t,"POST","/v1/accounts:signUp",Da(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await fr._fromIdTokenResponse(e,r,i),o=xg(r);return new Ir({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=xg(r);return new Ir({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function xg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(t){var e;if(Hn(t.app))return Promise.reject(gr(t));const n=Ma(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ir({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Rk(n,{returnSecureToken:!0}),i=await Ir._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends Cr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Au.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Au(e,n,r,i)}}function w_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Au._fromErrorAndOperation(t,s,e,r):s})}async function Nk(t,e,n=!1){const r=await ga(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ir._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(t,e,n=!1){const{auth:r}=t;if(Hn(r.app))return Promise.reject(gr(r));const i="reauthenticate";try{const s=await ga(t,w_(r,i,e,t),n);oe(s.idToken,r,"internal-error");const o=Vf(s.idToken);oe(o,r,"internal-error");const{sub:l}=o;return oe(t.uid===l,r,"user-mismatch"),Ir._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Er(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mk(t,e,n=!1){if(Hn(t.app))return Promise.reject(gr(t));const r="signIn",i=await w_(t,r,e),s=await Ir._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(t,e){return jf(t,"POST","/v1/accounts:signInWithCustomToken",Da(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jk(t,e){if(Hn(t.app))return Promise.reject(gr(t));const n=Ma(t),r=await Lk(n,{token:e,returnSecureToken:!0}),i=await Ir._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}function Vk(t,e,n,r){return on(t).onIdTokenChanged(e,n,r)}function Ok(t,e,n){return on(t).beforeAuthStateChanged(e,n)}function Fk(t,e,n,r){return on(t).onAuthStateChanged(e,n,r)}const Cu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cu,"1"),this.storage.removeItem(Cu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=1e3,zk=10;class E_ extends x_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=m_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);pk()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,zk):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Uk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}E_.type="LOCAL";const $k=E_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_ extends x_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}T_.type="SESSION";const I_=T_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new rc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async h=>h(n.origin,s)),u=await Bk(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const h=Uf("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const v=m;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(v.data.response);break;default:clearTimeout(p),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(){return window}function qk(t){Yn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(){return typeof Yn().WorkerGlobalScope<"u"&&typeof Yn().importScripts=="function"}async function Hk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Gk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Kk(){return k_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="firebaseLocalStorageDb",Qk=1,bu="firebaseLocalStorage",A_="fbase_key";class ja{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ic(t,e){return t.transaction([bu],e?"readwrite":"readonly").objectStore(bu)}function Yk(){const t=indexedDB.deleteDatabase(S_);return new ja(t).toPromise()}function yh(){const t=indexedDB.open(S_,Qk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(bu,{keyPath:A_})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(bu)?e(r):(r.close(),await Yk(),e(await yh()))})})}async function Eg(t,e,n){const r=ic(t,!0).put({[A_]:e,value:n});return new ja(r).toPromise()}async function Xk(t,e){const n=ic(t,!1).get(e),r=await new ja(n).toPromise();return r===void 0?null:r.value}function Tg(t,e){const n=ic(t,!0).delete(e);return new ja(n).toPromise()}const Jk=800,Zk=3;class C_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Zk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return k_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rc._getInstance(Kk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Hk(),!this.activeServiceWorker)return;this.sender=new Wk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Gk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yh();return await Eg(e,Cu,"1"),await Tg(e,Cu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Eg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Xk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Tg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ic(i,!1).getAll();return new ja(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Jk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}C_.type="LOCAL";const e2=C_;new Na(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t,e){return e?pr(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends v_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ps(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ps(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ps(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function n2(t){return Mk(t.auth,new zf(t),t.bypassAuthState)}function r2(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),Dk(n,new zf(t),t.bypassAuthState)}async function i2(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),Nk(n,new zf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return n2;case"linkViaPopup":case"linkViaRedirect":return i2;case"reauthViaPopup":case"reauthViaRedirect":return r2;default:Er(this.auth,"internal-error")}}resolve(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=new Na(2e3,1e4);class Es extends b_{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Es.currentPopupAction&&Es.currentPopupAction.cancel(),Es.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Tr(this.filter.length===1,"Popup operations only handle one event");const e=Uf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Es.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,s2.get())};e()}}Es.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="pendingRedirect",ql=new Map;class a2 extends b_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ql.get(this.auth._key());if(!e){try{const r=await l2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ql.set(this.auth._key(),e)}return this.bypassAuthState||ql.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function l2(t,e){const n=d2(e),r=c2(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function u2(t,e){ql.set(t._key(),e)}function c2(t){return pr(t._redirectPersistence)}function d2(t){return Wl(o2,t.config.apiKey,t.name)}async function h2(t,e,n=!1){if(Hn(t.app))return Promise.reject(gr(t));const r=Ma(t),i=t2(r,e),o=await new a2(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=10*60*1e3;class p2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!m2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!R_(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=f2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ig(e))}saveEventToCache(e){this.cachedEventUids.add(Ig(e)),this.lastProcessedEventTime=Date.now()}}function Ig(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function R_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function m2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return R_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g2(t,e={}){return eo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,v2=/^https?/;async function _2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await g2(t);for(const n of e)try{if(w2(n))return}catch{}Er(t,"unauthorized-domain")}function w2(t){const e=mh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!v2.test(n))return!1;if(y2.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new Na(3e4,6e4);function kg(){const t=Yn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function E2(t){return new Promise((e,n)=>{var r,i,s;function o(){kg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kg(),n(Qn(t,"network-request-failed"))},timeout:x2.get()})}if(!((i=(r=Yn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Yn().gapi)===null||s===void 0)&&s.load)o();else{const l=Tk("iframefcb");return Yn()[l]=()=>{gapi.load?o():n(Qn(t,"network-request-failed"))},xk(`${Ek()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Hl=null,e})}let Hl=null;function T2(t){return Hl=Hl||E2(t),Hl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=new Na(5e3,15e3),k2="__/auth/iframe",S2="emulator/auth/iframe",A2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b2(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Lf(e,S2):`https://${t.config.authDomain}/${k2}`,r={apiKey:e.apiKey,appName:t.name,v:Zs},i=C2.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Pa(r).slice(1)}`}async function R2(t){const e=await T2(t),n=Yn().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:b2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:A2,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Qn(t,"network-request-failed"),l=Yn().setTimeout(()=>{s(o)},I2.get());function u(){Yn().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},N2=500,D2=600,M2="_blank",L2="http://localhost";class Sg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j2(t,e,n,r=N2,i=D2){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},P2),{width:r.toString(),height:i.toString(),top:s,left:o}),h=$t().toLowerCase();n&&(l=c_(h)?M2:n),l_(h)&&(e=e||L2,u.scrollbars="yes");const p=Object.entries(u).reduce((v,[C,P])=>`${v}${C}=${P},`,"");if(fk(h)&&l!=="_self")return V2(e||"",l),new Sg(null);const m=window.open(e||"",l,p);oe(m,t,"popup-blocked");try{m.focus()}catch{}return new Sg(m)}function V2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="__/auth/handler",F2="emulator/auth/handler",U2=encodeURIComponent("fac");async function Ag(t,e,n,r,i,s){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Zs,eventId:i};if(e instanceof __){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",VT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof La){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const u=await t._getAppCheckToken(),h=u?`#${U2}=${encodeURIComponent(u)}`:"";return`${z2(t)}?${Pa(l).slice(1)}${h}`}function z2({config:t}){return t.emulator?Lf(t,F2):`https://${t.authDomain}/${O2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd="webStorageSupport";class $2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=I_,this._completeRedirectFn=h2,this._overrideRedirectResult=u2}async _openPopup(e,n,r,i){var s;Tr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Ag(e,n,r,mh(),i);return j2(e,o,Uf())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Ag(e,n,r,mh(),i);return qk(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Tr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await R2(e),r=new p2(e);return n.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sd,{type:sd},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[sd];o!==void 0&&n(!!o),Er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return m_()||u_()||Of()}}const B2=$2;var Cg="@firebase/auth",bg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function H2(t){zs(new zi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:g_(t)},h=new _k(r,i,s,u);return kk(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zs(new zi("auth-internal",e=>{const n=Ma(e.getProvider("auth").getImmediate());return(r=>new W2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),si(Cg,bg,q2(t)),si(Cg,bg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=5*60,K2=Gv("authIdTokenMaxAge")||G2;let Rg=null;const Q2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>K2)return;const i=n==null?void 0:n.token;Rg!==i&&(Rg=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Y2(t=Nf()){const e=Pf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ik(t,{popupRedirectResolver:B2,persistence:[e2,$k,I_]}),r=Gv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Q2(s.toString());Ok(n,o,()=>o(n.currentUser)),Vk(n,l=>o(l))}}const i=qv("auth");return i&&Sk(n,`http://${i}`),n}function X2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}wk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Qn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",X2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});H2("Browser");var Pg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Di,P_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,g){function w(){}w.prototype=g.prototype,I.D=g.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,b,R){for(var S=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)S[ee-2]=arguments[ee];return g.prototype[b].apply(E,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,g,w){w||(w=0);var E=Array(16);if(typeof g=="string")for(var b=0;16>b;++b)E[b]=g.charCodeAt(w++)|g.charCodeAt(w++)<<8|g.charCodeAt(w++)<<16|g.charCodeAt(w++)<<24;else for(b=0;16>b;++b)E[b]=g[w++]|g[w++]<<8|g[w++]<<16|g[w++]<<24;g=I.g[0],w=I.g[1],b=I.g[2];var R=I.g[3],S=g+(R^w&(b^R))+E[0]+3614090360&4294967295;g=w+(S<<7&4294967295|S>>>25),S=R+(b^g&(w^b))+E[1]+3905402710&4294967295,R=g+(S<<12&4294967295|S>>>20),S=b+(w^R&(g^w))+E[2]+606105819&4294967295,b=R+(S<<17&4294967295|S>>>15),S=w+(g^b&(R^g))+E[3]+3250441966&4294967295,w=b+(S<<22&4294967295|S>>>10),S=g+(R^w&(b^R))+E[4]+4118548399&4294967295,g=w+(S<<7&4294967295|S>>>25),S=R+(b^g&(w^b))+E[5]+1200080426&4294967295,R=g+(S<<12&4294967295|S>>>20),S=b+(w^R&(g^w))+E[6]+2821735955&4294967295,b=R+(S<<17&4294967295|S>>>15),S=w+(g^b&(R^g))+E[7]+4249261313&4294967295,w=b+(S<<22&4294967295|S>>>10),S=g+(R^w&(b^R))+E[8]+1770035416&4294967295,g=w+(S<<7&4294967295|S>>>25),S=R+(b^g&(w^b))+E[9]+2336552879&4294967295,R=g+(S<<12&4294967295|S>>>20),S=b+(w^R&(g^w))+E[10]+4294925233&4294967295,b=R+(S<<17&4294967295|S>>>15),S=w+(g^b&(R^g))+E[11]+2304563134&4294967295,w=b+(S<<22&4294967295|S>>>10),S=g+(R^w&(b^R))+E[12]+1804603682&4294967295,g=w+(S<<7&4294967295|S>>>25),S=R+(b^g&(w^b))+E[13]+4254626195&4294967295,R=g+(S<<12&4294967295|S>>>20),S=b+(w^R&(g^w))+E[14]+2792965006&4294967295,b=R+(S<<17&4294967295|S>>>15),S=w+(g^b&(R^g))+E[15]+1236535329&4294967295,w=b+(S<<22&4294967295|S>>>10),S=g+(b^R&(w^b))+E[1]+4129170786&4294967295,g=w+(S<<5&4294967295|S>>>27),S=R+(w^b&(g^w))+E[6]+3225465664&4294967295,R=g+(S<<9&4294967295|S>>>23),S=b+(g^w&(R^g))+E[11]+643717713&4294967295,b=R+(S<<14&4294967295|S>>>18),S=w+(R^g&(b^R))+E[0]+3921069994&4294967295,w=b+(S<<20&4294967295|S>>>12),S=g+(b^R&(w^b))+E[5]+3593408605&4294967295,g=w+(S<<5&4294967295|S>>>27),S=R+(w^b&(g^w))+E[10]+38016083&4294967295,R=g+(S<<9&4294967295|S>>>23),S=b+(g^w&(R^g))+E[15]+3634488961&4294967295,b=R+(S<<14&4294967295|S>>>18),S=w+(R^g&(b^R))+E[4]+3889429448&4294967295,w=b+(S<<20&4294967295|S>>>12),S=g+(b^R&(w^b))+E[9]+568446438&4294967295,g=w+(S<<5&4294967295|S>>>27),S=R+(w^b&(g^w))+E[14]+3275163606&4294967295,R=g+(S<<9&4294967295|S>>>23),S=b+(g^w&(R^g))+E[3]+4107603335&4294967295,b=R+(S<<14&4294967295|S>>>18),S=w+(R^g&(b^R))+E[8]+1163531501&4294967295,w=b+(S<<20&4294967295|S>>>12),S=g+(b^R&(w^b))+E[13]+2850285829&4294967295,g=w+(S<<5&4294967295|S>>>27),S=R+(w^b&(g^w))+E[2]+4243563512&4294967295,R=g+(S<<9&4294967295|S>>>23),S=b+(g^w&(R^g))+E[7]+1735328473&4294967295,b=R+(S<<14&4294967295|S>>>18),S=w+(R^g&(b^R))+E[12]+2368359562&4294967295,w=b+(S<<20&4294967295|S>>>12),S=g+(w^b^R)+E[5]+4294588738&4294967295,g=w+(S<<4&4294967295|S>>>28),S=R+(g^w^b)+E[8]+2272392833&4294967295,R=g+(S<<11&4294967295|S>>>21),S=b+(R^g^w)+E[11]+1839030562&4294967295,b=R+(S<<16&4294967295|S>>>16),S=w+(b^R^g)+E[14]+4259657740&4294967295,w=b+(S<<23&4294967295|S>>>9),S=g+(w^b^R)+E[1]+2763975236&4294967295,g=w+(S<<4&4294967295|S>>>28),S=R+(g^w^b)+E[4]+1272893353&4294967295,R=g+(S<<11&4294967295|S>>>21),S=b+(R^g^w)+E[7]+4139469664&4294967295,b=R+(S<<16&4294967295|S>>>16),S=w+(b^R^g)+E[10]+3200236656&4294967295,w=b+(S<<23&4294967295|S>>>9),S=g+(w^b^R)+E[13]+681279174&4294967295,g=w+(S<<4&4294967295|S>>>28),S=R+(g^w^b)+E[0]+3936430074&4294967295,R=g+(S<<11&4294967295|S>>>21),S=b+(R^g^w)+E[3]+3572445317&4294967295,b=R+(S<<16&4294967295|S>>>16),S=w+(b^R^g)+E[6]+76029189&4294967295,w=b+(S<<23&4294967295|S>>>9),S=g+(w^b^R)+E[9]+3654602809&4294967295,g=w+(S<<4&4294967295|S>>>28),S=R+(g^w^b)+E[12]+3873151461&4294967295,R=g+(S<<11&4294967295|S>>>21),S=b+(R^g^w)+E[15]+530742520&4294967295,b=R+(S<<16&4294967295|S>>>16),S=w+(b^R^g)+E[2]+3299628645&4294967295,w=b+(S<<23&4294967295|S>>>9),S=g+(b^(w|~R))+E[0]+4096336452&4294967295,g=w+(S<<6&4294967295|S>>>26),S=R+(w^(g|~b))+E[7]+1126891415&4294967295,R=g+(S<<10&4294967295|S>>>22),S=b+(g^(R|~w))+E[14]+2878612391&4294967295,b=R+(S<<15&4294967295|S>>>17),S=w+(R^(b|~g))+E[5]+4237533241&4294967295,w=b+(S<<21&4294967295|S>>>11),S=g+(b^(w|~R))+E[12]+1700485571&4294967295,g=w+(S<<6&4294967295|S>>>26),S=R+(w^(g|~b))+E[3]+2399980690&4294967295,R=g+(S<<10&4294967295|S>>>22),S=b+(g^(R|~w))+E[10]+4293915773&4294967295,b=R+(S<<15&4294967295|S>>>17),S=w+(R^(b|~g))+E[1]+2240044497&4294967295,w=b+(S<<21&4294967295|S>>>11),S=g+(b^(w|~R))+E[8]+1873313359&4294967295,g=w+(S<<6&4294967295|S>>>26),S=R+(w^(g|~b))+E[15]+4264355552&4294967295,R=g+(S<<10&4294967295|S>>>22),S=b+(g^(R|~w))+E[6]+2734768916&4294967295,b=R+(S<<15&4294967295|S>>>17),S=w+(R^(b|~g))+E[13]+1309151649&4294967295,w=b+(S<<21&4294967295|S>>>11),S=g+(b^(w|~R))+E[4]+4149444226&4294967295,g=w+(S<<6&4294967295|S>>>26),S=R+(w^(g|~b))+E[11]+3174756917&4294967295,R=g+(S<<10&4294967295|S>>>22),S=b+(g^(R|~w))+E[2]+718787259&4294967295,b=R+(S<<15&4294967295|S>>>17),S=w+(R^(b|~g))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(b+(S<<21&4294967295|S>>>11))&4294967295,I.g[2]=I.g[2]+b&4294967295,I.g[3]=I.g[3]+R&4294967295}r.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var w=g-this.blockSize,E=this.B,b=this.h,R=0;R<g;){if(b==0)for(;R<=w;)i(this,I,R),R+=this.blockSize;if(typeof I=="string"){for(;R<g;)if(E[b++]=I.charCodeAt(R++),b==this.blockSize){i(this,E),b=0;break}}else for(;R<g;)if(E[b++]=I[R++],b==this.blockSize){i(this,E),b=0;break}}this.h=b,this.o+=g},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var w=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=w&255,w/=256;for(this.u(I),I=Array(16),g=w=0;4>g;++g)for(var E=0;32>E;E+=8)I[w++]=this.g[g]>>>E&255;return I};function s(I,g){var w=l;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=g(I)}function o(I,g){this.h=g;for(var w=[],E=!0,b=I.length-1;0<=b;b--){var R=I[b]|0;E&&R==g||(w[b]=R,E=!1)}this.g=w}var l={};function u(I){return-128<=I&&128>I?s(I,function(g){return new o([g|0],0>g?-1:0)}):new o([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return V(h(-I));for(var g=[],w=1,E=0;I>=w;E++)g[E]=I/w|0,w*=4294967296;return new o(g,0)}function p(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return V(p(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=h(Math.pow(g,8)),E=m,b=0;b<I.length;b+=8){var R=Math.min(8,I.length-b),S=parseInt(I.substring(b,b+R),g);8>R?(R=h(Math.pow(g,R)),E=E.j(R).add(h(S))):(E=E.j(w),E=E.add(h(S)))}return E}var m=u(0),v=u(1),C=u(16777216);t=o.prototype,t.m=function(){if(M(this))return-V(this).m();for(var I=0,g=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*g,g*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P(this))return"0";if(M(this))return"-"+V(this).toString(I);for(var g=h(Math.pow(I,6)),w=this,E="";;){var b=D(w,g).g;w=A(w,b.j(g));var R=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=b,P(w))return R+E;for(;6>R.length;)R="0"+R;E=R+E}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function P(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function M(I){return I.h==-1}t.l=function(I){return I=A(this,I),M(I)?-1:P(I)?0:1};function V(I){for(var g=I.g.length,w=[],E=0;E<g;E++)w[E]=~I.g[E];return new o(w,~I.h).add(v)}t.abs=function(){return M(this)?V(this):this},t.add=function(I){for(var g=Math.max(this.g.length,I.g.length),w=[],E=0,b=0;b<=g;b++){var R=E+(this.i(b)&65535)+(I.i(b)&65535),S=(R>>>16)+(this.i(b)>>>16)+(I.i(b)>>>16);E=S>>>16,R&=65535,S&=65535,w[b]=S<<16|R}return new o(w,w[w.length-1]&-2147483648?-1:0)};function A(I,g){return I.add(V(g))}t.j=function(I){if(P(this)||P(I))return m;if(M(this))return M(I)?V(this).j(V(I)):V(V(this).j(I));if(M(I))return V(this.j(V(I)));if(0>this.l(C)&&0>I.l(C))return h(this.m()*I.m());for(var g=this.g.length+I.g.length,w=[],E=0;E<2*g;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<I.g.length;b++){var R=this.i(E)>>>16,S=this.i(E)&65535,ee=I.i(b)>>>16,St=I.i(b)&65535;w[2*E+2*b]+=S*St,T(w,2*E+2*b),w[2*E+2*b+1]+=R*St,T(w,2*E+2*b+1),w[2*E+2*b+1]+=S*ee,T(w,2*E+2*b+1),w[2*E+2*b+2]+=R*ee,T(w,2*E+2*b+2)}for(E=0;E<g;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=g;E<2*g;E++)w[E]=0;return new o(w,0)};function T(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function x(I,g){this.g=I,this.h=g}function D(I,g){if(P(g))throw Error("division by zero");if(P(I))return new x(m,m);if(M(I))return g=D(V(I),g),new x(V(g.g),V(g.h));if(M(g))return g=D(I,V(g)),new x(V(g.g),g.h);if(30<I.g.length){if(M(I)||M(g))throw Error("slowDivide_ only works with positive integers.");for(var w=v,E=g;0>=E.l(I);)w=F(w),E=F(E);var b=B(w,1),R=B(E,1);for(E=B(E,2),w=B(w,2);!P(E);){var S=R.add(E);0>=S.l(I)&&(b=b.add(w),R=S),E=B(E,1),w=B(w,1)}return g=A(I,b.j(g)),new x(b,g)}for(b=m;0<=I.l(g);){for(w=Math.max(1,Math.floor(I.m()/g.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),R=h(w),S=R.j(g);M(S)||0<S.l(I);)w-=E,R=h(w),S=R.j(g);P(R)&&(R=v),b=b.add(R),I=A(I,S)}return new x(b,I)}t.A=function(I){return D(this,I).h},t.and=function(I){for(var g=Math.max(this.g.length,I.g.length),w=[],E=0;E<g;E++)w[E]=this.i(E)&I.i(E);return new o(w,this.h&I.h)},t.or=function(I){for(var g=Math.max(this.g.length,I.g.length),w=[],E=0;E<g;E++)w[E]=this.i(E)|I.i(E);return new o(w,this.h|I.h)},t.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),w=[],E=0;E<g;E++)w[E]=this.i(E)^I.i(E);return new o(w,this.h^I.h)};function F(I){for(var g=I.g.length+1,w=[],E=0;E<g;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new o(w,I.h)}function B(I,g){var w=g>>5;g%=32;for(var E=I.g.length-w,b=[],R=0;R<E;R++)b[R]=0<g?I.i(R+w)>>>g|I.i(R+w+1)<<32-g:I.i(R+w);return new o(b,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,P_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Di=o}).apply(typeof Pg<"u"?Pg:typeof self<"u"?self:typeof window<"u"?window:{});var Sl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var N_,No,D_,Gl,vh,M_,L_,j_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,f){return a==Array.prototype||a==Object.prototype||(a[c]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sl=="object"&&Sl];for(var c=0;c<a.length;++c){var f=a[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var N=a[y];if(!(N in f))break e;f=f[N]}a=a[a.length-1],y=f[a],c=c(y),c!=y&&c!=null&&e(f,a,{configurable:!0,writable:!0,value:c})}}function s(a,c){a instanceof String&&(a+="");var f=0,y=!1,N={next:function(){if(!y&&f<a.length){var j=f++;return{value:c(j,a[j]),done:!1}}return y=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(a){return a||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function h(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function p(a,c,f){return a.call.apply(a.bind,arguments)}function m(a,c,f){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,y),a.apply(c,N)}}return function(){return a.apply(c,arguments)}}function v(a,c,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,v.apply(null,arguments)}function C(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function P(a,c){function f(){}f.prototype=c.prototype,a.aa=c.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(y,N,j){for(var G=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)G[Re-2]=arguments[Re];return c.prototype[N].apply(y,G)}}function M(a){const c=a.length;if(0<c){const f=Array(c);for(let y=0;y<c;y++)f[y]=a[y];return f}return[]}function V(a,c){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(u(y)){const N=a.length||0,j=y.length||0;a.length=N+j;for(let G=0;G<j;G++)a[N+G]=y[G]}else a.push(y)}}class A{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function T(a){return/^[\s\xa0]*$/.test(a)}function x(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var F=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function B(a,c,f){for(const y in a)c.call(f,a[y],y,a)}function I(a,c){for(const f in a)c.call(void 0,a[f],f,a)}function g(a){const c={};for(const f in a)c[f]=a[f];return c}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,c){let f,y;for(let N=1;N<arguments.length;N++){y=arguments[N];for(f in y)a[f]=y[f];for(let j=0;j<w.length;j++)f=w[j],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function b(a){var c=1;a=a.split(":");const f=[];for(;0<c&&a.length;)f.push(a.shift()),c--;return a.length&&f.push(a.join(":")),f}function R(a){l.setTimeout(()=>{throw a},0)}function S(){var a=ie;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class ee{constructor(){this.h=this.g=null}add(c,f){const y=St.get();y.set(c,f),this.h?this.h.next=y:this.g=y,this.h=y}}var St=new A(()=>new Me,a=>a.reset());class Me{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let At,W=!1,ie=new ee,le=()=>{const a=l.Promise.resolve(void 0);At=()=>{a.then(Pe)}};var Pe=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(f){R(f)}var c=St;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}W=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Be(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}Be.prototype.h=function(){this.defaultPrevented=!0};var Xe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return a}();function an(a,c){if(Be.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(F){e:{try{D(c.nodeName);var N=!0;break e}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=a.fromElement:f=="mouseout"&&(c=a.toElement);this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:mt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&an.aa.h.call(this)}}P(an,Be);var mt={2:"touch",3:"pen",4:"mouse"};an.prototype.h=function(){an.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),Un=0;function tr(a,c,f,y,N){this.listener=a,this.proxy=null,this.src=c,this.type=f,this.capture=!!y,this.ha=N,this.key=++Un,this.da=this.fa=!1}function yn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function gi(a){this.src=a,this.g={},this.h=0}gi.prototype.add=function(a,c,f,y,N){var j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);var G=ge(a,c,y,N);return-1<G?(c=a[G],f||(c.fa=!1)):(c=new tr(c,this.src,j,!!y,N),c.fa=f,a.push(c)),c};function Yi(a,c){var f=c.type;if(f in a.g){var y=a.g[f],N=Array.prototype.indexOf.call(y,c,void 0),j;(j=0<=N)&&Array.prototype.splice.call(y,N,1),j&&(yn(c),a.g[f].length==0&&(delete a.g[f],a.h--))}}function ge(a,c,f,y){for(var N=0;N<a.length;++N){var j=a[N];if(!j.da&&j.listener==c&&j.capture==!!f&&j.ha==y)return N}return-1}var Je="closure_lm_"+(1e6*Math.random()|0),vn={};function _n(a,c,f,y,N){if(Array.isArray(c)){for(var j=0;j<c.length;j++)_n(a,c[j],f,y,N);return null}return f=yi(f),a&&a[Ue]?a.K(c,f,h(y)?!!y.capture:!1,N):br(a,c,f,!1,y,N)}function br(a,c,f,y,N,j){if(!c)throw Error("Invalid event type");var G=h(N)?!!N.capture:!!N,Re=oo(a);if(Re||(a[Je]=Re=new gi(a)),f=Re.add(c,f,y,G,j),f.proxy)return f;if(y=zn(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)Xe||(N=G),N===void 0&&(N=!1),a.addEventListener(c.toString(),y,N);else if(a.attachEvent)a.attachEvent(nr(c.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function zn(){function a(f){return c.call(a.src,a.listener,f)}const c=gc;return a}function Ze(a,c,f,y,N){if(Array.isArray(c))for(var j=0;j<c.length;j++)Ze(a,c[j],f,y,N);else y=h(y)?!!y.capture:!!y,f=yi(f),a&&a[Ue]?(a=a.i,c=String(c).toString(),c in a.g&&(j=a.g[c],f=ge(j,f,y,N),-1<f&&(yn(j[f]),Array.prototype.splice.call(j,f,1),j.length==0&&(delete a.g[c],a.h--)))):a&&(a=oo(a))&&(c=a.g[c.toString()],a=-1,c&&(a=ge(c,f,y,N)),(f=-1<a?c[a]:null)&&Xi(f))}function Xi(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[Ue])Yi(c.i,a);else{var f=a.type,y=a.proxy;c.removeEventListener?c.removeEventListener(f,y,a.capture):c.detachEvent?c.detachEvent(nr(f),y):c.addListener&&c.removeListener&&c.removeListener(y),(f=oo(c))?(Yi(f,a),f.h==0&&(f.src=null,c[Je]=null)):yn(a)}}}function nr(a){return a in vn?vn[a]:vn[a]="on"+a}function gc(a,c){if(a.da)a=!0;else{c=new an(c,this);var f=a.listener,y=a.ha||a.src;a.fa&&Xi(a),a=f.call(y,c)}return a}function oo(a){return a=a[Je],a instanceof gi?a:null}var Wa="__closure_events_fn_"+(1e9*Math.random()>>>0);function yi(a){return typeof a=="function"?a:(a[Wa]||(a[Wa]=function(c){return a.handleEvent(c)}),a[Wa])}function ot(){ve.call(this),this.i=new gi(this),this.M=this,this.F=null}P(ot,ve),ot.prototype[Ue]=!0,ot.prototype.removeEventListener=function(a,c,f,y){Ze(this,a,c,f,y)};function gt(a,c){var f,y=a.F;if(y)for(f=[];y;y=y.F)f.push(y);if(a=a.M,y=c.type||c,typeof c=="string")c=new Be(c,a);else if(c instanceof Be)c.target=c.target||a;else{var N=c;c=new Be(y,a),E(c,N)}if(N=!0,f)for(var j=f.length-1;0<=j;j--){var G=c.g=f[j];N=vi(G,y,!0,c)&&N}if(G=c.g=a,N=vi(G,y,!0,c)&&N,N=vi(G,y,!1,c)&&N,f)for(j=0;j<f.length;j++)G=c.g=f[j],N=vi(G,y,!1,c)&&N}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var f=a.g[c],y=0;y<f.length;y++)yn(f[y]);delete a.g[c],a.h--}}this.F=null},ot.prototype.K=function(a,c,f,y){return this.i.add(String(a),c,!1,f,y)},ot.prototype.L=function(a,c,f,y){return this.i.add(String(a),c,!0,f,y)};function vi(a,c,f,y){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,j=0;j<c.length;++j){var G=c[j];if(G&&!G.da&&G.capture==f){var Re=G.listener,vt=G.ha||G.src;G.fa&&Yi(a.i,G),N=Re.call(vt,y)!==!1&&N}}return N&&!y.defaultPrevented}function qa(a,c,f){if(typeof a=="function")f&&(a=v(a,f));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function ao(a){a.g=qa(()=>{a.g=null,a.i&&(a.i=!1,ao(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class _i extends ve{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:ao(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rr(a){ve.call(this),this.h=a,this.g={}}P(Rr,ve);var Ha=[];function lo(a){B(a.g,function(c,f){this.g.hasOwnProperty(f)&&Xi(c)},a),a.g={}}Rr.prototype.N=function(){Rr.aa.N.call(this),lo(this)},Rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ae=l.JSON.stringify,Le=l.JSON.parse,Pr=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ga(){}Ga.prototype.h=null;function uo(a){return a.h||(a.h=a.i())}function Nr(){}var Bt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rr(){Be.call(this,"d")}P(rr,Be);function wi(){Be.call(this,"c")}P(wi,Be);var Qt={},co=null;function wn(){return co=co||new ot}Qt.La="serverreachability";function ln(a){Be.call(this,Qt.La,a)}P(ln,Be);function Ne(a){const c=wn();gt(c,new ln(c))}Qt.STAT_EVENT="statevent";function Ct(a,c){Be.call(this,Qt.STAT_EVENT,a),this.stat=c}P(Ct,Be);function yt(a){const c=wn();gt(c,new Ct(c,a))}Qt.Ma="timingevent";function Yt(a,c){Be.call(this,Qt.Ma,a),this.size=c}P(Yt,Be);function un(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function xi(){this.g=!0}xi.prototype.xa=function(){this.g=!1};function yc(a,c,f,y,N,j){a.info(function(){if(a.g)if(j)for(var G="",Re=j.split("&"),vt=0;vt<Re.length;vt++){var Ie=Re[vt].split("=");if(1<Ie.length){var Nt=Ie[0];Ie=Ie[1];var Dt=Nt.split("_");G=2<=Dt.length&&Dt[1]=="type"?G+(Nt+"="+Ie+"&"):G+(Nt+"=redacted&")}}else G=null;else G=j;return"XMLHTTP REQ ("+y+") [attempt "+N+"]: "+c+`
`+f+`
`+G})}function Ka(a,c,f,y,N,j,G){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+N+"]: "+c+`
`+f+`
`+j+" "+G})}function ir(a,c,f,y){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+_c(a,f)+(y?" "+y:"")})}function vc(a,c){a.info(function(){return"TIMEOUT: "+c})}xi.prototype.info=function(){};function _c(a,c){if(!a.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var y=f[a];if(!(2>y.length)){var N=y[1];if(Array.isArray(N)&&!(1>N.length)){var j=N[0];if(j!="noop"&&j!="stop"&&j!="close")for(var G=1;G<N.length;G++)N[G]=""}}}}return Ae(f)}catch{return c}}var Ei={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dr;function Ji(){}P(Ji,Ga),Ji.prototype.g=function(){return new XMLHttpRequest},Ji.prototype.i=function(){return{}},Dr=new Ji;function Xt(a,c,f,y){this.j=a,this.i=c,this.l=f,this.R=y||1,this.U=new Rr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ya}function Ya(){this.i=null,this.g="",this.h=!1}var ho={},Zi={};function es(a,c,f){a.L=1,a.v=nt(Wt(c)),a.m=f,a.P=!0,Xa(a,null)}function Xa(a,c){a.F=Date.now(),ts(a),a.A=Wt(a.v);var f=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),Ep(f.i,"t",y),a.C=0,f=a.j.J,a.h=new Ya,a.g=Up(a.j,f?c:null,!a.m),0<a.O&&(a.M=new _i(v(a.Y,a,a.g),a.O)),c=a.U,f=a.g,y=a.ca;var N="readystatechange";Array.isArray(N)||(N&&(Ha[0]=N.toString()),N=Ha);for(var j=0;j<N.length;j++){var G=_n(f,N[j],y||c.handleEvent,!1,c.h||c);if(!G)break;c.g[G.key]=G}c=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),Ne(),yc(a.i,a.u,a.A,a.l,a.R,a.m)}Xt.prototype.ca=function(a){a=a.target;const c=this.M;c&&or(a)==3?c.j():this.Y(a)},Xt.prototype.Y=function(a){try{if(a==this.g)e:{const Dt=or(this.g);var c=this.g.Ba();const is=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||bp(this.g)))){this.J||Dt!=4||c==7||(c==8||0>=is?Ne(3):Ne(2)),xn(this);var f=this.g.Z();this.X=f;t:if(Ja(this)){var y=bp(this.g);a="";var N=y.length,j=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$n(this),bt(this);var G="";break t}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,a+=this.h.i.decode(y[c],{stream:!(j&&c==N-1)});y.length=0,this.h.g+=a,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=f==200,Ka(this.i,this.u,this.A,this.l,this.R,Dt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,vt=this.g;if((Re=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Re)){var Ie=Re;break t}}Ie=null}if(f=Ie)ir(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_(this,f);else{this.o=!1,this.s=3,yt(12),$n(this),bt(this);break e}}if(this.P){f=!0;let bn;for(;!this.J&&this.C<G.length;)if(bn=wc(this,G),bn==Zi){Dt==4&&(this.s=4,yt(14),f=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(bn==ho){this.s=4,yt(15),ir(this.i,this.l,G,"[Invalid Chunk]"),f=!1;break}else ir(this.i,this.l,bn,null),_(this,bn);if(Ja(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||G.length!=0||this.h.h||(this.s=1,yt(16),f=!1),this.o=this.o&&f,!f)ir(this.i,this.l,G,"[Invalid Chunked Response]"),$n(this),bt(this);else if(0<G.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),kc(Nt),Nt.M=!0,yt(11))}}else ir(this.i,this.l,G,null),_(this,G);Dt==4&&$n(this),this.o&&!this.J&&(Dt==4?jp(this.j,this):(this.o=!1,ts(this)))}else u1(this.g),f==400&&0<G.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),$n(this),bt(this)}}}catch{}finally{}};function Ja(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function wc(a,c){var f=a.C,y=c.indexOf(`
`,f);return y==-1?Zi:(f=Number(c.substring(f,y)),isNaN(f)?ho:(y+=1,y+f>c.length?Zi:(c=c.slice(y,y+f),a.C=y+f,c)))}Xt.prototype.cancel=function(){this.J=!0,$n(this)};function ts(a){a.S=Date.now()+a.I,je(a,a.I)}function je(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=un(v(a.ba,a),c)}function xn(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Xt.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(vc(this.i,this.A),this.L!=2&&(Ne(),yt(17)),$n(this),this.s=2,bt(this)):je(this,this.S-a)};function bt(a){a.j.G==0||a.J||jp(a.j,a)}function $n(a){xn(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,lo(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function _(a,c){try{var f=a.j;if(f.G!=0&&(f.g==a||H(f.h,a))){if(!a.K&&H(f.h,a)&&f.G==3){try{var y=f.Da.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var N=y;if(N[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)sl(f),rl(f);else break e;Ic(f),yt(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=un(v(f.Za,f),6e3));if(1>=U(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ti(f,11)}else if((a.K||f.g==a)&&sl(f),!T(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let Ie=N[c];if(f.T=Ie[0],Ie=Ie[1],f.G==2)if(Ie[0]=="c"){f.K=Ie[1],f.ia=Ie[2];const Nt=Ie[3];Nt!=null&&(f.la=Nt,f.j.info("VER="+f.la));const Dt=Ie[4];Dt!=null&&(f.Aa=Dt,f.j.info("SVER="+f.Aa));const is=Ie[5];is!=null&&typeof is=="number"&&0<is&&(y=1.5*is,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const bn=a.g;if(bn){const al=bn.g?bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(al){var j=y.h;j.g||al.indexOf("spdy")==-1&&al.indexOf("quic")==-1&&al.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(ne(j,j.h),j.h=null))}if(y.D){const Sc=bn.g?bn.g.getResponseHeader("X-HTTP-Session-Id"):null;Sc&&(y.ya=Sc,he(y.I,y.D,Sc))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var G=a;if(y.qa=Fp(y,y.J?y.ia:null,y.W),G.K){te(y.h,G);var Re=G,vt=y.L;vt&&(Re.I=vt),Re.B&&(xn(Re),ts(Re)),y.g=G}else Mp(y);0<f.i.length&&il(f)}else Ie[0]!="stop"&&Ie[0]!="close"||Ti(f,7);else f.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?Ti(f,7):Tc(f):Ie[0]!="noop"&&f.l&&f.l.ta(Ie),f.v=0)}}Ne(4)}catch{}}var k=class{constructor(a,c){this.g=a,this.map=c}};function L(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function O(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function U(a){return a.h?1:a.g?a.g.size:0}function H(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function ne(a,c){a.g?a.g.add(c):a.h=c}function te(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}L.prototype.cancel=function(){if(this.i=Y(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Y(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const f of a.g.values())c=c.concat(f.D);return c}return M(a.i)}function fe(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],f=a.length,y=0;y<f;y++)c.push(a[y]);return c}c=[],f=0;for(y in a)c[f++]=a[y];return c}function xe(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var f=0;f<a;f++)c.push(f);return c}c=[],f=0;for(const y in a)c[f++]=y;return c}}}function K(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var f=xe(a),y=fe(a),N=y.length,j=0;j<N;j++)c.call(void 0,y[j],f&&f[j],a)}var se=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pe(a,c){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var y=a[f].indexOf("="),N=null;if(0<=y){var j=a[f].substring(0,y);N=a[f].substring(y+1)}else j=a[f];c(j,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Se(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Se){this.h=a.h,ct(this,a.j),this.o=a.o,this.g=a.g,We(this,a.s),this.l=a.l;var c=a.i,f=new po;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Rt(this,f),this.m=a.m}else a&&(c=String(a).match(se))?(this.h=!1,ct(this,c[1]||"",!0),this.o=ze(c[2]||""),this.g=ze(c[3]||"",!0),We(this,c[4]),this.l=ze(c[5]||"",!0),Rt(this,c[6]||"",!0),this.m=ze(c[7]||"")):(this.h=!1,this.i=new po(null,this.h))}Se.prototype.toString=function(){var a=[],c=this.j;c&&a.push(Pt(c,fo,!0),":");var f=this.g;return(f||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Pt(c,fo,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Pt(f,f.charAt(0)=="/"?xc:Za,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Pt(f,t1)),a.join("")};function Wt(a){return new Se(a)}function ct(a,c,f){a.j=f?ze(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function We(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function Rt(a,c,f){c instanceof po?(a.i=c,n1(a.i,a.h)):(f||(c=Pt(c,e1)),a.i=new po(c,a.h))}function he(a,c,f){a.i.set(c,f)}function nt(a){return he(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ze(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Pt(a,c,f){return typeof a=="string"?(a=encodeURI(a).replace(c,sr),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function sr(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var fo=/[#\/\?@]/g,Za=/[#\?:]/g,xc=/[#\?]/g,e1=/[#\?@]/g,t1=/#/g;function po(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function Mr(a){a.g||(a.g=new Map,a.h=0,a.i&&pe(a.i,function(c,f){a.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=po.prototype,t.add=function(a,c){Mr(this),this.i=null,a=ns(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(c),this.h+=1,this};function wp(a,c){Mr(a),c=ns(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function xp(a,c){return Mr(a),c=ns(a,c),a.g.has(c)}t.forEach=function(a,c){Mr(this),this.g.forEach(function(f,y){f.forEach(function(N){a.call(c,N,y,this)},this)},this)},t.na=function(){Mr(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let y=0;y<c.length;y++){const N=a[y];for(let j=0;j<N.length;j++)f.push(c[y])}return f},t.V=function(a){Mr(this);let c=[];if(typeof a=="string")xp(this,a)&&(c=c.concat(this.g.get(ns(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)c=c.concat(a[f])}return c},t.set=function(a,c){return Mr(this),this.i=null,a=ns(this,a),xp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function Ep(a,c,f){wp(a,c),0<f.length&&(a.i=null,a.g.set(ns(a,c),M(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var y=c[f];const j=encodeURIComponent(String(y)),G=this.V(y);for(y=0;y<G.length;y++){var N=j;G[y]!==""&&(N+="="+encodeURIComponent(String(G[y]))),a.push(N)}}return this.i=a.join("&")};function ns(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function n1(a,c){c&&!a.j&&(Mr(a),a.i=null,a.g.forEach(function(f,y){var N=y.toLowerCase();y!=N&&(wp(this,y),Ep(this,N,f))},a)),a.j=c}function r1(a,c){const f=new xi;if(l.Image){const y=new Image;y.onload=C(Lr,f,"TestLoadImage: loaded",!0,c,y),y.onerror=C(Lr,f,"TestLoadImage: error",!1,c,y),y.onabort=C(Lr,f,"TestLoadImage: abort",!1,c,y),y.ontimeout=C(Lr,f,"TestLoadImage: timeout",!1,c,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else c(!1)}function i1(a,c){const f=new xi,y=new AbortController,N=setTimeout(()=>{y.abort(),Lr(f,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:y.signal}).then(j=>{clearTimeout(N),j.ok?Lr(f,"TestPingServer: ok",!0,c):Lr(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),Lr(f,"TestPingServer: error",!1,c)})}function Lr(a,c,f,y,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),y(f)}catch{}}function s1(){this.g=new Pr}function o1(a,c,f){const y=f||"";try{K(a,function(N,j){let G=N;h(N)&&(G=Ae(N)),c.push(y+j+"="+encodeURIComponent(G))})}catch(N){throw c.push(y+"type="+encodeURIComponent("_badmap")),N}}function el(a){this.l=a.Ub||null,this.j=a.eb||!1}P(el,Ga),el.prototype.g=function(){return new tl(this.l,this.j)},el.prototype.i=function(a){return function(){return a}}({});function tl(a,c){ot.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(tl,ot),t=tl.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,go(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,go(this)),this.g&&(this.readyState=3,go(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?mo(this):go(this),this.readyState==3&&Tp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,mo(this))},t.Qa=function(a){this.g&&(this.response=a,mo(this))},t.ga=function(){this.g&&mo(this)};function mo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,go(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=c.next();return a.join(`\r
`)};function go(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(tl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ip(a){let c="";return B(a,function(f,y){c+=y,c+=":",c+=f,c+=`\r
`}),c}function Ec(a,c,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=Ip(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):he(a,c,f))}function Qe(a){ot.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Qe,ot);var a1=/^https?$/i,l1=["POST","PUT"];t=Qe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dr.g(),this.v=this.o?uo(this.o):uo(Dr),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(j){kp(this,j);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var N in y)f.set(N,y[N]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const j of y.keys())f.set(j,y.get(j));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(j=>j.toLowerCase()=="content-type"),N=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(l1,c,void 0))||y||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,G]of f)this.g.setRequestHeader(j,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cp(this),this.u=!0,this.g.send(a),this.u=!1}catch(j){kp(this,j)}};function kp(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,Sp(a),nl(a)}function Sp(a){a.A||(a.A=!0,gt(a,"complete"),gt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,gt(this,"complete"),gt(this,"abort"),nl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nl(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ap(this):this.bb())},t.bb=function(){Ap(this)};function Ap(a){if(a.h&&typeof o<"u"&&(!a.v[1]||or(a)!=4||a.Z()!=2)){if(a.u&&or(a)==4)qa(a.Ea,0,a);else if(gt(a,"readystatechange"),or(a)==4){a.h=!1;try{const G=a.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var y;if(y=G===0){var N=String(a.D).match(se)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),y=!a1.test(N?N.toLowerCase():"")}f=y}if(f)gt(a,"complete"),gt(a,"success");else{a.m=6;try{var j=2<or(a)?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.Z()+"]",Sp(a)}}finally{nl(a)}}}}function nl(a,c){if(a.g){Cp(a);const f=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||gt(a,"ready");try{f.onreadystatechange=y}catch{}}}function Cp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function or(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),Le(c)}};function bp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function u1(a){const c={};a=(a.g&&2<=or(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(T(a[y]))continue;var f=b(a[y]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const j=c[N]||[];c[N]=j,j.push(f)}I(c,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yo(a,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||c}function Rp(a){this.Aa=0,this.i=[],this.j=new xi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yo("baseRetryDelayMs",5e3,a),this.cb=yo("retryDelaySeedMs",1e4,a),this.Wa=yo("forwardChannelMaxRetries",2,a),this.wa=yo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new L(a&&a.concurrentRequestLimit),this.Da=new s1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Rp.prototype,t.la=8,t.G=1,t.connect=function(a,c,f,y){yt(0),this.W=a,this.H=c||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=Fp(this,null,this.W),il(this)};function Tc(a){if(Pp(a),a.G==3){var c=a.U++,f=Wt(a.I);if(he(f,"SID",a.K),he(f,"RID",c),he(f,"TYPE","terminate"),vo(a,f),c=new Xt(a,a.j,c),c.L=2,c.v=nt(Wt(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Up(c.j,null),c.g.ea(c.v)),c.F=Date.now(),ts(c)}Op(a)}function rl(a){a.g&&(kc(a),a.g.cancel(),a.g=null)}function Pp(a){rl(a),a.u&&(l.clearTimeout(a.u),a.u=null),sl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function il(a){if(!O(a.h)&&!a.s){a.s=!0;var c=a.Ga;At||le(),W||(At(),W=!0),ie.add(c,a),a.B=0}}function c1(a,c){return U(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=un(v(a.Ga,a,c),Vp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const N=new Xt(this,this.j,a);let j=this.o;if(this.S&&(j?(j=g(j),E(j,this.S)):j=this.S),this.m!==null||this.O||(N.H=j,j=null),this.P)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(c+=y,4096<c){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=Dp(this,N,c),f=Wt(this.I),he(f,"RID",a),he(f,"CVER",22),this.D&&he(f,"X-HTTP-Session-Id",this.D),vo(this,f),j&&(this.O?c="headers="+encodeURIComponent(String(Ip(j)))+"&"+c:this.m&&Ec(f,this.m,j)),ne(this.h,N),this.Ua&&he(f,"TYPE","init"),this.P?(he(f,"$req",c),he(f,"SID","null"),N.T=!0,es(N,f,null)):es(N,f,c),this.G=2}}else this.G==3&&(a?Np(this,a):this.i.length==0||O(this.h)||Np(this))};function Np(a,c){var f;c?f=c.l:f=a.U++;const y=Wt(a.I);he(y,"SID",a.K),he(y,"RID",f),he(y,"AID",a.T),vo(a,y),a.m&&a.o&&Ec(y,a.m,a.o),f=new Xt(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),c&&(a.i=c.D.concat(a.i)),c=Dp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ne(a.h,f),es(f,y,c)}function vo(a,c){a.H&&B(a.H,function(f,y){he(c,y,f)}),a.l&&K({},function(f,y){he(c,y,f)})}function Dp(a,c,f){f=Math.min(a.i.length,f);var y=a.l?v(a.l.Na,a.l,a):null;e:{var N=a.i;let j=-1;for(;;){const G=["count="+f];j==-1?0<f?(j=N[0].g,G.push("ofs="+j)):j=0:G.push("ofs="+j);let Re=!0;for(let vt=0;vt<f;vt++){let Ie=N[vt].g;const Nt=N[vt].map;if(Ie-=j,0>Ie)j=Math.max(0,N[vt].g-100),Re=!1;else try{o1(Nt,G,"req"+Ie+"_")}catch{y&&y(Nt)}}if(Re){y=G.join("&");break e}}}return a=a.i.splice(0,f),c.D=a,y}function Mp(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;At||le(),W||(At(),W=!0),ie.add(c,a),a.v=0}}function Ic(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=un(v(a.Fa,a),Vp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Lp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=un(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),rl(this),Lp(this))};function kc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Lp(a){a.g=new Xt(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=Wt(a.qa);he(c,"RID","rpc"),he(c,"SID",a.K),he(c,"AID",a.T),he(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&he(c,"TO",a.ja),he(c,"TYPE","xmlhttp"),vo(a,c),a.m&&a.o&&Ec(c,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=nt(Wt(c)),f.m=null,f.P=!0,Xa(f,a)}t.Za=function(){this.C!=null&&(this.C=null,rl(this),Ic(this),yt(19))};function sl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function jp(a,c){var f=null;if(a.g==c){sl(a),kc(a),a.g=null;var y=2}else if(H(a.h,c))f=c.D,te(a.h,c),y=1;else return;if(a.G!=0){if(c.o)if(y==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=a.B;y=wn(),gt(y,new Yt(y,f)),il(a)}else Mp(a);else if(N=c.s,N==3||N==0&&0<c.X||!(y==1&&c1(a,c)||y==2&&Ic(a)))switch(f&&0<f.length&&(c=a.h,c.i=c.i.concat(f)),N){case 1:Ti(a,5);break;case 4:Ti(a,10);break;case 3:Ti(a,6);break;default:Ti(a,2)}}}function Vp(a,c){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*c}function Ti(a,c){if(a.j.info("Error code "+c),c==2){var f=v(a.fb,a),y=a.Xa;const N=!y;y=new Se(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ct(y,"https"),nt(y),N?r1(y.toString(),f):i1(y.toString(),f)}else yt(2);a.G=0,a.l&&a.l.sa(c),Op(a),Pp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Op(a){if(a.G=0,a.ka=[],a.l){const c=Y(a.h);(c.length!=0||a.i.length!=0)&&(V(a.ka,c),V(a.ka,a.i),a.h.i.length=0,M(a.i),a.i.length=0),a.l.ra()}}function Fp(a,c,f){var y=f instanceof Se?Wt(f):new Se(f);if(y.g!="")c&&(y.g=c+"."+y.g),We(y,y.s);else{var N=l.location;y=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var j=new Se(null);y&&ct(j,y),c&&(j.g=c),N&&We(j,N),f&&(j.l=f),y=j}return f=a.D,c=a.ya,f&&c&&he(y,f,c),he(y,"VER",a.la),vo(a,y),y}function Up(a,c,f){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new Qe(new el({eb:f})):new Qe(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zp(){}t=zp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ol(){}ol.prototype.g=function(a,c){return new cn(a,c)};function cn(a,c){ot.call(this),this.g=new Rp(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!T(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!T(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new rs(this)}P(cn,ot),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Tc(this.g)},cn.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Ae(a),a=f);c.i.push(new k(c.Ya++,a)),c.G==3&&il(c)},cn.prototype.N=function(){this.g.l=null,delete this.j,Tc(this.g),delete this.g,cn.aa.N.call(this)};function $p(a){rr.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const f in c){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}P($p,rr);function Bp(){wi.call(this),this.status=1}P(Bp,wi);function rs(a){this.g=a}P(rs,zp),rs.prototype.ua=function(){gt(this.g,"a")},rs.prototype.ta=function(a){gt(this.g,new $p(a))},rs.prototype.sa=function(a){gt(this.g,new Bp)},rs.prototype.ra=function(){gt(this.g,"b")},ol.prototype.createWebChannel=ol.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,j_=function(){return new ol},L_=function(){return wn()},M_=Qt,vh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ei.NO_ERROR=0,Ei.TIMEOUT=8,Ei.HTTP_ERROR=6,Gl=Ei,Qa.COMPLETE="complete",D_=Qa,Nr.EventType=Bt,Bt.OPEN="a",Bt.CLOSE="b",Bt.ERROR="c",Bt.MESSAGE="d",ot.prototype.listen=ot.prototype.K,No=Nr,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,N_=Qe}).apply(typeof Sl<"u"?Sl:typeof self<"u"?self:typeof window<"u"?window:{});const Ng="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let to="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new bf("@firebase/firestore");function Ao(){return Bi.logLevel}function J(t,...e){if(Bi.logLevel<=_e.DEBUG){const n=e.map($f);Bi.debug(`Firestore (${to}): ${t}`,...n)}}function kr(t,...e){if(Bi.logLevel<=_e.ERROR){const n=e.map($f);Bi.error(`Firestore (${to}): ${t}`,...n)}}function $s(t,...e){if(Bi.logLevel<=_e.WARN){const n=e.map($f);Bi.warn(`Firestore (${to}): ${t}`,...n)}}function $f(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: `+t;throw kr(e),new Error(e)}function be(t,e){t||ae()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class Z2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eS{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){be(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string"),new V_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string"),new Ot(e)}}class tS{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nS{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new tS(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){be(this.o===void 0);const r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be(typeof n.token=="string"),this.R=n.token,new rS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sS(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ke(t,e){return t<e?-1:t>e?1:0}function Bs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ut(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new ut(0,0))}static max(){return new ce(new ut(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ya.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ya?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Oe extends ya{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const oS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends ya{construct(e,n,r){return new xt(e,n,r)}static isValidIdentifier(e){return oS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new xt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Z(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Z(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Z(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Z(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(n)}static emptyPath(){return new xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Oe.fromString(e))}static fromName(e){return new re(Oe.fromString(e).popFirst(5))}static empty(){return new re(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Oe(e.slice()))}}function aS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new ut(n+1,0):new ut(n,r));return new ci(i,re.empty(),e)}function lS(t){return new ci(t.readTime,t.key,-1)}class ci{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ci(ce.min(),re.empty(),-1)}static max(){return new ci(ce.max(),re.empty(),-1)}}function uS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==cS)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(i=>i?$.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new $((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++l,l===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new $((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function hS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Oa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Bf.oe=-1;function sc(t){return t==null}function Ru(t){return t===0&&1/t==-1/0}function fS(t){return typeof t=="number"&&Number.isInteger(t)&&!Ru(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function no(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function F_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Al(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Al(this.root,e,this.comparator,!1)}getReverseIterator(){return new Al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Al(this.root,e,this.comparator,!0)}}class Al{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??wt.RED,this.left=i??wt.EMPTY,this.right=s??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new wt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,i,s){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mg(this.data.getIterator())}getIteratorFrom(e){return new Mg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tt(this.comparator);return n.data=e,n}}class Mg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new Tt(xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new U_("Invalid base64 string: "+s):s}}(e);return new kt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const pS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function di(t){if(be(!!t),typeof t=="string"){let e=0;const n=pS.exec(t);if(be(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wi(t){return typeof t=="string"?kt.fromBase64String(t):kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function qf(t){const e=t.mapValue.fields.__previous_value__;return Wf(e)?qf(e):e}function va(t){const e=di(t.mapValue.fields.__local_write_time__.timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n,r,i,s,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class _a{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _a("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _a&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl={mapValue:{}};function qi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wf(t)?4:yS(t)?9007199254740991:gS(t)?10:11:ae()}function er(t,e){if(t===e)return!0;const n=qi(t);if(n!==qi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return va(t).isEqual(va(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=di(i.timestampValue),l=di(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Wi(i.bytesValue).isEqual(Wi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return et(i.geoPointValue.latitude)===et(s.geoPointValue.latitude)&&et(i.geoPointValue.longitude)===et(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return et(i.integerValue)===et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=et(i.doubleValue),l=et(s.doubleValue);return o===l?Ru(o)===Ru(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Bs(t.arrayValue.values||[],e.arrayValue.values||[],er);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Dg(o)!==Dg(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!er(o[u],l[u])))return!1;return!0}(t,e);default:return ae()}}function wa(t,e){return(t.values||[]).find(n=>er(n,e))!==void 0}function Ws(t,e){if(t===e)return 0;const n=qi(t),r=qi(e);if(n!==r)return ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=et(s.integerValue||s.doubleValue),u=et(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Lg(t.timestampValue,e.timestampValue);case 4:return Lg(va(t),va(e));case 5:return ke(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Wi(s),u=Wi(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=ke(l[h],u[h]);if(p!==0)return p}return ke(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ke(et(s.latitude),et(o.latitude));return l!==0?l:ke(et(s.longitude),et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jg(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,h,p;const m=s.fields||{},v=o.fields||{},C=(l=m.value)===null||l===void 0?void 0:l.arrayValue,P=(u=v.value)===null||u===void 0?void 0:u.arrayValue,M=ke(((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0,((p=P==null?void 0:P.values)===null||p===void 0?void 0:p.length)||0);return M!==0?M:jg(C,P)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Cl.mapValue&&o===Cl.mapValue)return 0;if(s===Cl.mapValue)return 1;if(o===Cl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const v=ke(u[m],p[m]);if(v!==0)return v;const C=Ws(l[u[m]],h[p[m]]);if(C!==0)return C}return ke(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ae()}}function Lg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=di(t),r=di(e),i=ke(n.seconds,r.seconds);return i!==0?i:ke(n.nanos,r.nanos)}function jg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ws(n[i],r[i]);if(s)return s}return ke(n.length,r.length)}function qs(t){return _h(t)}function _h(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=di(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=_h(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${_h(n.fields[o])}`;return i+"}"}(t.mapValue):ae()}function Vg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wh(t){return!!t&&"integerValue"in t}function Hf(t){return!!t&&"arrayValue"in t}function Og(t){return!!t&&"nullValue"in t}function Fg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kl(t){return!!t&&"mapValue"in t}function gS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Go(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return no(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Go(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Go(t.arrayValue.values[n]);return e}return Object.assign({},t)}function yS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Go(n)}setAll(e){let n=xt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Go(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Kl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Kl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){no(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new In(Go(this.value))}}function z_(t){const e=[];return no(t.fields,(n,r)=>{const i=new xt([n]);if(Kl(r)){const s=z_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ut(e,0,ce.min(),ce.min(),ce.min(),In.empty(),0)}static newFoundDocument(e,n,r,i){return new Ut(e,1,n,ce.min(),r,i,0)}static newNoDocument(e,n){return new Ut(e,2,n,ce.min(),ce.min(),In.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,ce.min(),ce.min(),In.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n){this.position=e,this.inclusive=n}}function Ug(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=Ws(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function zg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!er(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n="asc"){this.field=e,this.dir=n}}function vS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{}class st extends $_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new wS(e,n,r):n==="array-contains"?new TS(e,r):n==="in"?new IS(e,r):n==="not-in"?new kS(e,r):n==="array-contains-any"?new SS(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xS(e,r):new ES(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ws(n,this.value)):n!==null&&qi(this.value)===qi(n)&&this.matchesComparison(Ws(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends $_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Fn(e,n)}matches(e){return B_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function B_(t){return t.op==="and"}function W_(t){return _S(t)&&B_(t)}function _S(t){for(const e of t.filters)if(e instanceof Fn)return!1;return!0}function xh(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+qs(t.value);if(W_(t))return t.filters.map(e=>xh(e)).join(",");{const e=t.filters.map(n=>xh(n)).join(",");return`${t.op}(${e})`}}function q_(t,e){return t instanceof st?function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&er(r.value,i.value)}(t,e):t instanceof Fn?function(r,i){return i instanceof Fn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&q_(o,i.filters[l]),!0):!1}(t,e):void ae()}function H_(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${qs(n.value)}`}(t):t instanceof Fn?function(n){return n.op.toString()+" {"+n.getFilters().map(H_).join(" ,")+"}"}(t):"Filter"}class wS extends st{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class xS extends st{constructor(e,n){super(e,"in",n),this.keys=G_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ES extends st{constructor(e,n){super(e,"not-in",n),this.keys=G_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function G_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class TS extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Hf(n)&&wa(n.arrayValue,this.value)}}class IS extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wa(this.value.arrayValue,n)}}class kS extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(wa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!wa(this.value.arrayValue,n)}}class SS extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Hf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function $g(t,e=null,n=[],r=[],i=null,s=null,o=null){return new AS(t,e,n,r,i,s,o)}function Gf(t){const e=de(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),sc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qs(r)).join(",")),e.ue=n}return e.ue}function Kf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!q_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zg(t.startAt,e.startAt)&&zg(t.endAt,e.endAt)}function Eh(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function CS(t,e,n,r,i,s,o,l){return new Fa(t,e,n,r,i,s,o,l)}function Qf(t){return new Fa(t)}function Bg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function K_(t){return t.collectionGroup!==null}function Ko(t){const e=de(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Tt(xt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Nu(s,r))}),n.has(xt.keyField().canonicalString())||e.ce.push(new Nu(xt.keyField(),r))}return e.ce}function Xn(t){const e=de(t);return e.le||(e.le=bS(e,Ko(t))),e.le}function bS(t,e){if(t.limitType==="F")return $g(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Nu(i.field,s)});const n=t.endAt?new Pu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pu(t.startAt.position,t.startAt.inclusive):null;return $g(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Th(t,e){const n=t.filters.concat([e]);return new Fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ih(t,e,n){return new Fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function oc(t,e){return Kf(Xn(t),Xn(e))&&t.limitType===e.limitType}function Q_(t){return`${Gf(Xn(t))}|lt:${t.limitType}`}function os(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>H_(i)).join(", ")}]`),sc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>qs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>qs(i)).join(",")),`Target(${r})`}(Xn(t))}; limitType=${t.limitType})`}function ac(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):re.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ko(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=Ug(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Ko(r),i)||r.endAt&&!function(o,l,u){const h=Ug(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Ko(r),i))}(t,e)}function RS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Y_(t){return(e,n)=>{let r=!1;for(const i of Ko(t)){const s=PS(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function PS(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Ws(u,h):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){no(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return F_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=new Ke(re.comparator);function Sr(){return NS}const X_=new Ke(re.comparator);function Do(...t){let e=X_;for(const n of t)e=e.insert(n.key,n);return e}function J_(t){let e=X_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ri(){return Qo()}function Z_(){return Qo()}function Qo(){return new ro(t=>t.toString(),(t,e)=>t.isEqual(e))}const DS=new Ke(re.comparator),MS=new Tt(re.comparator);function ye(...t){let e=MS;for(const n of t)e=e.add(n);return e}const LS=new Tt(ke);function jS(){return LS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ru(e)?"-0":e}}function ew(t){return{integerValue:""+t}}function VS(t,e){return fS(e)?ew(e):Yf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(){this._=void 0}}function OS(t,e,n){return t instanceof Du?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Wf(s)&&(s=qf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof xa?nw(t,e):t instanceof Ea?rw(t,e):function(i,s){const o=tw(i,s),l=Wg(o)+Wg(i.Pe);return wh(o)&&wh(i.Pe)?ew(l):Yf(i.serializer,l)}(t,e)}function FS(t,e,n){return t instanceof xa?nw(t,e):t instanceof Ea?rw(t,e):n}function tw(t,e){return t instanceof Mu?function(r){return wh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Du extends lc{}class xa extends lc{constructor(e){super(),this.elements=e}}function nw(t,e){const n=iw(e);for(const r of t.elements)n.some(i=>er(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ea extends lc{constructor(e){super(),this.elements=e}}function rw(t,e){let n=iw(e);for(const r of t.elements)n=n.filter(i=>!er(i,r));return{arrayValue:{values:n}}}class Mu extends lc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Wg(t){return et(t.integerValue||t.doubleValue)}function iw(t){return Hf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function US(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof xa&&i instanceof xa||r instanceof Ea&&i instanceof Ea?Bs(r.elements,i.elements,er):r instanceof Mu&&i instanceof Mu?er(r.Pe,i.Pe):r instanceof Du&&i instanceof Du}(t.transform,e.transform)}class zS{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ql(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class uc{}function sw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xf(t.key,Jn.none()):new Ua(t.key,t.data,Jn.none());{const n=t.data,r=In.empty();let i=new Tt(xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ki(t.key,r,new Ln(i.toArray()),Jn.none())}}function $S(t,e,n){t instanceof Ua?function(i,s,o){const l=i.value.clone(),u=Hg(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ki?function(i,s,o){if(!Ql(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Hg(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(ow(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Yo(t,e,n,r){return t instanceof Ua?function(s,o,l,u){if(!Ql(s.precondition,o))return l;const h=s.value.clone(),p=Gg(s.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ki?function(s,o,l,u){if(!Ql(s.precondition,o))return l;const h=Gg(s.fieldTransforms,u,o),p=o.data;return p.setAll(ow(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return Ql(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function BS(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=tw(r.transform,i||null);s!=null&&(n===null&&(n=In.empty()),n.set(r.field,s))}return n||null}function qg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bs(r,i,(s,o)=>US(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ua extends uc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ki extends uc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ow(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Hg(t,e,n){const r=new Map;be(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,FS(o,l,n[i]))}return r}function Gg(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,OS(s,o,e))}return r}class Xf extends uc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WS extends uc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&$S(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Yo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Yo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Z_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=sw(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&Bs(this.mutations,e.mutations,(n,r)=>qg(n,r))&&Bs(this.baseMutations,e.baseMutations,(n,r)=>qg(n,r))}}class Jf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){be(e.mutations.length===r.length);let i=function(){return DS}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Jf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt,we;function KS(t){switch(t){default:return ae();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function aw(t){if(t===void 0)return kr("GRPC error has no .code"),z.UNKNOWN;switch(t){case rt.OK:return z.OK;case rt.CANCELLED:return z.CANCELLED;case rt.UNKNOWN:return z.UNKNOWN;case rt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case rt.INTERNAL:return z.INTERNAL;case rt.UNAVAILABLE:return z.UNAVAILABLE;case rt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case rt.NOT_FOUND:return z.NOT_FOUND;case rt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case rt.ABORTED:return z.ABORTED;case rt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case rt.DATA_LOSS:return z.DATA_LOSS;default:return ae()}}(we=rt||(rt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=new Di([4294967295,4294967295],0);function Kg(t){const e=QS().encode(t),n=new P_;return n.update(e),new Uint8Array(n.digest())}function Qg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Di([n,r],0),new Di([i,s],0)]}class Zf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mo(`Invalid padding: ${n}`);if(r<0)throw new Mo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Mo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Di.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Di.fromNumber(r)));return i.compare(YS)===1&&(i=new Di([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Kg(e),[r,i]=Qg(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Zf(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Kg(e),[r,i]=Qg(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Mo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,za.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cc(ce.min(),i,new Ke(ke),Sr(),ye())}}class za{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new za(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class lw{constructor(e,n){this.targetId=e,this.me=n}}class uw{constructor(e,n,r=kt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Yg{constructor(){this.fe=0,this.ge=Jg(),this.pe=kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),n=ye(),r=ye();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new za(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Jg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class XS{constructor(e){this.Le=e,this.Be=new Map,this.ke=Sr(),this.qe=Xg(),this.Qe=new Ke(ke)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Eh(s))if(r===0){const o=new re(s.path);this.Ue(n,o,Ut.newNoDocument(o,ce.min()))}else be(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Wi(r).toUint8Array()}catch(u){if(u instanceof U_)return $s("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Zf(o,i,s)}catch(u){return $s(u instanceof Mo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Eh(l.target)){const u=new re(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Ut.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ye();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new cc(e,n,this.Qe,this.ke,r);return this.ke=Sr(),this.qe=Xg(),this.Qe=new Ke(ke),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Yg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Tt(ke),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Yg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Xg(){return new Ke(re.comparator)}function Jg(){return new Ke(re.comparator)}const JS={asc:"ASCENDING",desc:"DESCENDING"},ZS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eA={and:"AND",or:"OR"};class tA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function kh(t,e){return t.useProto3Json||sc(e)?e:{value:e}}function Lu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nA(t,e){return Lu(t,e.toTimestamp())}function Zn(t){return be(!!t),ce.fromTimestamp(function(n){const r=di(n);return new ut(r.seconds,r.nanos)}(t))}function ep(t,e){return Sh(t,e).canonicalString()}function Sh(t,e){const n=function(i){return new Oe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function dw(t){const e=Oe.fromString(t);return be(gw(e)),e}function Ah(t,e){return ep(t.databaseId,e.path)}function od(t,e){const n=dw(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(fw(n))}function hw(t,e){return ep(t.databaseId,e)}function rA(t){const e=dw(t);return e.length===4?Oe.emptyPath():fw(e)}function Ch(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fw(t){return be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Zg(t,e,n){return{name:Ah(t,e),fields:n.value.mapValue.fields}}function iA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(be(p===void 0||typeof p=="string"),kt.fromBase64String(p||"")):(be(p===void 0||p instanceof Buffer||p instanceof Uint8Array),kt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?z.UNKNOWN:aw(h.code);return new Z(p,h.message||"")}(o);n=new uw(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=od(t,r.document.name),s=Zn(r.document.updateTime),o=r.document.createTime?Zn(r.document.createTime):ce.min(),l=new In({mapValue:{fields:r.document.fields}}),u=Ut.newFoundDocument(i,s,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Yl(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=od(t,r.document),s=r.readTime?Zn(r.readTime):ce.min(),o=Ut.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Yl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=od(t,r.document),s=r.removedTargetIds||[];n=new Yl([],s,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new GS(i,s),l=r.targetId;n=new lw(l,o)}}return n}function sA(t,e){let n;if(e instanceof Ua)n={update:Zg(t,e.key,e.value)};else if(e instanceof Xf)n={delete:Ah(t,e.key)};else if(e instanceof Ki)n={update:Zg(t,e.key,e.data),updateMask:pA(e.fieldMask)};else{if(!(e instanceof WS))return ae();n={verify:Ah(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Du)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof xa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ea)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Mu)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:nA(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function oA(t,e){return t&&t.length>0?(be(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Zn(i.updateTime):Zn(s);return o.isEqual(ce.min())&&(o=Zn(s)),new zS(o,i.transformResults||[])}(n,e))):[]}function aA(t,e){return{documents:[hw(t,e.path)]}}function lA(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hw(t,i);const s=function(h){if(h.length!==0)return mw(Fn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(p=>function(v){return{field:as(v.field),direction:dA(v.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=kh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function uA(t){let e=rA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){be(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const v=pw(m);return v instanceof Fn&&W_(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(v=>function(P){return new Nu(ls(P.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(m){let v;return v=typeof m=="object"?m.value:m,sc(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(m){const v=!!m.before,C=m.values||[];return new Pu(C,v)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const v=!m.before,C=m.values||[];return new Pu(C,v)}(n.endAt)),CS(e,i,o,s,l,"F",u,h)}function cA(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ls(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ls(n.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ls(n.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ls(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return st.create(ls(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fn.create(n.compositeFilter.filters.map(r=>pw(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function dA(t){return JS[t]}function hA(t){return ZS[t]}function fA(t){return eA[t]}function as(t){return{fieldPath:t.canonicalString()}}function ls(t){return xt.fromServerFormat(t.fieldPath)}function mw(t){return t instanceof st?function(n){if(n.op==="=="){if(Fg(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NAN"}};if(Og(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Fg(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NAN"}};if(Og(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:as(n.field),op:hA(n.op),value:n.value}}}(t):t instanceof Fn?function(n){const r=n.getFilters().map(i=>mw(i));return r.length===1?r[0]:{compositeFilter:{op:fA(n.op),filters:r}}}(t):ae()}function pA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,r,i,s=ce.min(),o=ce.min(),l=kt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.ct=e}}function gA(t){const e=uA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ih(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.un=new vA}addToCollectionParentIndex(e,n){return this.un.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(ci.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(ci.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class vA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Tt(Oe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tt(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Hs(0)}static kn(){return new Hs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(){this.changes=new ro(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Yo(r.mutation,i,Ln.empty(),ut.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const i=Ri();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Do();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ri();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Sr();const o=Qo(),l=function(){return Qo()}();return n.forEach((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Ki)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Yo(p.mutation,h,p.mutation.getFieldMask(),ut.now())):o.set(h.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new wA(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Qo();let i=new Ke((o,l)=>o-l),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||Ln.empty();p=l.applyToLocalView(h,p),r.set(u,p);const m=(i.get(l.batchId)||ye()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,m=Z_();p.forEach(v=>{if(!s.has(v)){const C=sw(n.get(v),r.get(v));C!==null&&m.set(v,C),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):K_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):$.resolve(Ri());let l=-1,u=s;return o.next(h=>$.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(p)?$.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{u=u.insert(p,v)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ye())).next(p=>({batchId:l,changes:J_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let i=Do();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Do();return this.indexManager.getCollectionParents(e,s).next(l=>$.forEach(l,u=>{const h=function(m,v){return new Fa(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Ut.newInvalidDocument(p)))});let l=Do();return o.forEach((u,h)=>{const p=s.get(u);p!==void 0&&Yo(p.mutation,h,Ln.empty(),ut.now()),ac(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return $.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Zn(i.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:gA(i.bundledQuery),readTime:Zn(i.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.overlays=new Ke(re.comparator),this.Ir=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ri();return $.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const i=Ri(),s=n.length+1,o=new re(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ke((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=Ri(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Ri(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=i)););return $.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new HS(n,r));let s=this.Ir.get(n);s===void 0&&(s=ye(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){this.Tr=new Tt(dt.Er),this.dr=new Tt(dt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new dt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new dt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new re(new Oe([])),r=new dt(n,e),i=new dt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new re(new Oe([])),r=new dt(n,e),i=new dt(n,e+1);let s=ye();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new dt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return re.comparator(e.key,n.key)||ke(e.wr,n.wr)}static Ar(e,n){return ke(e.wr,n.wr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Tt(dt.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qS(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new dt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dt(n,0),i=new dt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Tt(ke);return n.forEach(i=>{const s=new dt(i,0),o=new dt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;re.isDocumentKey(s)||(s=s.child(""));const o=new dt(new re(s),0);let l=new Tt(ke);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.wr)),!0)},o),$.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){be(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(n.mutations,i=>{const s=new dt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new dt(n,0),i=this.br.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.Mr=e,this.docs=function(){return new Ke(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=Sr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ut.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Sr();const o=n.path,l=new re(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||uS(lS(p),r)<=0||(i.has(p.key)||ac(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae()}Or(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new AA(this)}getSize(e){return $.resolve(this.size)}}class AA extends _A{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.persistence=e,this.Nr=new ro(n=>Gf(n),Kf),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new tp,this.targetCount=0,this.kr=Hs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),$.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Hs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Kn(n),$.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),$.waitFor(s).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Bf(0),this.Kr=!1,this.Kr=!0,this.$r=new IA,this.referenceDelegate=e(this),this.Ur=new CA(this),this.indexManager=new yA,this.remoteDocumentCache=function(i){return new SA(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new mA(n),this.Gr=new EA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new kA(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new RA(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return $.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class RA extends dS{constructor(e){super(),this.currentSequenceNumber=e}}class np{constructor(e){this.persistence=e,this.Jr=new tp,this.Yr=null}static Zr(e){return new np(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),$.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,r=>{const i=re.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return $.or([()=>$.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ye(),i=ye();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new rp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return PT()?8:hS($t())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new PA;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ao()<=_e.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",os(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(Ao()<=_e.DEBUG&&J("QueryEngine","Query:",os(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ao()<=_e.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",os(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xn(n))):$.resolve())}Yi(e,n){if(Bg(n))return $.resolve(null);let r=Xn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ih(n,null,"F"),r=Xn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ye(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,Ih(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return Bg(n)||i.isEqual(ce.min())?$.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?$.resolve(null):(Ao()<=_e.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),os(n)),this.rs(e,o,n,aS(i,-1)).next(l=>l))})}ts(e,n){let r=new Tt(Y_(e));return n.forEach((i,s)=>{ac(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ao()<=_e.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",os(n)),this.Ji.getDocumentsMatchingQuery(e,n,ci.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ke(ke),this._s=new ro(s=>Gf(s),Kf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function MA(t,e,n,r){return new DA(t,e,n,r)}async function yw(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ye();for(const h of i){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function LA(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const m=h.batch,v=m.keys();let C=$.resolve();return v.forEach(P=>{C=C.next(()=>p.getEntry(u,P)).next(M=>{const V=h.docVersions.get(P);be(V!==null),M.version.compareTo(V)<0&&(m.applyToRemoteDocument(M,h),M.isValidDocument()&&(M.setReadTime(h.commitVersion),p.addEntry(M)))})}),C.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ye();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function vw(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function jA(t,e){const n=de(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const v=i.get(m);if(!v)return;l.push(n.Ur.removeMatchingKeys(s,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,p.addedDocuments,m)));let C=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?C=C.withResumeToken(kt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):p.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(p.resumeToken,r)),i=i.insert(m,C),function(M,V,A){return M.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(v,C,p)&&l.push(n.Ur.updateTargetData(s,C))});let u=Sr(),h=ye();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(VA(s,o,e.documentUpdates).next(p=>{u=p.Ps,h=p.Is})),!r.isEqual(ce.min())){const p=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(p)}return $.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.os=i,s))}function VA(t,e,n){let r=ye(),i=ye();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Sr();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):J("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function OA(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function FA(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,$.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Kr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function bh(t,e,n){const r=de(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Oa(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function ey(t,e,n){const r=de(t);let i=ce.min(),s=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const m=de(u),v=m._s.get(p);return v!==void 0?$.resolve(m.os.get(v)):m.Ur.getTargetData(h,p)}(r,o,Xn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ce.min(),n?s:ye())).next(l=>(UA(r,RS(e),l),{documents:l,Ts:s})))}function UA(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class ty{constructor(){this.activeTargetIds=jS()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zA{constructor(){this.so=new ty,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ty,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bl=null;function ad(){return bl===null?bl=function(){return 268435456+Math.round(2147483648*Math.random())}():bl++,"0x"+bl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class qA extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=ad(),u=this.xo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,u,h,i).then(p=>(J("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw $s("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",i),p})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+to}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=BA[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=ad();return new Promise((o,l)=>{const u=new N_;u.setWithCredentials(!0),u.listenOnce(D_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Gl.NO_ERROR:const p=u.getResponseJson();J(jt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case Gl.TIMEOUT:J(jt,`RPC '${e}' ${s} timed out`),l(new Z(z.DEADLINE_EXCEEDED,"Request time out"));break;case Gl.HTTP_ERROR:const m=u.getStatus();if(J(jt,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const C=v==null?void 0:v.error;if(C&&C.status&&C.message){const P=function(V){const A=V.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(A)>=0?A:z.UNKNOWN}(C.status);l(new Z(P,C.message))}else l(new Z(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Z(z.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{J(jt,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);J(jt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=ad(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=j_(),l=L_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=s.join("");J(jt,`Creating RPC '${e}' stream ${i}: ${p}`,u);const m=o.createWebChannel(p,u);let v=!1,C=!1;const P=new WA({Io:V=>{C?J(jt,`Not sending because RPC '${e}' stream ${i} is closed:`,V):(v||(J(jt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),J(jt,`RPC '${e}' stream ${i} sending:`,V),m.send(V))},To:()=>m.close()}),M=(V,A,T)=>{V.listen(A,x=>{try{T(x)}catch(D){setTimeout(()=>{throw D},0)}})};return M(m,No.EventType.OPEN,()=>{C||(J(jt,`RPC '${e}' stream ${i} transport opened.`),P.yo())}),M(m,No.EventType.CLOSE,()=>{C||(C=!0,J(jt,`RPC '${e}' stream ${i} transport closed`),P.So())}),M(m,No.EventType.ERROR,V=>{C||(C=!0,$s(jt,`RPC '${e}' stream ${i} transport errored:`,V),P.So(new Z(z.UNAVAILABLE,"The operation could not be completed")))}),M(m,No.EventType.MESSAGE,V=>{var A;if(!C){const T=V.data[0];be(!!T);const x=T,D=x.error||((A=x[0])===null||A===void 0?void 0:A.error);if(D){J(jt,`RPC '${e}' stream ${i} received error:`,D);const F=D.status;let B=function(w){const E=rt[w];if(E!==void 0)return aw(E)}(F),I=D.message;B===void 0&&(B=z.INTERNAL,I="Unknown error status: "+F+" with message "+D.message),C=!0,P.So(new Z(B,I)),m.close()}else J(jt,`RPC '${e}' stream ${i} received:`,T),P.bo(T)}}),M(l,M_.STAT_EVENT,V=>{V.stat===vh.PROXY?J(jt,`RPC '${e}' stream ${i} detected buffering proxy`):V.stat===vh.NOPROXY&&J(jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}function ld(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){return new tA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new _w(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(kr(n.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Z(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HA extends ww{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=iA(this.serializer,e),r=function(s){if(!("targetChange"in s))return ce.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?Zn(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Ch(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Eh(u)?{documents:aA(s,u)}:{query:lA(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=cw(s,o.resumeToken);const h=kh(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ce.min())>0){l.readTime=Lu(s,o.snapshotVersion.toTimestamp());const h=kh(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=cA(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Ch(this.serializer),n.removeTarget=e,this.a_(n)}}class GA extends ww{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return be(!!e.streamToken),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=oA(e.writeResults,e.commitTime),r=Zn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Ch(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sA(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Sh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Z(z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Sh(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class QA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(kr(n),this.D_=!1):J("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Qi(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=de(u);h.L_.add(4),await $a(h),h.q_.set("Unknown"),h.L_.delete(4),await hc(h)}(this))})}),this.q_=new QA(r,i)}}async function hc(t){if(Qi(t))for(const e of t.B_)await e(!0)}async function $a(t){for(const e of t.B_)await e(!1)}function xw(t,e){const n=de(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ap(n)?op(n):io(n).r_()&&sp(n,e))}function ip(t,e){const n=de(t),r=io(n);n.N_.delete(e),r.r_()&&Ew(n,e),n.N_.size===0&&(r.r_()?r.o_():Qi(n)&&n.q_.set("Unknown"))}function sp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}io(t).A_(e)}function Ew(t,e){t.Q_.xe(e),io(t).R_(e)}function op(t){t.Q_=new XS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),io(t).start(),t.q_.v_()}function ap(t){return Qi(t)&&!io(t).n_()&&t.N_.size>0}function Qi(t){return de(t).L_.size===0}function Tw(t){t.Q_=void 0}async function XA(t){t.q_.set("Online")}async function JA(t){t.N_.forEach((e,n)=>{sp(t,e)})}async function ZA(t,e){Tw(t),ap(t)?(t.q_.M_(e),op(t)):t.q_.set("Unknown")}async function eC(t,e,n){if(t.q_.set("Online"),e instanceof uw&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ju(t,r)}else if(e instanceof Yl?t.Q_.Ke(e):e instanceof lw?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const r=await vw(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.N_.get(h);p&&s.N_.set(h,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const p=s.N_.get(u);if(!p)return;s.N_.set(u,p.withResumeToken(kt.EMPTY_BYTE_STRING,p.snapshotVersion)),Ew(s,u);const m=new Kr(p.target,u,h,p.sequenceNumber);sp(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await ju(t,r)}}async function ju(t,e,n){if(!Oa(e))throw e;t.L_.add(1),await $a(t),t.q_.set("Offline"),n||(n=()=>vw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await hc(t)})}function Iw(t,e){return e().catch(n=>ju(t,n,e))}async function fc(t){const e=de(t),n=hi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tC(e);)try{const i=await OA(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,nC(e,i)}catch(i){await ju(e,i)}kw(e)&&Sw(e)}function tC(t){return Qi(t)&&t.O_.length<10}function nC(t,e){t.O_.push(e);const n=hi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function kw(t){return Qi(t)&&!hi(t).n_()&&t.O_.length>0}function Sw(t){hi(t).start()}async function rC(t){hi(t).p_()}async function iC(t){const e=hi(t);for(const n of t.O_)e.m_(n.mutations)}async function sC(t,e,n){const r=t.O_.shift(),i=Jf.from(r,e,n);await Iw(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await fc(t)}async function oC(t,e){e&&hi(t).V_&&await async function(r,i){if(function(o){return KS(o)&&o!==z.ABORTED}(i.code)){const s=r.O_.shift();hi(r).s_(),await Iw(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await fc(r)}}(t,e),kw(t)&&Sw(t)}async function ry(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=Qi(n);n.L_.add(3),await $a(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await hc(n)}async function aC(t,e){const n=de(t);e?(n.L_.delete(2),await hc(n)):e||(n.L_.add(2),await $a(n),n.q_.set("Unknown"))}function io(t){return t.K_||(t.K_=function(n,r,i){const s=de(n);return s.w_(),new HA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:XA.bind(null,t),Ro:JA.bind(null,t),mo:ZA.bind(null,t),d_:eC.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ap(t)?op(t):t.q_.set("Unknown")):(await t.K_.stop(),Tw(t))})),t.K_}function hi(t){return t.U_||(t.U_=function(n,r,i){const s=de(n);return s.w_(),new GA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:rC.bind(null,t),mo:oC.bind(null,t),f_:iC.bind(null,t),g_:sC.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await fc(t)):(await t.U_.stop(),t.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new lp(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function up(t,e){if(kr("AsyncQueue",`${e}: ${t}`),Oa(t))return new Z(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=Do(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new Ns(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ns)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ns;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(){this.W_=new Ke(re.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Gs{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Gs(e,n,Ns.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class uC{constructor(){this.queries=sy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=de(n),s=i.queries;i.queries=sy(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Z(z.ABORTED,"Firestore shutting down"))}}function sy(){return new ro(t=>Q_(t),oc)}async function cC(t,e){const n=de(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new lC,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=up(o,`Initialization of query '${os(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&cp(n)}async function dC(t,e){const n=de(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hC(t,e){const n=de(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&cp(n)}function fC(t,e,n){const r=de(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function cp(t){t.Y_.forEach(e=>{e.next()})}var Rh,oy;(oy=Rh||(Rh={})).ea="default",oy.Cache="cache";class pC{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Gs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Gs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Rh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this.key=e}}class Cw{constructor(e){this.key=e}}class mC{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=Y_(e),this.Ra=new Ns(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new iy,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{const v=i.get(p),C=ac(this.query,m)?m:null,P=!!v&&this.mutatedKeys.has(v.key),M=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let V=!1;v&&C?v.data.isEqual(C.data)?P!==M&&(r.track({type:3,doc:C}),V=!0):this.ga(v,C)||(r.track({type:2,doc:C}),V=!0,(u&&this.Aa(C,u)>0||h&&this.Aa(C,h)<0)&&(l=!0)):!v&&C?(r.track({type:0,doc:C}),V=!0):v&&!C&&(r.track({type:1,doc:v}),V=!0,(u||h)&&(l=!0)),V&&(C?(o=o.add(C),s=M?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(C,P){const M=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return M(C)-M(P)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new Gs(this.query,e.Ra,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new iy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ye(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Cw(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Aw(r))}),n}ba(e){this.Ta=e.Ts,this.da=ye();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Gs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class gC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class yC{constructor(e){this.key=e,this.va=!1}}class vC{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ro(l=>Q_(l),oc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ke(re.comparator),this.Na=new Map,this.La=new tp,this.Ba={},this.ka=new Map,this.qa=Hs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function _C(t,e,n=!0){const r=Mw(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await bw(r,e,n,!0),i}async function wC(t,e){const n=Mw(t);await bw(n,e,!0,!1)}async function bw(t,e,n,r){const i=await FA(t.localStore,Xn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await xC(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&xw(t.remoteStore,i),l}async function xC(t,e,n,r,i){t.Ka=(m,v,C)=>async function(M,V,A,T){let x=V.view.ma(A);x.ns&&(x=await ey(M.localStore,V.query,!1).then(({documents:I})=>V.view.ma(I,x)));const D=T&&T.targetChanges.get(V.targetId),F=T&&T.targetMismatches.get(V.targetId)!=null,B=V.view.applyChanges(x,M.isPrimaryClient,D,F);return ly(M,V.targetId,B.wa),B.snapshot}(t,m,v,C);const s=await ey(t.localStore,e,!0),o=new mC(e,s.Ts),l=o.ma(s.documents),u=za.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);ly(t,n,h.wa);const p=new gC(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function EC(t,e,n){const r=de(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!oc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await bh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ip(r.remoteStore,i.targetId),Ph(r,i.targetId)}).catch(Va)):(Ph(r,i.targetId),await bh(r.localStore,i.targetId,!0))}async function TC(t,e){const n=de(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ip(n.remoteStore,r.targetId))}async function IC(t,e,n){const r=PC(t);try{const i=await function(o,l){const u=de(o),h=ut.now(),p=l.reduce((C,P)=>C.add(P.key),ye());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",C=>{let P=Sr(),M=ye();return u.cs.getEntries(C,p).next(V=>{P=V,P.forEach((A,T)=>{T.isValidDocument()||(M=M.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(C,P)).next(V=>{m=V;const A=[];for(const T of l){const x=BS(T,m.get(T.key).overlayedDocument);x!=null&&A.push(new Ki(T.key,x,z_(x.value.mapValue),Jn.exists(!0)))}return u.mutationQueue.addMutationBatch(C,h,A,l)}).next(V=>{v=V;const A=V.applyToLocalDocumentSet(m,M);return u.documentOverlayCache.saveOverlays(C,V.batchId,A)})}).then(()=>({batchId:v.batchId,changes:J_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Ke(ke)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await Ba(r,i.changes),await fc(r.remoteStore)}catch(i){const s=up(i,"Failed to persist write");n.reject(s)}}async function Rw(t,e){const n=de(t);try{const r=await jA(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?be(o.va):i.removedDocuments.size>0&&(be(o.va),o.va=!1))}),await Ba(n,r,e)}catch(r){await Va(r)}}function ay(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=de(o);u.onlineState=l;let h=!1;u.queries.forEach((p,m)=>{for(const v of m.j_)v.Z_(l)&&(h=!0)}),h&&cp(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kC(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ke(re.comparator);o=o.insert(s,Ut.newNoDocument(s,ce.min()));const l=ye().add(s),u=new cc(ce.min(),new Map,new Ke(ke),o,l);await Rw(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),dp(r)}else await bh(r.localStore,e,!1).then(()=>Ph(r,e,n)).catch(Va)}async function SC(t,e){const n=de(t),r=e.batch.batchId;try{const i=await LA(n.localStore,e);Nw(n,r,null),Pw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ba(n,i)}catch(i){await Va(i)}}async function AC(t,e,n){const r=de(t);try{const i=await function(o,l){const u=de(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(be(m!==null),p=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);Nw(r,e,n),Pw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ba(r,i)}catch(i){await Va(i)}}function Pw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Nw(t,e,n){const r=de(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ph(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Dw(t,r)})}function Dw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ip(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),dp(t))}function ly(t,e,n){for(const r of n)r instanceof Aw?(t.La.addReference(r.key,e),CC(t,r)):r instanceof Cw?(J("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Dw(t,r.key)):ae()}function CC(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(J("SyncEngine","New document in limbo: "+n),t.xa.add(r),dp(t))}function dp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new re(Oe.fromString(e)),r=t.qa.next();t.Na.set(r,new yC(n)),t.Oa=t.Oa.insert(n,r),xw(t.remoteStore,new Kr(Xn(Qf(n.path)),r,"TargetPurposeLimboResolution",Bf.oe))}}async function Ba(t,e,n){const r=de(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){i.push(h);const m=rp.Wi(u.targetId,h);s.push(m)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,h){const p=de(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>$.forEach(h,v=>$.forEach(v.$i,C=>p.persistence.referenceDelegate.addReference(m,v.targetId,C)).next(()=>$.forEach(v.Ui,C=>p.persistence.referenceDelegate.removeReference(m,v.targetId,C)))))}catch(m){if(!Oa(m))throw m;J("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const v=m.targetId;if(!m.fromCache){const C=p.os.get(v),P=C.snapshotVersion,M=C.withLastLimboFreeSnapshotVersion(P);p.os=p.os.insert(v,M)}}}(r.localStore,s))}async function bC(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await yw(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new Z(z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ba(n,r.hs)}}function RC(t,e){const n=de(t),r=n.Na.get(e);if(r&&r.va)return ye().add(r.key);{let i=ye();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function Mw(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kC.bind(null,e),e.Ca.d_=hC.bind(null,e.eventManager),e.Ca.$a=fC.bind(null,e.eventManager),e}function PC(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AC.bind(null,e),e}class Vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return MA(this.persistence,new NA,e.initialUser,this.serializer)}Ga(e){return new bA(np.Zr,this.serializer)}Wa(e){return new zA}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vu.provider={build:()=>new Vu};class Nh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ay(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bC.bind(null,this.syncEngine),await aC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uC}()}createDatastore(e){const n=dc(e.databaseInfo.databaseId),r=function(s){return new qA(s)}(e.databaseInfo);return function(s,o,l,u){return new KA(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new YA(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>ay(this.syncEngine,n,0),function(){return ny.D()?new ny:new $A}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,p){const m=new vC(i,s,o,l,u,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=de(i);J("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await $a(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Nh.provider={build:()=>new Nh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ot.UNAUTHENTICATED,this.clientId=O_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{J("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=up(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ud(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await yw(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await MC(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ry(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ry(e.remoteStore,i)),t._onlineComponents=e}async function MC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await ud(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;$s("Error using user provided cache. Falling back to memory cache: "+n),await ud(t,new Vu)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await ud(t,new Vu);return t._offlineComponents}async function Lw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await uy(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await uy(t,new Nh))),t._onlineComponents}function LC(t){return Lw(t).then(e=>e.syncEngine)}async function cy(t){const e=await Lw(t),n=e.eventManager;return n.onListen=_C.bind(null,e.syncEngine),n.onUnlisten=EC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=wC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TC.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t,e,n){if(!n)throw new Z(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jC(t,e,n,r){if(e===!0&&r===!0)throw new Z(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hy(t){if(!re.isDocumentKey(t))throw new Z(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fy(t){if(re.isDocumentKey(t))throw new Z(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function Li(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pc(t);throw new Z(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new py({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new py(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new J2;switch(r.type){case"firstParty":return new nS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=dy.get(n);r&&(J("ComponentProvider","Removing Datastore"),dy.delete(n),r.terminate())}(this),Promise.resolve()}}function VC(t,e,n,r={}){var i;const s=(t=Li(t,mc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&$s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Ot.MOCK_USER;else{l=IT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Z(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ot(h)}t._authCredentials=new Z2(new V_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new so(this.firestore,e,this._query)}}class sn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class oi extends so{constructor(e,n,r){super(e,n,Qf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new re(e))}withConverter(e){return new oi(this.firestore,e,this._path)}}function OC(t,e,...n){if(t=on(t),Vw("collection","path",e),t instanceof mc){const r=Oe.fromString(e,...n);return fy(r),new oi(t,null,r)}{if(!(t instanceof sn||t instanceof oi))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return fy(r),new oi(t.firestore,null,r)}}function my(t,e,...n){if(t=on(t),arguments.length===1&&(e=O_.newId()),Vw("doc","path",e),t instanceof mc){const r=Oe.fromString(e,...n);return hy(r),new sn(t,null,new re(r))}{if(!(t instanceof sn||t instanceof oi))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return hy(r),new sn(t.firestore,t instanceof oi?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new _w(this,"async_queue_retry"),this.Vu=()=>{const r=ld();r&&J("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ld();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ld();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Mi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Oa(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw kr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=lp.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function yy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ta extends mc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new gy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gy(e),this._firestoreClient=void 0,await e}}}function FC(t,e){const n=typeof t=="object"?t:Nf(),r=typeof t=="string"?t:"(default)",i=Pf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=ET("firestore");s&&VC(i,...s)}return i}function Ow(t){if(t._terminated)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UC(t),t._firestoreClient}function UC(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,p){return new mS(l,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,jw(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new DC(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ks(kt.fromBase64String(e))}catch(n){throw new Z(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ks(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=/^__.*__$/;class $C{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ki(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ua(e,this.data,n,this.fieldTransforms)}}function Uw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class mp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new mp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ou(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Uw(this.Cu)&&zC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class BC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dc(e)}Qu(e,n,r,i=!1){return new mp({Cu:e,methodName:n,qu:r,path:xt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zw(t){const e=t._freezeSettings(),n=dc(t._databaseId);return new BC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function WC(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Ww("Data must be an object, but it was:",o,r);const l=$w(r,o);let u,h;if(s.merge)u=new Ln(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const v=HC(e,m,n);if(!o.contains(v))throw new Z(z.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);KC(p,v)||p.push(v)}u=new Ln(p),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new $C(new In(l),u,h)}function qC(t,e,n,r=!1){return gp(n,t.Qu(r?4:3,e))}function gp(t,e){if(Bw(t=on(t)))return Ww("Unsupported field value:",e,t),$w(t,e);if(t instanceof Fw)return function(r,i){if(!Uw(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=gp(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=on(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ut.fromDate(r);return{timestampValue:Lu(i.serializer,s)}}if(r instanceof ut){const s=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lu(i.serializer,s)}}if(r instanceof fp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ks)return{bytesValue:cw(i.serializer,r._byteString)};if(r instanceof sn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ep(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof pp)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Yf(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${pc(r)}`)}(t,e)}function $w(t,e){const n={};return F_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(t,(r,i)=>{const s=gp(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Bw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ut||t instanceof fp||t instanceof Ks||t instanceof sn||t instanceof Fw||t instanceof pp)}function Ww(t,e,n){if(!Bw(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=pc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function HC(t,e,n){if((e=on(e))instanceof hp)return e._internalPath;if(typeof e=="string")return qw(t,e);throw Ou("Field path arguments must be of type string or ",t,!1,void 0,n)}const GC=new RegExp("[~\\*/\\[\\]]");function qw(t,e,n){if(e.search(GC)>=0)throw Ou(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hp(...e.split("."))._internalPath}catch{throw Ou(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ou(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Z(z.INVALID_ARGUMENT,l+t+u)}function KC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QC extends Hw{data(){return super.data()}}function Gw(t,e){return typeof e=="string"?qw(t,e):e instanceof hp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yp{}class XC extends yp{}function JC(t,e,...n){let r=[];e instanceof yp&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof _p).length,l=s.filter(u=>u instanceof vp).length;if(o>1||o>0&&l>0)throw new Z(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class vp extends XC{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new vp(e,n,r)}_apply(e){const n=this._parse(e);return Kw(e._query,n),new so(e.firestore,e.converter,Th(e._query,n))}_parse(e){const n=zw(e.firestore);return function(s,o,l,u,h,p,m){let v;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Z(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){_y(m,p);const C=[];for(const P of m)C.push(vy(u,s,P));v={arrayValue:{values:C}}}else v=vy(u,s,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||_y(m,p),v=qC(l,o,m,p==="in"||p==="not-in");return st.create(h,p,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class _p extends yp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _p(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)Kw(o,u),o=Th(o,u)}(e._query,n),new so(e.firestore,e.converter,Th(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function vy(t,e,n){if(typeof(n=on(n))=="string"){if(n==="")throw new Z(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!K_(e)&&n.indexOf("/")!==-1)throw new Z(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!re.isDocumentKey(r))throw new Z(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vg(t,new re(r))}if(n instanceof sn)return Vg(t,n._key);throw new Z(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pc(n)}.`)}function _y(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Kw(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ZC{convertValue(e,n="none"){switch(qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return no(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>et(o.doubleValue));return new pp(s)}convertGeoPoint(e){return new fp(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(va(e));default:return null}}convertTimestamp(e){const n=di(e);return new ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);be(gw(r));const i=new _a(r.get(1),r.get(3)),s=new re(r.popFirst(5));return i.isEqual(n)||kr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qw extends Hw{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Gw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Xl extends Qw{data(e={}){return super.data(e)}}class tb{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Lo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Xl(this._firestore,this._userDataWriter,r.key,r,new Lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Xl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Lo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Xl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Lo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:nb(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}class Yw extends ZC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}}function rb(t,e,n){t=Li(t,sn);const r=Li(t.firestore,Ta),i=eb(t.converter,e);return Xw(r,[WC(zw(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Jn.none())])}function ib(t){return Xw(Li(t.firestore,Ta),[new Xf(t._key,Jn.none())])}function sb(t,...e){var n,r,i;t=on(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||yy(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(yy(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let u,h,p;if(t instanceof sn)h=Li(t.firestore,Ta),p=Qf(t._key.path),u={next:m=>{e[o]&&e[o](ob(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Li(t,so);h=Li(m.firestore,Ta),p=m._query;const v=new Yw(h);u={next:C=>{e[o]&&e[o](new tb(h,v,m,C))},error:e[o+1],complete:e[o+2]},YC(t._query)}return function(v,C,P,M){const V=new NC(M),A=new pC(C,V,P);return v.asyncQueue.enqueueAndForget(async()=>cC(await cy(v),A)),()=>{V.Za(),v.asyncQueue.enqueueAndForget(async()=>dC(await cy(v),A))}}(Ow(h),p,l,u)}function Xw(t,e){return function(r,i){const s=new Mi;return r.asyncQueue.enqueueAndForget(async()=>IC(await LC(r),i,s)),s.promise}(Ow(t),e)}function ob(t,e,n){const r=n.docs.get(e._key),i=new Yw(t);return new Qw(t,i,e._key,r,new Lo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){to=i})(Zs),zs(new zi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Ta(new eS(r.getProvider("auth-internal")),new iS(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Z(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _a(h.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),si(Ng,"4.7.3",e),si(Ng,"4.7.3","esm2017")})();const ft={marriage:{label:"Matrimonio",color:"#000000",lineStyle:"solid",renderType:"standard"},cohabitation:{label:"Convivenza",color:"#000000",lineStyle:"dashed",renderType:"standard"},separation:{label:"Separazione",color:"#000000",lineStyle:"solid",renderType:"oblique"},"separation-repaired":{label:"Separazione Riparata",color:"#000000",lineStyle:"solid",renderType:"x-cross"},"separation-cohab":{label:"Separazione (Conv.)",color:"#000000",lineStyle:"dashed",renderType:"oblique"},divorce:{label:"Divorzio",color:"#000000",lineStyle:"solid",renderType:"oblique-double"},"divorce-repaired":{label:"Divorzio Riparato",color:"#000000",lineStyle:"solid",renderType:"oblique-double-crossed"},"re-marriage":{label:"Risposati",color:"#000000",lineStyle:"solid",renderType:"standard"},affair:{label:"Relazione Extra/Amante",color:"#FFD700",lineStyle:"dotted",renderType:"standard"},"one-night":{label:"Avventura",color:"#FFD700",lineStyle:"dotted",renderType:"standard"},engagement:{label:"Fidanzamento",color:"#0000FF",lineStyle:"dashed",renderType:"standard"},"child-bio":{label:"Figlio Biologico",color:"#000000",lineStyle:"solid",renderType:"standard"},"child-adopted":{label:"Adozione",color:"#0000FF",lineStyle:"dotted",renderType:"standard"},"child-foster":{label:"Affido",color:"#000000",lineStyle:"dashed",renderType:"standard"},"twin-dizygotic":{label:"Gemelli Dizigoti",color:"#000000",lineStyle:"solid",renderType:"twin-link"},"twin-monozygotic":{label:"Gemelli Monozigoti",color:"#000000",lineStyle:"solid",renderType:"twin-link-bar"},pregnancy:{label:"Gravidanza",color:"#000000",lineStyle:"solid",renderType:"standard"},harmony:{label:"Armonia",color:"#008000",lineStyle:"solid",renderType:"standard"},friendship:{label:"Amicizia",color:"#008000",lineStyle:"dashed",renderType:"standard"},"best-friend":{label:"Migliore Amico",color:"#008000",lineStyle:"dotted",renderType:"double"},close:{label:"Molto Uniti",color:"#008000",lineStyle:"solid",renderType:"double"},fusion:{label:"Invischiamento (Fusione)",color:"#008000",lineStyle:"solid",renderType:"triple"},"in-love":{label:"Innamorati",color:"#008000",lineStyle:"solid",renderType:"two-circles-center"},fan:{label:"Ammiratore",color:"#008000",lineStyle:"dashed",renderType:"arrow"},spiritual:{label:"Conn. Spirituale",color:"#800080",lineStyle:"dashed",renderType:"standard"},hostile:{label:"Ostilit",color:"#FF0000",lineStyle:"dotted",renderType:"standard"},conflict:{label:"Conflitto",color:"#FF0000",lineStyle:"zigzag",renderType:"standard"},"fusion-hostile":{label:"Fusione & Conflitto",color:"#000000",lineStyle:"solid",renderType:"fusion-hostile"},"close-hostile":{label:"Uniti & Conflittuali",color:"#000000",lineStyle:"solid",renderType:"double-zigzag"},"distant-hostile":{label:"Distante & Ostile",color:"#FF0000",lineStyle:"dotted",renderType:"zigzag-overlay"},hate:{label:"Odio",color:"#FF0000",lineStyle:"solid",renderType:"triple-zigzag"},violence:{label:"Violenza",color:"#FF0000",lineStyle:"solid",renderType:"arrow-thick"},"abuse-physical":{label:"Abuso Fisico",color:"#800000",lineStyle:"solid",renderType:"arrow-thick"},"abuse-emotional":{label:"Abuso Emotivo",color:"#800000",lineStyle:"dashed",renderType:"arrow"},"abuse-sexual":{label:"Abuso Sessuale",color:"#FF0080",lineStyle:"solid",renderType:"arrow-double-bar-center"},neglect:{label:"Trascuratezza",color:"#808080",lineStyle:"dashed",renderType:"standard"},focused:{label:"Focalizzata Su",color:"#0000FF",lineStyle:"solid",renderType:"arrow-open"},manipulative:{label:"Manipolativo",color:"#FF0000",lineStyle:"solid",renderType:"arrow-x-center"},controlling:{label:"Controllante",color:"#800080",lineStyle:"solid",renderType:"arrow-box-center"},keeper:{label:"Custode/Caregiver",color:"#008080",lineStyle:"solid",renderType:"arrow-diamond-center"},distant:{label:"Distante",color:"#808080",lineStyle:"dotted",renderType:"standard"},poor:{label:"Povera",color:"#808080",lineStyle:"solid",renderType:"standard"},cutoff:{label:"Taglio",color:"#000000",lineStyle:"solid",renderType:"cutoff"},"cutoff-repaired":{label:"Taglio Riparato",color:"#000000",lineStyle:"solid",renderType:"cutoff-circle"},custom:{label:"Personalizzata",color:"#000000",lineStyle:"solid",renderType:"standard"}},ai={Struttura:["marriage","cohabitation","separation","separation-repaired","separation-cohab","divorce","divorce-repaired","re-marriage","engagement","affair","one-night"],Figli:["child-bio","child-adopted","child-foster","twin-dizygotic","twin-monozygotic","pregnancy"],"Legami Affettivi":["harmony","friendship","best-friend","close","fusion","in-love","fan","spiritual"],"Conflitto/Distanza":["hostile","conflict","fusion-hostile","close-hostile","distant-hostile","hate","distant","poor","cutoff","cutoff-repaired"],"Abuso/Potere":["abuse-physical","abuse-emotional","abuse-sexual","neglect","violence","manipulative","controlling","focused","keeper"],Altro:["custom"]},wy={home:ZE,heart:Fv,user:hT,users:Eu,grad:QE,book:zE,briefcase:$E,folder:KE,help:JE,tag:uh},ab=[{id:"family",label:"Famiglie",color:"#3b82f6",iconKey:"home"},{id:"couple",label:"Coppie",color:"#ec4899",iconKey:"heart"},{id:"individual",label:"Individuali",color:"#10b981",iconKey:"user"},{id:"school",label:"Scolastico",color:"#f59e0b",iconKey:"grad"},{id:"exercise",label:"Esercitazioni",color:"#6366f1",iconKey:"book"},{id:"work",label:"Lavoro/Org",color:"#64748b",iconKey:"briefcase"},{id:"other",label:"Altro",color:"#94a3b8",iconKey:"folder"}],Jt=20,jo=8e3,Vt=jo/2,Pn=40,lr=40,Qs=20,Jw=40,lb=Qs+Jw,Rl=40,ub=10,Ee=()=>Math.random().toString(36).substr(2,9),Zw=t=>{if(!t)return null;const e=t.split(/[\/\-\.]/);if(e.length===3){const n=parseInt(e[0]),r=parseInt(e[1])-1,i=parseInt(e[2]);if(!isNaN(n)&&!isNaN(r)&&!isNaN(i)){const s=i<100?i>30?1900+i:2e3+i:i;return new Date(s,r,n)}}return/^\d{4}$/.test(t)?new Date(parseInt(t),0,1):null},Ia=t=>{const e=Zw(t);if(!e)return"?";const n=new Date;let r=n.getFullYear()-e.getFullYear();const i=n.getMonth()-e.getMonth();return(i<0||i===0&&n.getDate()<e.getDate())&&r--,r.toString()},cd=(t,e)=>e.find(n=>(n.fromId===t||n.toId===t)&&["marriage","cohabitation","separation","divorce","affair","re-marriage"].includes(n.type)),cb=(t,e)=>Math.max(t,e)+Jw,us=(t,e)=>{const n=e.filter(l=>t.memberIds.includes(l.id));if(!n.length)return null;const r=Math.min(...n.map(l=>l.x)),i=Math.max(...n.map(l=>l.x+Pn)),s=Math.min(...n.map(l=>l.y)),o=Math.max(...n.map(l=>l.y+lr));return{x:r-Rl,y:s-Rl,w:i-r+Rl*2,h:o-s+Rl*2,cx:(r+i)/2,cy:(s+o)/2}},xy=(t,e,n)=>{const r=e.find(s=>s.id===t);if(r)return{x:r.x+Qs,y:r.y+Qs};const i=n.find(s=>s.id===t);if(i){const s=us(i,e);if(s)return{x:s.x+s.w/2,y:s.y+s.h/2}}return null},dd=(t,e)=>{const n=t.x+t.w/2,r=t.y+t.h/2,i=e.x-n,s=e.y-r;if(Math.abs(i)<.1&&Math.abs(s)<.1)return{x:n,y:r};const o=t.w/2/Math.abs(i),l=t.h/2/Math.abs(s),u=Math.min(o,l);return{x:n+i*u,y:r+s*u}},hd=(t,e,n,r,i=4,s=12)=>{const o=n-t,l=r-e,u=Math.sqrt(o*o+l*l);if(u===0)return`M ${t} ${e}`;const h=o/u,m=-(l/u),v=h;let C=`M ${t} ${e}`;const P=Math.floor(u/s);for(let M=1;M<=P;M++){const V=M/P,A=t+o*V,T=e+l*V,x=M%2===0?i:-i;C+=` L ${A+m*x} ${T+v*x}`}return C+=` L ${n} ${r}`,C},Ey=t=>{if(!t)return 0;const e=t.match(/\d{4}/);return e?parseInt(e[0]):0},db=({x:t,y:e,darkMode:n,nodes:r,edges:i})=>{const s=n?"#1f2937":"#ffffff",o=n?"#f3f4f6":"#1f2937",l=n?"#374151":"#e5e7eb",u=n?"#9ca3af":"#6b7280",h=Array.from(new Set(r.map(g=>g.gender))).sort(),p=r.some(g=>g.deceased),m=r.some(g=>g.indexPerson),v=Array.from(new Set(i.map(g=>g.type))).sort(),C=15,P=24,M=140,V=30,A=h.length+(p?1:0)+(m?1:0),T=v.length,x=A+T>8,D=x?M*2+C*3:M+C*2,F=V+C+Math.max(A,x?T:A+T)*P+(x?0:20),B=g=>{const w=o,E="none",b=1.5;return g==="M"?d.jsx("rect",{x:"2",y:"2",width:"12",height:"12",stroke:w,fill:E,strokeWidth:b}):g==="F"?d.jsx("circle",{cx:"8",cy:"8",r:"6",stroke:w,fill:E,strokeWidth:b}):g==="Pet"?d.jsx("path",{d:"M8 2 L14 8 L8 14 L2 8 Z",stroke:w,fill:E,strokeWidth:b}):g==="Pregnancy"?d.jsx("path",{d:"M8 2 L14 14 L2 14 Z",stroke:w,fill:E,strokeWidth:b}):d.jsx("text",{x:"8",y:"12",textAnchor:"middle",fontSize:"10",fill:w,fontFamily:"sans-serif",children:"?"})},I=g=>{const w=ft[g]||ft.custom;if(!w)return null;const E=w.color==="#000000"&&n?"#ffffff":w.color;let b=d.jsx("line",{x1:"0",y1:"8",x2:"30",y2:"8",stroke:E,strokeWidth:"2"});w.lineStyle==="dashed"&&(b=d.jsx("line",{x1:"0",y1:"8",x2:"30",y2:"8",stroke:E,strokeWidth:"2",strokeDasharray:"4,2"})),w.lineStyle==="dotted"&&(b=d.jsx("line",{x1:"0",y1:"8",x2:"30",y2:"8",stroke:E,strokeWidth:"2",strokeDasharray:"1,3"})),w.lineStyle==="zigzag"&&(b=d.jsx("path",{d:"M0 8 L5 4 L10 12 L15 4 L20 12 L25 4 L30 8",stroke:w.renderType.includes("hostile")?"red":E,fill:"none",strokeWidth:"1.5"}));let R=null;return g==="best-friend"?R=d.jsxs("g",{children:[d.jsx("line",{x1:"0",y1:"5",x2:"30",y2:"5",stroke:E,strokeWidth:"1"}),d.jsx("line",{x1:"0",y1:"11",x2:"30",y2:"11",stroke:E,strokeWidth:"1"})]}):w.renderType==="double"?R=d.jsxs("g",{children:[d.jsx("line",{x1:"0",y1:"5",x2:"30",y2:"5",stroke:E,strokeWidth:"1"}),d.jsx("line",{x1:"0",y1:"11",x2:"30",y2:"11",stroke:E,strokeWidth:"1"})]}):w.renderType==="triple"||w.renderType==="fusion"?R=d.jsxs("g",{children:[d.jsx("line",{x1:"0",y1:"4",x2:"30",y2:"4",stroke:E,strokeWidth:"1"}),d.jsx("line",{x1:"0",y1:"8",x2:"30",y2:"8",stroke:E,strokeWidth:"1"}),d.jsx("line",{x1:"0",y1:"12",x2:"30",y2:"12",stroke:E,strokeWidth:"1"})]}):w.renderType==="oblique"?R=d.jsx("line",{x1:"18",y1:"2",x2:"12",y2:"14",stroke:E,strokeWidth:"2"}):w.renderType==="oblique-double"?R=d.jsxs("g",{children:[d.jsx("line",{x1:"16",y1:"2",x2:"10",y2:"14",stroke:E,strokeWidth:"2"}),d.jsx("line",{x1:"20",y1:"2",x2:"14",y2:"14",stroke:E,strokeWidth:"2"})]}):w.renderType==="cutoff"&&(R=d.jsx("line",{x1:"15",y1:"2",x2:"15",y2:"14",stroke:E,strokeWidth:"2"})),d.jsxs("g",{transform:"translate(0, 2)",children:[b,R]})};return d.jsxs("g",{transform:`translate(${t}, ${e})`,children:[d.jsx("rect",{width:D,height:F,rx:"8",fill:s,stroke:l,strokeWidth:"1",filter:"drop-shadow(0 4px 6px rgb(0 0 0 / 0.1))"}),d.jsx("text",{x:C,y:22,fontWeight:"bold",fill:o,fontSize:"12",letterSpacing:"0.5px",fontFamily:"sans-serif",children:"LEGENDA"}),d.jsx("line",{x1:C,y1:V,x2:D-C,y2:V,stroke:l,strokeWidth:"1"}),d.jsxs("g",{transform:`translate(${C}, ${V+15})`,children:[d.jsxs("g",{children:[A>0&&d.jsx("text",{x:"0",y:"-5",fontSize:"9",fontWeight:"bold",fill:u,style:{textTransform:"uppercase"},fontFamily:"sans-serif",children:"Persone"}),h.map((g,w)=>d.jsxs("g",{transform:`translate(0, ${w*P})`,children:[B(g),d.jsx("text",{x:"25",y:"11",fill:o,fontSize:"11",fontFamily:"sans-serif",children:g==="M"?"Maschio":g==="F"?"Femmina":g})]},g)),p&&d.jsxs("g",{transform:`translate(0, ${h.length*P})`,children:[d.jsx("rect",{x:"2",y:"2",width:"12",height:"12",stroke:o,fill:"none"}),d.jsx("line",{x1:"2",y1:"2",x2:"14",y2:"14",stroke:o}),d.jsx("line",{x1:"14",y1:"2",x2:"2",y2:"14",stroke:o}),d.jsx("text",{x:"25",y:"11",fill:o,fontSize:"11",fontFamily:"sans-serif",children:"Deceduto"})]}),m&&d.jsxs("g",{transform:`translate(0, ${(h.length+(p?1:0))*P})`,children:[d.jsx("rect",{x:"2",y:"2",width:"12",height:"12",stroke:o,fill:"none"}),d.jsx("rect",{x:"4",y:"4",width:"8",height:"8",stroke:o,fill:"none"}),d.jsx("text",{x:"25",y:"11",fill:o,fontSize:"11",fontFamily:"sans-serif",children:"Paz. Designato"})]})]}),v.length>0&&d.jsxs("g",{transform:`translate(${x?M+C:0}, ${x?0:A*P+15})`,children:[d.jsx("text",{x:"0",y:"-5",fontSize:"9",fontWeight:"bold",fill:u,style:{textTransform:"uppercase"},fontFamily:"sans-serif",children:"Relazioni"}),v.map((g,w)=>{var b;const E=((b=ft[g])==null?void 0:b.label)||"Custom";return d.jsxs("g",{transform:`translate(0, ${w*P})`,children:[I(g),d.jsx("text",{x:"35",y:"11",fill:o,fontSize:"11",fontFamily:"sans-serif",children:E})]},g)})]})]})]})},Dh=({type:t})=>{const e=ft[t]||ft.custom;if(!e)return null;const n=e.color;return d.jsxs("svg",{width:"50",height:"14",className:"shrink-0 mr-2 bg-gray-50 dark:bg-gray-700 rounded border border-gray-100 dark:border-gray-600 overflow-visible",children:[e.lineStyle==="dashed"&&d.jsx("line",{x1:"0",y1:"7",x2:"50",y2:"7",stroke:n,strokeWidth:"2",strokeDasharray:"4,2"}),e.lineStyle==="dotted"&&d.jsx("line",{x1:"0",y1:"7",x2:"50",y2:"7",stroke:n,strokeWidth:"2",strokeDasharray:"1,3"}),e.lineStyle==="solid"&&!["fusion","double","triple","triple-zigzag","close-hostile"].includes(e.renderType)&&d.jsx("line",{x1:"0",y1:"7",x2:"50",y2:"7",stroke:n,strokeWidth:"2"}),e.lineStyle==="zigzag"&&d.jsx("path",{d:"M0 7 L5 3 L10 11 L15 3 L20 11 L25 3 L30 11 L35 3 L40 11 L45 3 L50 7",stroke:e.renderType==="fusion-hostile"?"red":n,fill:"none",strokeWidth:"1.5"}),(e.renderType==="fusion"||e.renderType==="triple")&&d.jsxs("g",{children:[d.jsx("line",{x1:"0",y1:"3",x2:"50",y2:"3",stroke:n,strokeWidth:"1.5"}),d.jsx("line",{x1:"0",y1:"7",x2:"50",y2:"7",stroke:n,strokeWidth:"1.5"}),d.jsx("line",{x1:"0",y1:"11",x2:"50",y2:"11",stroke:n,strokeWidth:"1.5"})]}),e.renderType==="triple-zigzag"&&d.jsxs("g",{children:[d.jsx("line",{x1:"0",y1:"3",x2:"50",y2:"3",stroke:n,strokeWidth:"1.5"}),d.jsx("line",{x1:"0",y1:"7",x2:"50",y2:"7",stroke:n,strokeWidth:"1.5"}),d.jsx("line",{x1:"0",y1:"11",x2:"50",y2:"11",stroke:n,strokeWidth:"1.5"}),d.jsx("path",{d:"M0 7 L5 3 L10 11 L15 3 L20 11 L25 3 L30 11 L35 3 L40 11 L45 3 L50 7",stroke:"red",fill:"none",strokeWidth:"1.5"})]}),(e.renderType==="double"||e.renderType==="best-friend")&&d.jsxs("g",{children:[d.jsx("line",{x1:"0",y1:"4",x2:"50",y2:"4",stroke:n,strokeWidth:"1.5"}),d.jsx("line",{x1:"0",y1:"10",x2:"50",y2:"10",stroke:n,strokeWidth:"1.5"})]}),e.renderType.includes("arrow")&&d.jsx("polygon",{points:"40,3 48,7 40,11",fill:n}),e.renderType==="oblique"&&d.jsx("line",{x1:"28",y1:"2",x2:"22",y2:"12",stroke:n,strokeWidth:"2"}),e.renderType==="oblique-double"&&d.jsxs("g",{children:[d.jsx("line",{x1:"26",y1:"2",x2:"20",y2:"12",stroke:n,strokeWidth:"2"}),d.jsx("line",{x1:"30",y1:"2",x2:"24",y2:"12",stroke:n,strokeWidth:"2"})]}),e.renderType==="x-cross"&&d.jsxs("g",{children:[d.jsx("line",{x1:"28",y1:"2",x2:"22",y2:"12",stroke:n,strokeWidth:"2"}),d.jsx("line",{x1:"22",y1:"2",x2:"28",y2:"12",stroke:n,strokeWidth:"2"})]}),e.renderType==="oblique-double-crossed"&&d.jsxs("g",{children:[d.jsx("line",{x1:"27",y1:"2",x2:"21",y2:"12",stroke:n,strokeWidth:"2"}),d.jsx("line",{x1:"33",y1:"2",x2:"27",y2:"12",stroke:n,strokeWidth:"2"}),d.jsx("line",{x1:"19",y1:"2",x2:"35",y2:"12",stroke:n,strokeWidth:"2"})]}),e.renderType==="arrow-x-center"&&d.jsxs("g",{children:[d.jsx("polygon",{points:"40,3 48,7 40,11",fill:n}),d.jsx("line",{x1:"22",y1:"4",x2:"28",y2:"10",stroke:n,strokeWidth:"2"}),d.jsx("line",{x1:"22",y1:"10",x2:"28",y2:"4",stroke:n,strokeWidth:"2"})]}),e.renderType==="arrow-box-center"&&d.jsxs("g",{children:[d.jsx("polygon",{points:"40,3 48,7 40,11",fill:n}),d.jsx("rect",{x:"20",y:"2",width:"10",height:"10",stroke:n,strokeWidth:"2",fill:"white"})]}),e.renderType==="arrow-diamond-center"&&d.jsxs("g",{children:[d.jsx("polygon",{points:"40,3 48,7 40,11",fill:n}),d.jsx("polygon",{points:"25,2 30,7 25,12 20,7",stroke:n,strokeWidth:"2",fill:"none"})]}),e.renderType==="arrow-double-bar-center"&&d.jsxs("g",{children:[d.jsx("polygon",{points:"40,3 48,7 40,11",fill:n}),d.jsx("line",{x1:"22",y1:"2",x2:"22",y2:"12",stroke:n,strokeWidth:"2"}),d.jsx("line",{x1:"26",y1:"2",x2:"26",y2:"12",stroke:n,strokeWidth:"2"})]}),e.renderType==="cutoff-double"&&d.jsxs("g",{children:[d.jsx("line",{x1:"22",y1:"2",x2:"22",y2:"12",stroke:n,strokeWidth:"2"}),d.jsx("line",{x1:"28",y1:"2",x2:"28",y2:"12",stroke:n,strokeWidth:"2"})]})]})},hb=({value:t,onChange:e,className:n})=>{const[r,i]=Q.useState(!1),s=ft[t]||ft.custom||{label:t};return d.jsxs("div",{className:`relative ${n}`,children:[d.jsxs("button",{onClick:()=>i(!r),className:"w-full flex items-center justify-between p-2 border rounded bg-white text-gray-900 dark:text-gray-100 dark:bg-gray-700 text-xs hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[d.jsxs("div",{className:"flex items-center overflow-hidden",children:[d.jsx(Dh,{type:t}),d.jsx("span",{className:"truncate",children:s.label})]}),d.jsx(Vv,{size:14,className:"opacity-50 shrink-0 ml-1"})]}),r&&d.jsxs("div",{className:"absolute top-full left-0 w-full mt-1 bg-white dark:bg-gray-800 border dark:border-gray-600 rounded shadow-xl max-h-60 overflow-y-auto z-50 text-gray-900 dark:text-gray-100 text-left",children:[Object.entries(ai).map(([o,l])=>d.jsxs("div",{children:[d.jsx("div",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-900 text-[9px] font-bold uppercase text-gray-500 sticky top-0 border-b border-gray-200 dark:border-gray-700",children:o}),l.map(u=>{const h=ft[u];return h?d.jsxs("button",{onClick:()=>{e(u),i(!1)},className:`w-full flex items-center p-2 text-xs hover:bg-blue-50 dark:hover:bg-blue-900/30 text-left border-b border-gray-50 dark:border-gray-700 ${t===u?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[d.jsx(Dh,{type:u}),d.jsx("span",{children:h.label})]},u):null})]},o)),d.jsx("div",{className:"p-1 sticky bottom-0 bg-white dark:bg-gray-800 border-t dark:border-gray-700",children:d.jsx("button",{onClick:()=>i(!1),className:"w-full py-1 text-center text-gray-400 hover:text-red-500 text-[10px]",children:"Chiudi"})})]})]})},fb=({edge:t,start:e,end:n,isSelected:r,darkMode:i,customConfig:s,onSelect:o,onAddChild:l})=>{let u=ft[t.type];!u&&s&&(u=s.config),u||(u={color:"#000",lineStyle:"solid",renderType:"standard"});const h=t.color||u.color,p=u.renderType,m=r?"#3b82f6":i&&h==="#000000"?"#ffffff":h,v=["marriage","separation","separation-repaired","separation-cohab","divorce","divorce-repaired","cohabitation","affair","re-marriage"].includes(t.type),C=cb(e.y,n.y);let P=(e.x+n.x)/2,M=(e.y+n.y)/2;v&&(M=C);let V="";v?V=`M ${e.x} ${e.y+Qs} L ${e.x} ${C} L ${n.x} ${C} L ${n.x} ${n.y+Qs}`:t.type.startsWith("child")||t.type.startsWith("twin")?t.type.startsWith("twin")?V=`M ${e.x} ${e.y} L ${n.x} ${n.y}`:V=`M ${e.x} ${e.y} L ${n.x} ${e.y} L ${n.x} ${n.y}`:u.lineStyle==="zigzag"?V=hd(e.x,e.y,n.x,n.y):V=`M ${e.x} ${e.y} Q ${P} ${M} ${n.x} ${n.y}`;const A=u.lineStyle==="dashed"?"8,4":u.lineStyle==="dotted"?"2,2":"0",T=()=>{let D=P,F=M;if(t.type==="best-friend")return d.jsxs("g",{children:[d.jsx("path",{d:V,stroke:m,strokeWidth:1,transform:"translate(3,3)",fill:"none"}),d.jsx("path",{d:V,stroke:m,strokeWidth:1,transform:"translate(-3,-3)",fill:"none"})]});if(p==="fusion"||p==="triple")return d.jsxs("g",{children:[d.jsx("path",{d:V,stroke:m,strokeWidth:1,transform:"translate(3,3)",fill:"none"}),d.jsx("path",{d:V,stroke:m,strokeWidth:1,transform:"translate(-3,-3)",fill:"none"})]});if(p==="fusion-hostile")return d.jsxs("g",{children:[d.jsx("path",{d:V,stroke:m,strokeWidth:1,transform:"translate(3,3)",fill:"none"}),d.jsx("path",{d:V,stroke:m,strokeWidth:1,transform:"translate(-3,-3)",fill:"none"}),d.jsx("path",{d:hd(e.x,e.y,n.x,n.y),stroke:"red",strokeWidth:1.5,fill:"none"})]});if(p==="triple-zigzag")return d.jsxs("g",{children:[d.jsx("path",{d:V,stroke:m,strokeWidth:1,transform:"translate(3,3)",fill:"none"}),d.jsx("path",{d:V,stroke:m,strokeWidth:1,transform:"translate(-3,-3)",fill:"none"}),d.jsx("path",{d:hd(e.x,e.y,n.x,n.y),stroke:"red",strokeWidth:1.5,fill:"none"})]});if(p==="double"||p==="double-zigzag"||p==="best-friend")return d.jsx("path",{d:V,stroke:m,strokeWidth:1,transform:"translate(3,3)",fill:"none",strokeDasharray:A});if(p==="oblique")return d.jsx("line",{x1:D+5,y1:F-10,x2:D-5,y2:F+10,stroke:m,strokeWidth:2});if(p==="oblique-double")return d.jsxs("g",{children:[d.jsx("line",{x1:D+2,y1:F-10,x2:D-8,y2:F+10,stroke:m,strokeWidth:2}),d.jsx("line",{x1:D+8,y1:F-10,x2:D-2,y2:F+10,stroke:m,strokeWidth:2})]});if(p==="x-cross")return d.jsxs("g",{children:[d.jsx("line",{x1:D+5,y1:F-10,x2:D-5,y2:F+10,stroke:m,strokeWidth:2}),d.jsx("line",{x1:D-5,y1:F-10,x2:D+5,y2:F+10,stroke:m,strokeWidth:2})]});if(p==="oblique-double-crossed")return d.jsxs("g",{children:[d.jsx("line",{x1:D+2,y1:F-10,x2:D-8,y2:F+10,stroke:m,strokeWidth:2}),d.jsx("line",{x1:D+8,y1:F-10,x2:D-2,y2:F+10,stroke:m,strokeWidth:2}),d.jsx("line",{x1:D-8,y1:F-10,x2:D+8,y2:F+10,stroke:m,strokeWidth:2})]});if(p==="cutoff-double")return d.jsxs("g",{children:[d.jsx("line",{x1:D-3,y1:F-10,x2:D-3,y2:F+10,stroke:m,strokeWidth:2}),d.jsx("line",{x1:D+3,y1:F-10,x2:D+3,y2:F+10,stroke:m,strokeWidth:2})]});if(p==="cutoff")return d.jsx("line",{x1:D,y1:F-10,x2:D,y2:F+10,stroke:m,strokeWidth:3});const B=v?0:Math.atan2(n.y-e.y,n.x-e.x)*180/Math.PI,I=`translate(${n.x},${n.y}) rotate(${B}) translate(-25,0)`,g=`translate(${P},${M}) rotate(${B})`;return p==="arrow-x-center"?d.jsxs("g",{children:[d.jsx("polygon",{points:"-6,-6 6,0 -6,6",fill:m,transform:I}),d.jsxs("g",{transform:g,children:[d.jsx("line",{x1:"-6",y1:"-6",x2:"6",y2:"6",stroke:m,strokeWidth:2}),d.jsx("line",{x1:"-6",y1:"6",x2:"6",y2:"-6",stroke:m,strokeWidth:2})]})]}):p==="arrow-box-center"?d.jsxs("g",{children:[d.jsx("polygon",{points:"-6,-6 6,0 -6,6",fill:m,transform:I}),d.jsx("rect",{x:"-6",y:"-6",width:"12",height:"12",stroke:m,strokeWidth:2,fill:"white",transform:g})]}):p==="arrow-diamond-center"?d.jsxs("g",{children:[d.jsx("polygon",{points:"-6,-6 6,0 -6,6",fill:m,transform:I}),d.jsx("polygon",{points:"0,-6 6,0 0,6 -6,0",stroke:m,strokeWidth:2,fill:"white",transform:g})]}):p==="arrow-double-bar-center"?d.jsxs("g",{children:[d.jsx("polygon",{points:"-6,-6 6,0 -6,6",fill:m,transform:I}),d.jsxs("g",{transform:g,children:[d.jsx("line",{x1:"-3",y1:"-8",x2:"-3",y2:"8",stroke:m,strokeWidth:2}),d.jsx("line",{x1:"3",y1:"-8",x2:"3",y2:"8",stroke:m,strokeWidth:2})]})]}):p.includes("arrow")&&!p.includes("center")&&!p.includes("thick")?d.jsx("g",{children:d.jsx("polygon",{points:"-6,-6 6,0 -6,6",fill:m,transform:I})}):p==="arrow-thick"?d.jsx("polygon",{points:"-8,-8 4,0 -8,8",fill:m,transform:I}):null},x=D=>{D.stopPropagation(),D.preventDefault(),l(D,t.id)};return d.jsxs("g",{className:"group hover:opacity-80 cursor-pointer",onClick:o,children:[d.jsx("path",{d:V,stroke:"transparent",strokeWidth:20,fill:"none"}),d.jsx("path",{d:V,stroke:m,strokeWidth:r?3:2,strokeDasharray:A,fill:"none"}),d.jsx(T,{}),t.label&&d.jsx("text",{x:P,y:M-15,textAnchor:"middle",fill:m,className:"text-[10px] bg-white dark:bg-gray-800 px-1",children:t.label}),r&&v&&d.jsxs("g",{transform:`translate(${P}, ${C})`,onMouseDown:x,onTouchStart:x,children:[d.jsx("circle",{r:12,fill:"#10b981",stroke:"white"}),d.jsx(tc,{size:12,x:-6,y:-6,stroke:"white",strokeWidth:3}),d.jsx("title",{children:"Aggiungi Figlio alla Coppia"})]})]})},pb=({node:t,isSelected:e,showLabelType:n,darkMode:r,onHandleDown:i,selectionMode:s})=>{const o=r?"#ffffff":"#000000",l=e||t.indexPerson?3:1.5,u=e?r?"#374151":"#e0f2fe":r?"#1f2937":"#ffffff",h=r?"#ffffff":"#000000",p=Pn,m=lr,v=Qs;let C;switch(t.gender){case"M":C=d.jsx("rect",{x:0,y:0,width:p,height:m,stroke:o,strokeWidth:l,fill:u});break;case"F":C=d.jsx("circle",{cx:p/2,cy:m/2,r:p/2,stroke:o,strokeWidth:l,fill:u});break;case"TransWoman":C=d.jsxs("g",{children:[d.jsx("rect",{x:0,y:0,width:p,height:m,stroke:o,strokeWidth:l,fill:u}),d.jsx("circle",{cx:p/2,cy:m/2,r:p/3,stroke:o,strokeWidth:1,fill:"none"})]});break;case"TransMan":C=d.jsxs("g",{children:[d.jsx("circle",{cx:p/2,cy:m/2,r:p/2,stroke:o,strokeWidth:l,fill:u}),d.jsx("rect",{x:10,y:10,width:p-20,height:m-20,stroke:o,strokeWidth:1,fill:"none"})]});break;case"NonBinary":C=d.jsx("polygon",{points:`${p/2},0 ${p},${m/2} ${p/2},${m} 0,${m/2}`,stroke:o,strokeWidth:l,fill:u});break;case"Pet":C=d.jsx("path",{d:`M${p/2} 0 L${p} ${m/2} L${p/2} ${m} L0 ${m/2} Z`,stroke:o,strokeWidth:l,fill:u});break;case"Pregnancy":C=d.jsx("path",{d:`M${p/2} 0 L${p} ${m} L0 ${m} Z`,stroke:o,strokeWidth:l,fill:u});break;case"Miscarriage":C=d.jsx("circle",{cx:p/2,cy:m/2,r:8,fill:o});break;case"Abortion":C=d.jsx("g",{children:d.jsx("path",{d:`M5 5 L${p-5} ${m-5} M${p-5} 5 L5 ${m-5}`,stroke:o,strokeWidth:2})});break;case"Stillbirth":C=d.jsxs("g",{children:[d.jsx("rect",{x:0,y:0,width:p,height:m,stroke:o,strokeWidth:l,fill:u}),d.jsx("path",{d:`M0 0 L${p} ${m} M${p} 0 L0 ${m}`,stroke:o,strokeWidth:1})]});break;default:C=d.jsx("rect",{x:5,y:5,width:p-10,height:m-10,stroke:o,strokeWidth:l,fill:u,strokeDasharray:"4 2"});break}const P=()=>d.jsxs("g",{className:"pointer-events-none opacity-60",fill:o,children:[t.substanceAbuse&&(t.gender==="M"?d.jsx("rect",{x:0,y:m/2,width:p,height:m/2}):d.jsx("path",{d:`M 0 ${m/2} A ${v} ${v} 0 0 0 ${p} ${m/2} Z`})),t.mentalIssue&&(t.gender==="M"?d.jsx("rect",{x:0,y:0,width:p/2,height:m}):d.jsx("path",{d:`M ${v} 0 A ${v} ${v} 0 0 0 ${v} ${m} Z`})),t.gayLesbian&&d.jsx("path",{d:`M ${p/2-6} ${m-10} L ${p/2+6} ${m-10} L ${p/2} ${m} Z`,fill:o})]}),M=t.deceased?d.jsxs("g",{stroke:o,strokeWidth:1.5,children:[d.jsx("line",{x1:0,y1:0,x2:p,y2:m}),d.jsx("line",{x1:p,y1:0,x2:0,y2:m})]}):null,V=t.indexPerson?t.gender==="M"?d.jsx("rect",{x:6,y:6,width:p-12,height:m-12,stroke:o,strokeWidth:1.5,fill:"none"}):d.jsx("circle",{cx:p/2,cy:m/2,r:p/2-6,stroke:o,strokeWidth:1.5,fill:"none"}):null;let A="";if(n==="age"&&(A=Ia(t.birthDate)),n==="year"){const x=Zw(t.birthDate);x&&(A=x.getFullYear().toString())}const T=(x,D)=>{x.stopPropagation(),x.preventDefault(),i(x,D,t.id)};return d.jsxs("g",{transform:`translate(${t.x},${t.y})`,className:"cursor-pointer group",children:[C," ",d.jsx(P,{})," ",V," ",M,d.jsx("text",{x:v,y:"-5",textAnchor:"middle",fill:h,className:"text-[12px] font-sans font-bold select-none pointer-events-none",dy:"2",children:t.name}),d.jsx("text",{x:v,y:m/2+4,textAnchor:"middle",fill:h,className:"text-[10px] font-sans font-bold select-none pointer-events-none",dy:"3",children:A}),t.label&&d.jsx("text",{x:v,y:m+15,textAnchor:"middle",fill:h,className:"text-[9px] font-sans select-none pointer-events-none",dy:"3",children:t.label}),t.notes&&t.notes.length>0&&d.jsx("circle",{cx:p+5,cy:0,r:4,fill:"#ef4444",stroke:"white",strokeWidth:1}),e&&!s&&d.jsxs("g",{children:[d.jsxs("g",{transform:`translate(${p+20}, ${v})`,onMouseDown:x=>T(x,"spouse"),onTouchStart:x=>T(x,"spouse"),className:"cursor-crosshair hover:opacity-80",children:[d.jsx("circle",{r:14,fill:r?"#333":"white",stroke:"#db2777",strokeWidth:2}),d.jsx(Fv,{size:14,x:-7,y:-7,fill:"#db2777",stroke:"#db2777"}),d.jsx("title",{children:"Coniuge"})]}),d.jsxs("g",{transform:`translate(${v}, ${m+25})`,onMouseDown:x=>T(x,"child"),onTouchStart:x=>T(x,"child"),className:"cursor-crosshair hover:opacity-80",children:[d.jsx("circle",{r:14,fill:r?"#333":"white",stroke:"#10b981",strokeWidth:2}),d.jsx(tc,{size:14,x:-7,y:-7,color:"#10b981",strokeWidth:3}),d.jsx("title",{children:"Figlio"})]}),d.jsxs("g",{transform:`translate(${v}, -25)`,onMouseDown:x=>T(x,"parents"),onTouchStart:x=>T(x,"parents"),className:"cursor-crosshair hover:opacity-80",children:[d.jsx("circle",{r:14,fill:r?"#333":"white",stroke:"#8b5cf6",strokeWidth:2}),d.jsx(Eu,{size:14,x:-7,y:-7,color:"#8b5cf6"}),d.jsx("title",{children:"Genitori"})]}),d.jsxs("g",{transform:`translate(-20, ${v})`,onMouseDown:x=>T(x,"link"),onTouchStart:x=>T(x,"link"),className:"cursor-alias hover:opacity-80",children:[d.jsx("rect",{x:-10,y:-10,width:20,height:20,rx:4,fill:"#f59e0b",stroke:"white",strokeWidth:1}),d.jsx(zv,{size:12,x:-6,y:-6,color:"white"}),d.jsx("title",{children:"Relazione"})]})]})]})},mb=({x:t,y:e,mode:n,customPresets:r,onSelect:i,onClose:s})=>{let o=[];n==="child"||n==="parents"?o=ai.Figli||[]:n==="spouse"?o=ai.Struttura||[]:o=["Legami Affettivi","Conflitto/Distanza","Abuso/Potere"].flatMap(h=>ai[h]);const l=[...o.map(h=>{const p=ft[h];return p?{type:h,label:p.label,color:"border-gray-200 bg-white"}:null}).filter(Boolean),...r.map(h=>({type:h.id,label:h.name,color:"bg-blue-50 text-blue-700 border-blue-200"}))],u={left:t,top:e};return t>window.innerWidth-260&&(u.left=t-260),e>window.innerHeight-300&&(u.top=e-300),d.jsxs("div",{className:"fixed bg-white dark:bg-gray-800 shadow-2xl rounded-lg p-2 w-64 border border-gray-300 dark:border-gray-600 z-[9999] animate-in fade-in zoom-in duration-200 grid grid-cols-1 gap-1 max-h-80 overflow-y-auto",style:u,children:[d.jsxs("div",{className:"text-[10px] font-bold text-gray-500 uppercase px-2 py-1 bg-gray-100 dark:bg-gray-900 rounded sticky top-0 flex justify-between z-10",children:[d.jsx("span",{children:"Seleziona Tipo"}),d.jsx(Us,{size:12,className:"cursor-pointer",onClick:s})]}),l.map(h=>h&&d.jsxs("button",{onClick:()=>i(h.type),className:"w-full flex items-center gap-2 p-2 text-xs hover:bg-blue-50 dark:hover:bg-blue-900 text-left border-b border-gray-50 dark:border-gray-700 text-black dark:text-gray-200",children:[d.jsx("div",{className:"shrink-0",children:d.jsx(Dh,{type:h.type})}),d.jsx("span",{children:h.label})]},h.type))]})},fd=({notes:t,onChange:e})=>{const[n,r]=Q.useState(""),[i,s]=Q.useState(""),[o,l]=Q.useState(null),u=Q.useMemo(()=>[...t].sort((m,v)=>{const C=Ey(m.date);return Ey(v.date)-C}),[t]),h=()=>{if(!n.trim())return;const m=i||new Date().toLocaleDateString();o?(e(t.map(v=>v.id===o?{...v,text:n,date:m}:v)),l(null)):e([...t,{id:Ee(),text:n,date:m}]),r(""),s("")},p=m=>{l(m.id),r(m.text),s(m.date)};return d.jsxs("div",{className:"border-t pt-2 mt-2",children:[d.jsx("label",{className:"text-xs font-bold opacity-50 block mb-1",children:"Diario Clinico / Note"}),d.jsx("div",{className:"space-y-1 mb-2 max-h-32 overflow-y-auto custom-scrollbar",children:u.map(m=>d.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-xs relative group border border-yellow-100 dark:border-yellow-900/30",children:[d.jsxs("div",{className:"flex justify-between items-center mb-1",children:[d.jsx("div",{className:"font-bold opacity-50 text-[10px]",children:m.date||"Senza data"}),d.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx("button",{onClick:()=>p(m),className:"text-blue-500 hover:bg-blue-100 rounded p-0.5",children:d.jsx(Uv,{size:10})}),d.jsx("button",{onClick:()=>e(t.filter(v=>v.id!==m.id)),className:"text-red-500 hover:bg-red-100 rounded p-0.5",children:d.jsx(Us,{size:10})})]})]}),d.jsx("div",{className:"whitespace-pre-wrap",children:m.text})]},m.id))}),d.jsxs("div",{className:"flex flex-col gap-1 bg-gray-50 dark:bg-gray-800 p-1 rounded",children:[d.jsx("input",{type:"text",className:"w-full text-[10px] border-b bg-transparent p-1 outline-none text-gray-500",value:i,onChange:m=>s(m.target.value),placeholder:"Data (es. Gennaio 2025, 12/05/98)"}),d.jsxs("div",{className:"flex gap-1",children:[d.jsx("textarea",{className:"flex-1 border-none bg-transparent text-xs p-1 outline-none resize-none h-12",value:n,onChange:m=>r(m.target.value),placeholder:o?"Modifica nota...":"Nuova nota...",onKeyDown:m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),h())}}),d.jsx("button",{onClick:h,className:"bg-blue-100 text-blue-600 p-1 rounded self-end hover:bg-blue-200",children:o?d.jsx(BE,{size:14}):d.jsx(tc,{size:14})}),o&&d.jsx("button",{onClick:()=>{l(null),r(""),s("")},className:"bg-gray-100 text-gray-600 p-1 rounded self-end",children:d.jsx(Us,{size:14})})]})]})]})},gb=({onClose:t,nodes:e,edges:n,groups:r})=>{const[i,s]=Q.useState(null),[o,l]=Q.useState(""),u=Q.useMemo(()=>{if(!i)return null;const p=e.find(x=>x.id===i);if(!p)return null;const v=n.filter(x=>(x.fromId===i||x.toId===i)&&ai.Struttura.includes(x.type)).map(x=>{const D=x.fromId===i?x.toId:x.fromId,F=e.find(I=>I.id===D),B=ft[x.type];return{name:F?F.name:"Sconosciuto",type:B?B.label:x.type}}),P=n.filter(x=>x.fromId===i||x.toId===i).map(x=>{if(ai.Struttura.includes(x.type))return null;const D=x.fromId===i?x.toId:x.fromId;let F="Sconosciuto";const B=e.find(g=>g.id===D);if(B)F=B.name;else{const g=r.find(w=>w.id===D);if(g){const w=e.filter(E=>g.memberIds.includes(E.id)).map(E=>E.name).join(", ");F=`Gruppo: ${g.label} (Membri: ${w})`}}const I=ft[x.type];return{id:x.id,with:F,type:I?I.label:x.type,notes:x.notes}}).filter(Boolean),V=n.filter(x=>x.toId===i&&x.type.startsWith("child")).map(x=>{const D=e.find(F=>F.id===x.fromId);return D?D.name:"Ignoto"}),T=n.filter(x=>x.fromId===i&&x.type.startsWith("child")).map(x=>{const D=e.find(F=>F.id===x.toId);return D?D.name:"Ignoto"});return{person:p,relations:P,parents:V,children:T,spouses:v}},[i,e,n,r]),h=e.filter(p=>p.name.toLowerCase().includes(o.toLowerCase()));return d.jsx("div",{className:"fixed inset-0 bg-black/50 z-[1000] flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl h-[80vh] flex overflow-hidden text-black dark:text-white",children:[d.jsxs("div",{className:"w-1/3 border-r dark:border-gray-700 flex flex-col",children:[d.jsxs("div",{className:"p-4 border-b dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[d.jsxs("h2",{className:"font-bold flex items-center gap-2",children:[d.jsx(ah,{})," Report"]}),d.jsxs("div",{className:"relative mt-2",children:[d.jsx(lh,{className:"absolute left-2 top-2.5 opacity-50",size:14}),d.jsx("input",{className:"w-full pl-8 p-2 text-sm border rounded dark:bg-gray-700 dark:border-gray-600",placeholder:"Cerca persona...",value:o,onChange:p=>l(p.target.value)})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto",children:h.map(p=>d.jsxs("button",{onClick:()=>s(p.id),className:`w-full text-left p-3 border-b dark:border-gray-700 hover:bg-blue-50 dark:hover:bg-gray-700 ${i===p.id?"bg-blue-100 dark:bg-blue-900/30":""}`,children:[d.jsx("div",{className:"font-bold text-sm",children:p.name}),d.jsxs("div",{className:"text-xs opacity-50",children:[p.gender,"  ",Ia(p.birthDate)," anni"]})]},p.id))})]}),d.jsxs("div",{className:"flex-1 flex flex-col bg-gray-50 dark:bg-gray-900",children:[d.jsxs("div",{className:"p-4 flex justify-between items-center bg-white dark:bg-gray-800 border-b dark:border-gray-700",children:[d.jsx("h3",{className:"font-bold",children:"Dettagli Scheda"}),d.jsx("button",{onClick:t,children:d.jsx(Us,{})})]}),d.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:u?d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx("div",{className:`w-16 h-16 flex items-center justify-center rounded-full text-2xl font-bold ${["M","TransMan"].includes(u.person.gender)?"bg-blue-100 text-blue-600":["F","TransWoman"].includes(u.person.gender)?"bg-pink-100 text-pink-600":"bg-green-100 text-green-600"}`,children:u.person.name.charAt(0)}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold",children:u.person.name}),d.jsxs("div",{className:"text-sm opacity-70",children:["Nato/a: ",u.person.birthDate||"?","  Et: ",Ia(u.person.birthDate)]})]})]}),u.spouses.length>0&&d.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded shadow-sm border border-blue-100 dark:border-blue-900",children:[d.jsx("h4",{className:"font-bold mb-2 text-sm uppercase opacity-50 text-blue-800 dark:text-blue-300",children:"Partner / Coniugi"}),u.spouses.map((p,m)=>d.jsxs("div",{className:"font-medium",children:[" ",p.name," ",d.jsxs("span",{className:"opacity-60 text-xs",children:["(",p.type,")"]})]},m))]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded shadow-sm",children:[d.jsx("h4",{className:"font-bold mb-2 text-sm uppercase opacity-50",children:"Genitori"}),u.parents.length?u.parents.map((p,m)=>d.jsxs("div",{children:[" ",p]},m)):"-"]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded shadow-sm",children:[d.jsx("h4",{className:"font-bold mb-2 text-sm uppercase opacity-50",children:"Figli"}),u.children.length?u.children.map((p,m)=>d.jsxs("div",{children:[" ",p]},m)):"-"]})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded shadow-sm",children:[d.jsxs("h4",{className:"font-bold mb-3 text-sm uppercase opacity-50",children:["Altre Relazioni (",u.relations.length,")"]}),d.jsxs("div",{className:"space-y-2",children:[u.relations.map(p=>d.jsxs("div",{className:"flex justify-between items-center p-2 border rounded hover:bg-gray-50 dark:hover:bg-gray-700",children:[d.jsxs("span",{className:"font-medium",children:[p.type," ",d.jsx("span",{className:"font-normal opacity-70",children:"con"})," ",p.with]}),p.notes.length>0&&d.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded",children:"Note"})]},p.id)),u.relations.length===0&&d.jsx("div",{className:"text-sm opacity-50",children:"Nessuna altra relazione registrata"})]})]})]}):d.jsx("div",{className:"opacity-50 text-center mt-20",children:"Seleziona una persona per vedere il report"})})]})]})})},yb=({onClose:t,onExport:e,onImport:n,setCustomUser:r,customUser:i,setFirebaseConfig:s,firebaseConfig:o})=>d.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000] flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-96 space-y-4",children:[d.jsxs("h2",{className:"font-bold text-lg flex justify-between",children:["Impostazioni ",d.jsx(Us,{className:"cursor-pointer",onClick:t})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs font-bold opacity-50 block mb-1",children:"ID Utente"}),d.jsx("input",{className:"w-full border p-2 rounded dark:bg-gray-700",value:i,onChange:l=>r(l.target.value),placeholder:"Es. MarioRossi"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs font-bold opacity-50 block mb-1",children:"Config Firebase"}),d.jsx("textarea",{className:"w-full border p-2 rounded text-xs font-mono h-24 dark:bg-gray-700",value:o,onChange:l=>s(l.target.value),placeholder:'{"apiKey": "..."}'})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t dark:border-gray-700",children:[d.jsxs("button",{onClick:e,className:"flex items-center justify-center gap-2 p-2 bg-gray-100 dark:bg-gray-700 rounded text-xs hover:bg-gray-200",children:[d.jsx(Ov,{size:14})," Backup"]}),d.jsxs("label",{className:"flex items-center justify-center gap-2 p-2 bg-gray-100 dark:bg-gray-700 rounded text-xs hover:bg-gray-200 cursor-pointer",children:[d.jsx(dT,{size:14})," Ripristina",d.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:n})]})]})]})}),vb=({onClose:t,onSave:e})=>{const[n,r]=Q.useState("Nuovo Stile"),[i,s]=Q.useState("#000000"),[o,l]=Q.useState("solid"),[u,h]=Q.useState("standard"),p=()=>{e({id:`custom-${Ee()}`,name:n,type:"relationship",config:{color:i,lineStyle:o,renderType:u,decorator:""}}),t()};return d.jsx("div",{className:"fixed inset-0 bg-black/50 z-[2000] flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-96 space-y-4 text-black dark:text-white",children:[d.jsx("h3",{className:"font-bold text-lg",children:"Designer Relazioni"}),d.jsx("input",{className:"w-full border p-2 rounded dark:bg-gray-700",value:n,onChange:m=>r(m.target.value),placeholder:"Nome stile"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-xs block mb-1",children:"Colore"}),d.jsx("input",{type:"color",className:"w-full h-8",value:i,onChange:m=>s(m.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs block mb-1",children:"Tratteggio"}),d.jsxs("select",{className:"w-full border p-1 rounded dark:bg-gray-700",value:o,onChange:m=>l(m.target.value),children:[d.jsx("option",{value:"solid",children:"Solido"}),d.jsx("option",{value:"dashed",children:"Tratteggiato"}),d.jsx("option",{value:"dotted",children:"Puntinato"}),d.jsx("option",{value:"zigzag",children:"ZigZag"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs block mb-1",children:"Decorazione"}),d.jsxs("select",{className:"w-full border p-1 rounded dark:bg-gray-700",value:u,onChange:m=>h(m.target.value),children:[d.jsx("option",{value:"standard",children:"Nessuna"}),d.jsx("option",{value:"arrow",children:"Freccia Singola"}),d.jsx("option",{value:"arrow-double",children:"Freccia Doppia"}),d.jsx("option",{value:"fusion",children:"Fusione"}),d.jsx("option",{value:"cutoff",children:"Taglio"})]})]}),d.jsx("div",{className:"p-4 border rounded bg-gray-50 dark:bg-gray-900 flex justify-center items-center h-20",children:d.jsx("svg",{width:"200",height:"20",children:d.jsx("line",{x1:"0",y1:"10",x2:"200",y2:"10",stroke:i,strokeWidth:"2",strokeDasharray:o==="dashed"?"5,5":o==="dotted"?"2,2":""})})}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-500",children:"Annulla"}),d.jsx("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Salva Preset"})]})]})})};function _b(){var $n;const[t,e]=Q.useState(null),[n,r]=Q.useState("dashboard"),[i,s]=Q.useState(localStorage.getItem("genopro_custom_user")||""),[o,l]=Q.useState(localStorage.getItem("genopro_firebase_config")||""),[u,h]=Q.useState([]),[p,m]=Q.useState(()=>{const _=localStorage.getItem("genopro_categories");return _?JSON.parse(_):ab}),[v,C]=Q.useState("ALL"),[P,M]=Q.useState("date_desc"),[V,A]=Q.useState(""),[T,x]=Q.useState(!1),D=Q.useMemo(()=>u.filter(_=>{const k=_.title.toLowerCase().includes(V.toLowerCase()),L=v==="ALL"||_.category===v||v==="other"&&!p.some(O=>O.id===_.category);return k&&L}).sort((_,k)=>P==="date_desc"?k.lastModified-_.lastModified:P==="date_asc"?_.lastModified-k.lastModified:P==="name_asc"?_.title.localeCompare(k.title):0),[u,v,P,V,p]);Q.useEffect(()=>{localStorage.setItem("genopro_categories",JSON.stringify(p))},[p]),Q.useEffect(()=>{localStorage.setItem("genopro_custom_user",i)},[i]);const{auth:F,db:B}=Q.useMemo(()=>{try{let _={};if(o)try{_=JSON.parse(o)}catch{console.error("Invalid Custom Config")}else typeof window.__firebase_config<"u"&&(_=JSON.parse(window.__firebase_config));const k=FI().length?Nf():Yv(_);return{auth:Y2(k),db:FC(k)}}catch{return{auth:null,db:null}}},[o]),I=typeof window.__app_id<"u"?window.__app_id:"default-app-id",[g,w]=Q.useState(null),[E,b]=Q.useState("Nuovo Genogramma"),[R,S]=Q.useState("family"),[ee,St]=Q.useState([]),[Me,At]=Q.useState([]),[W,ie]=Q.useState([]),[le,Pe]=Q.useState([]),[ve,Be]=Q.useState([]),[Xe,an]=Q.useState(-1),mt=Q.useCallback((_,k,L)=>{const O=JSON.stringify({nodes:_,edges:k,groups:L});Be(U=>[...U.slice(0,Xe+1),O]),an(U=>U+1)},[Xe]),Ue=_=>{const k=typeof _=="function"?_(ee):_;St(k),mt(k,Me,W)},Un=_=>{const k=typeof _=="function"?_(Me):_;At(k),mt(ee,k,W)},tr=_=>{const k=typeof _=="function"?_(W):_;ie(k),mt(ee,Me,k)},yn=(_,k,L)=>{St(_),At(k),ie(L),mt(_,k,L)},gi=()=>{if(Xe>0){const _=Xe-1,k=JSON.parse(ve[_]);St(k.nodes),At(k.edges),ie(k.groups),an(_)}},Yi=()=>{if(Xe<ve.length-1){const _=Xe+1,k=JSON.parse(ve[_]);St(k.nodes),At(k.edges),ie(k.groups),an(_)}};Q.useEffect(()=>{ve.length===0&&n==="editor"&&mt(ee,Me,W)},[n]);const[ge,Je]=Q.useState([]),[vn,_n]=Q.useState([]),[br,zn]=Q.useState([]),[Ze,Xi]=Q.useState(!1),[nr,gc]=Q.useState(!0),[oo,Wa]=Q.useState("age"),[yi,ot]=Q.useState(!1),[gt,vi]=Q.useState(!1),[qa,ao]=Q.useState(!1),[_i,Rr]=Q.useState(!1),[Ha,lo]=Q.useState(!1),Ae=Q.useRef(null),[Le,Pr]=Q.useState(null),[Ga,uo]=Q.useState(null),[Nr,Bt]=Q.useState(null),[rr,wi]=Q.useState(1),[Qt,co]=Q.useState(4);Q.useEffect(()=>{const _=k=>{k.key==="i"&&!["INPUT","TEXTAREA"].includes(k.target.tagName)&&ot(L=>!L)};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[]);const wn=Q.useRef(null),ln=Q.useRef(null),Ne=Q.useRef(ee);Q.useEffect(()=>{Ne.current=ee},[ee]);const Ct=Q.useRef(Me);Q.useEffect(()=>{Ct.current=Me},[Me]);const yt=Q.useRef(ge);Q.useEffect(()=>{yt.current=ge},[ge]);const Yt=Q.useRef(W);Q.useEffect(()=>{Yt.current=W},[W]),Q.useEffect(()=>{const _=k=>{if(!["INPUT","TEXTAREA","SELECT"].includes(k.target.tagName)){if((k.ctrlKey||k.metaKey)&&k.key.toLowerCase()==="z"){k.preventDefault(),gi();return}if((k.ctrlKey||k.metaKey)&&k.key.toLowerCase()==="y"){k.preventDefault(),Yi();return}if((k.ctrlKey||k.metaKey)&&k.key==="s"){k.preventDefault(),Ei();return}if(k.key==="Backspace"||k.key==="Delete")if(ge.length>0){const L=Ne.current.filter(U=>!ge.includes(U.id)),O=Ct.current.filter(U=>!ge.includes(U.fromId)&&!ge.includes(U.toId));yn(L,O,Yt.current),Je([])}else vn.length>0?(Un(L=>L.filter(O=>!vn.includes(O.id))),_n([])):br.length>0&&(tr(L=>L.filter(O=>!br.includes(O.id))),zn([]));if(k.key==="Escape"&&(Je([]),_n([]),zn([]),Bt(null),Rr(!1)),k.key.toLowerCase()==="m"&&ge.length===0&&Dr("M"),k.key.toLowerCase()==="f"&&ge.length===0&&Dr("F"),ge.length===1){const L=ge[0],O=Ne.current.find(U=>U.id===L);if(O){if(k.key.toLowerCase()==="s"){const U=Ee(),H={id:U,x:O.x+150,y:O.y,gender:O.gender==="M"?"F":"M",name:"Nuovo",birthDate:"",deceased:!1,indexPerson:!1,substanceAbuse:!1,mentalIssue:!1,physicalIssue:!1,recovery:!1,gayLesbian:!1,notes:[]},ne={id:Ee(),fromId:L,toId:U,type:"marriage",label:"",notes:[]};yn([...Ne.current,H],[...Ct.current,ne],Yt.current),Je([U])}if(k.key.toLowerCase()==="c"){const U=cd(L,Ct.current),H=Ee(),ne={id:H,x:O.x,y:O.y+150,gender:"Unknown",name:"Nuovo",birthDate:"",deceased:!1,indexPerson:!1,substanceAbuse:!1,mentalIssue:!1,physicalIssue:!1,recovery:!1,gayLesbian:!1,notes:[]};let te=[];if(U){const Y=U.fromId===L?U.toId:U.fromId,fe=Ne.current.find(xe=>xe.id===Y);fe&&(ne.x=(O.x+fe.x)/2),te.push({id:Ee(),fromId:L,toId:H,type:"child-bio",label:"",notes:[]}),te.push({id:Ee(),fromId:Y,toId:H,type:"child-bio",label:"",notes:[]})}else te.push({id:Ee(),fromId:L,toId:H,type:"child-bio",label:"",notes:[]});yn([...Ne.current,ne],[...Ct.current,...te],Yt.current),Je([H])}if(k.key.toLowerCase()==="p"){const U=Ee(),H=Ee(),ne={id:U,x:O.x-60,y:O.y-150,gender:"M",name:"Padre",birthDate:"",deceased:!1,indexPerson:!1,substanceAbuse:!1,mentalIssue:!1,physicalIssue:!1,recovery:!1,gayLesbian:!1,notes:[]},te={id:H,x:O.x+60,y:O.y-150,gender:"F",name:"Madre",birthDate:"",deceased:!1,indexPerson:!1,substanceAbuse:!1,mentalIssue:!1,physicalIssue:!1,recovery:!1,gayLesbian:!1,notes:[]},Y=[{id:Ee(),fromId:U,toId:H,type:"marriage",label:"",notes:[]},{id:Ee(),fromId:U,toId:L,type:"child-bio",label:"",notes:[]},{id:Ee(),fromId:H,toId:L,type:"child-bio",label:"",notes:[]}];yn([...Ne.current,ne,te],[...Ct.current,...Y],Yt.current),Je([U,H])}}}if(vn.length===1&&k.key.toLowerCase()==="c"){const L=Ct.current.find(O=>O.id===vn[0]);if(L&&["marriage","cohabitation","separation","divorce"].includes(L.type)){const O=Ee(),U=Ne.current.find(K=>K.id===L.fromId),H=Ne.current.find(K=>K.id===L.toId),ne=U&&H?(U.x+H.x)/2:0,te=U&&H?Math.max(U.y,H.y)+150:0,Y={id:O,x:ne,y:te,gender:"Unknown",name:"Figlio",birthDate:"",deceased:!1,indexPerson:!1,substanceAbuse:!1,mentalIssue:!1,physicalIssue:!1,recovery:!1,gayLesbian:!1,notes:[]},fe={id:Ee(),fromId:L.fromId,toId:O,type:"child-bio",label:"",notes:[]},xe={id:Ee(),fromId:L.toId,toId:O,type:"child-bio",label:"",notes:[]};yn([...Ne.current,Y],[...Ct.current,fe,xe],Yt.current),Je([O]),_n([])}}if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(k.key)&&ge.length>0){k.preventDefault();const L=k.shiftKey?10:1,O=k.key==="ArrowLeft"?-L:k.key==="ArrowRight"?L:0,U=k.key==="ArrowUp"?-L:k.key==="ArrowDown"?L:0;Ue(H=>H.map(ne=>ge.includes(ne.id)?{...ne,x:ne.x+O,y:ne.y+U}:ne))}}};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[ge,vn,br,Xe,ve]);const un=_=>{let k,L;if(_.touches?(k=_.touches[0].clientX,L=_.touches[0].clientY):_.changedTouches?(k=_.changedTouches[0].clientX,L=_.changedTouches[0].clientY):(k=_.clientX,L=_.clientY),!wn.current)return{x:0,y:0,cx:k,cy:L};const O=wn.current.getBoundingClientRect(),U=k-O.left,H=L-O.top;return{x:(U-Vt)/rr+Vt,y:(H-Vt)/rr+Vt,cx:k,cy:L}},xi=(_,k,L)=>{const{x:O,y:U}=un(_);Ae.current={active:!0,type:k,sourceId:L,startX:O,startY:U,currX:O,currY:U},Pr({...Ae.current}),Bt(null)},yc=(_,k)=>{const{x:L,y:O}=un(_),U=Ct.current.find(H=>H.id===k);if(U){const H=Ee(),ne=L-Pn/2,te=O+50,Y={id:H,x:ne,y:te,gender:"Unknown",name:"Nuovo",birthDate:"",deceased:!1,indexPerson:!1,substanceAbuse:!1,mentalIssue:!1,physicalIssue:!1,recovery:!1,gayLesbian:!1,notes:[]},fe={id:Ee(),fromId:U.fromId,toId:H,type:"child-bio",label:"",notes:[]},xe={id:Ee(),fromId:U.toId,toId:H,type:"child-bio",label:"",notes:[]};yn([...Ne.current,Y],[...Ct.current,fe,xe],Yt.current),Bt({x:_.clientX,y:_.clientY,edgeId:H,mode:"child"})}},Ka=_=>{if(_.target.tagName!=="svg")return;const{x:k,y:L}=un(_);!_.shiftKey&&!_i&&(Je([]),_n([]),zn([])),Ae.current={active:!0,type:"box",sourceId:"",startX:k,startY:L,currX:k,currY:L},Pr({...Ae.current}),Bt(null)},ir=(_,k)=>{_.stopPropagation();const{x:L,y:O}=un(_),U=_.shiftKey||_i;let H=ge;U?H=ge.includes(k)?ge.filter(te=>te!==k):[...ge,k]:ge.includes(k)||(H=[k],_n([]),zn([])),Je(H);const ne={};Ne.current.forEach(te=>{H.includes(te.id)&&(ne[te.id]={x:te.x,y:te.y})}),Ae.current={active:!0,type:"move",sourceId:k,startX:L,startY:O,currX:L,currY:O,initialNodePositions:ne},Pr({...Ae.current}),Bt(null)},vc=(_,k)=>{_.stopPropagation(),_.preventDefault();const{x:L,y:O}=un(_);Ae.current={active:!0,type:"link",sourceId:k,startX:L,startY:O,currX:L,currY:O},Pr({...Ae.current}),Bt(null)},_c=(_,k)=>{k.stopPropagation(),_n([_]),Je([]);const L=Me.find(O=>O.id===_);L&&["marriage","cohabitation","separation","divorce"].includes(L.type)&&Je([L.fromId,L.toId])};Q.useEffect(()=>{const _=L=>{if(!Ae.current||!Ae.current.active)return;const{x:O,y:U}=un(L);if(Ae.current.currX=O,Ae.current.currY=U,Pr({...Ae.current}),Ae.current.type==="box")uo({startX:Ae.current.startX,startY:Ae.current.startY,curX:O,curY:U});else if(Ae.current.type==="move"&&Ae.current.initialNodePositions){const H=O-Ae.current.startX,ne=U-Ae.current.startY;St(te=>te.map(Y=>{var xe,K;const fe=(K=(xe=Ae.current)==null?void 0:xe.initialNodePositions)==null?void 0:K[Y.id];if(fe){let se=fe.x+H,pe=fe.y+ne;return nr&&(se=Math.round(se/Jt)*Jt,pe=Math.round(pe/Jt)*Jt),{...Y,x:se,y:pe}}return Y}))}},k=L=>{if(!Ae.current||!Ae.current.active)return;const{type:O,sourceId:U,startX:H,startY:ne,currX:te,currY:Y}=Ae.current,fe=Math.sqrt(Math.pow(te-H,2)+Math.pow(Y-ne,2)),xe=fe<10;let K=te,se=Y;nr&&(K=Math.round(K/Jt)*Jt,se=Math.round(se/Jt)*Jt);let pe=null,Se=O,Wt=!1;if(O==="box"){const ct=Math.min(H,te),We=Math.max(H,te),Rt=Math.min(ne,Y),he=Math.max(ne,Y),nt=Ne.current.filter(ze=>ze.x+Pn/2>=ct&&ze.x+Pn/2<=We&&ze.y+lr/2>=Rt&&ze.y+lr/2<=he).map(ze=>ze.id);Je(ze=>[...new Set([...ze,...nt])])}else if(O==="move"&&fe>5)Wt=!0;else{const ct=Ne.current.find(We=>We.id===U);if((ct||Yt.current.some(We=>We.id===U))&&(xe||fe>5)){if(ct){const We=Ee();let Rt=null,he=[];const nt=fe>5?K-Pn/2:K,ze=fe>5?se-lr/2:se;if(O==="spouse")Rt={id:We,x:nt,y:ze,gender:ct.gender==="M"?"F":"M",name:"Nuovo",birthDate:"",deceased:!1,indexPerson:!1,substanceAbuse:!1,mentalIssue:!1,physicalIssue:!1,recovery:!1,gayLesbian:!1,notes:[]},pe=Ee(),he.push({id:pe,fromId:U,toId:We,type:"marriage",label:"",notes:[]});else if(O==="child"){const Pt=cd(U,Ct.current);if(Rt={id:We,x:nt,y:ze,gender:"Unknown",name:"Nuovo",birthDate:"",deceased:!1,indexPerson:!1,substanceAbuse:!1,mentalIssue:!1,physicalIssue:!1,recovery:!1,gayLesbian:!1,notes:[]},Pt){const sr=Pt.fromId===U?Pt.toId:Pt.fromId;he.push({id:Ee(),fromId:U,toId:We,type:"child-bio",label:"",notes:[]}),he.push({id:Ee(),fromId:sr,toId:We,type:"child-bio",label:"",notes:[]}),pe=he[0].id}else pe=Ee(),he.push({id:pe,fromId:U,toId:We,type:"child-bio",label:"",notes:[]})}else if(O==="parents"){const Pt=Ee(),sr=Ee(),fo={id:Pt,x:nt-60,y:ze,gender:"M",name:"Padre",birthDate:"",deceased:!1,indexPerson:!1,substanceAbuse:!1,mentalIssue:!1,physicalIssue:!1,recovery:!1,gayLesbian:!1,notes:[]},Za={id:sr,x:nt+60,y:ze,gender:"F",name:"Madre",birthDate:"",deceased:!1,indexPerson:!1,substanceAbuse:!1,mentalIssue:!1,physicalIssue:!1,recovery:!1,gayLesbian:!1,notes:[]};St(xc=>[...xc,fo,Za]),he.push({id:Ee(),fromId:Pt,toId:sr,type:"marriage",label:"",notes:[]}),he.push({id:Ee(),fromId:Pt,toId:U,type:"child-bio",label:"",notes:[]}),he.push({id:Ee(),fromId:sr,toId:U,type:"child-bio",label:"",notes:[]}),Rt=[fo,Za]}if(Rt||he.length>0){const Pt=Array.isArray(Rt)?[...Ne.current,...Rt]:Rt?[...Ne.current,Rt]:Ne.current,sr=[...Ct.current,...he];yn(Pt,sr,Yt.current)}}if(O==="link"){const We=Ne.current.find(nt=>K>=nt.x-20&&K<=nt.x+Pn+20&&se>=nt.y-20&&se<=nt.y+lr+20),Rt=We?null:Yt.current.find(nt=>{const ze=us(nt,Ne.current);return ze&&dd(ze,{x:K,y:se})}),he=We?We.id:Rt?Rt.id:null;if(he&&he!==U){pe=Ee();const nt={id:pe,fromId:U,toId:he,type:"harmony",label:"",notes:[]};Un(ze=>[...ze,nt]),Wt=!0}}}}if(Wt&&mt(Ne.current,Ct.current,Yt.current),pe){let{cx:ct,cy:We}=un(L);Bt({x:ct,y:We,edgeId:pe,mode:Se}),_n([pe]),Je([])}Ae.current={active:!1,type:"move",sourceId:"",startX:0,startY:0,currX:0,currY:0},Pr(null),uo(null)};return window.addEventListener("mousemove",_),window.addEventListener("mouseup",k),window.addEventListener("touchmove",_,{passive:!1}),window.addEventListener("touchend",k),()=>{window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",k),window.removeEventListener("touchmove",_),window.removeEventListener("touchend",k)}},[nr,rr,mt]),Q.useEffect(()=>F?((async()=>{const k=window.__initial_auth_token;k?await jk(F,k):await Pk(F)})(),Fk(F,e)):void 0,[F]),Q.useEffect(()=>{if(!t||!B)return;const _=i||t.uid,k=JC(OC(B,"artifacts",I,"users",_,"genograms")),L=sb(k,O=>{const U=[];O.forEach(H=>U.push({id:H.id,...H.data()})),h(U)});return()=>L()},[t,B,i]),Q.useLayoutEffect(()=>{n==="editor"&&ln.current&&setTimeout(()=>{ln.current&&ln.current.scrollTo(Vt-ln.current.clientWidth/2,Vt-ln.current.clientHeight/2)},100)},[n]);const Ei=async()=>{if(!t||!g||!B)return;const _=i||t.uid;await rb(my(B,"artifacts",I,"users",_,"genograms",g),{id:g,title:E,category:R,lastModified:Date.now(),data:{nodes:ee,edges:Me,groups:W,presets:le}}),alert("Salvato!")},Qa=()=>{w(Ee()),b("Nuovo"),S("family"),St([]),At([]),ie([]),r("editor")},Dr=_=>{const k={id:Ee(),x:Vt,y:Vt,gender:_,name:"Nuovo",birthDate:"",deceased:!1,indexPerson:!1,substanceAbuse:!1,mentalIssue:!1,physicalIssue:!1,recovery:!1,gayLesbian:!1,notes:[]};Ue(L=>[...L,k]),Je([k.id])},Ji=()=>{if(ge.length===0)return alert("Seleziona nodi");const _={id:Ee(),memberIds:[...ge],type:"household",label:"Nuovo Gruppo",color:"#000000",notes:[]};tr(k=>[...k,_]),zn([_.id]),Je([])},Xt=_=>{if(ge.length<2)return;const k=ee.filter(U=>ge.includes(U.id)),L=k.reduce((U,H)=>U+H.x,0)/k.length,O=k.reduce((U,H)=>U+H.y,0)/k.length;Ue(U=>U.map((H,ne)=>{if(!ge.includes(H.id))return H;const te=k.findIndex(Y=>Y.id===H.id);if(_==="h")return{...H,y:O};if(_==="v")return{...H,x:L};if(_==="circle"){const fe=2*Math.PI/k.length;return{...H,x:L+150*Math.cos(fe*te),y:O+150*Math.sin(fe*te)}}if(_==="grid"){const Y=Math.ceil(Math.sqrt(k.length)),fe=Math.floor(te/Y),xe=te%Y;return{...H,x:L+(xe-Y/2)*80,y:O+(fe-Y/2)*100}}return _==="diagonal"?{...H,x:L+(te-k.length/2)*60,y:O+(te-k.length/2)*60}:H}))},Ya=()=>{wi(1),ln.current&&ln.current.scrollTo({left:Vt-ln.current.clientWidth/2,top:Vt-ln.current.clientHeight/2,behavior:"smooth"})},ho=Q.useCallback(()=>{let _=1/0,k=1/0,L=-1/0,O=-1/0;return ee.length===0?{minX:Vt-400,minY:Vt-300,maxX:Vt+400,maxY:Vt+300}:(ee.forEach(U=>{_=Math.min(_,U.x),k=Math.min(k,U.y),L=Math.max(L,U.x+Pn),O=Math.max(O,U.y+lr)}),W.forEach(U=>{const H=us(U,ee);H&&(_=Math.min(_,H.x),k=Math.min(k,H.y),L=Math.max(L,H.x+H.w),O=Math.max(O,H.y+H.h))}),{minX:_,minY:k,maxX:L,maxY:O})},[ee,W]),Zi=()=>{let{minX:_,minY:k,maxX:L,maxY:O}=ho();if(yi){const ne=new Set(ee.map(K=>K.gender)).size+(ee.some(K=>K.deceased)?1:0)+(ee.some(K=>K.indexPerson)?1:0),te=new Set(Me.map(K=>K.type)).size,Y=80+Math.max(ne,te)*24+20,fe=_-220-50,xe=k;_=Math.min(_,fe),k=Math.min(k,xe),L=Math.max(L,_+220+(L-_)),O=Math.max(O,xe+Y)}const U=100;return{x:_-U,y:k-U,w:L-_+U*2,h:O-k+U*2}},es=_=>{if(!wn.current)return;const k=Zi(),L=Qt,O=wn.current.cloneNode(!0),U=O.querySelector("g");U&&(U.setAttribute("transform",""),U.style.transform=""),O.setAttribute("viewBox",`${k.x} ${k.y} ${k.w} ${k.h}`),O.setAttribute("width",`${k.w*L}`),O.setAttribute("height",`${k.h*L}`),O.style.fontFamily="sans-serif";const H=new XMLSerializer().serializeToString(O),ne=document.createElement("canvas"),te=ne.getContext("2d"),Y=new Image,fe=new Blob([H],{type:"image/svg+xml;charset=utf-8"}),xe=URL.createObjectURL(fe),K=new Date,se=K.toISOString().slice(0,10),pe=K.toTimeString().slice(0,5).replace(":","-"),Se=`${E.replace(/\s+/g,"_")}_${se}_${pe}`;Y.onload=()=>{if(ne.width=k.w*L,ne.height=k.h*L,te){te.font="12px sans-serif",_==="jpeg"&&(te.fillStyle=Ze?"#111827":"#ffffff",te.fillRect(0,0,ne.width,ne.height)),te.drawImage(Y,0,0);const Wt=ne.toDataURL(`image/${_}`,1),ct=document.createElement("a");ct.href=Wt,ct.download=`${Se}.${_}`,document.body.appendChild(ct),ct.click(),document.body.removeChild(ct)}URL.revokeObjectURL(xe)},Y.src=xe},Xa=(_,k,L)=>_.map(O=>{const U=k.filter(Y=>(Y.fromId===O.id||Y.toId===O.id)&&ai.Struttura.includes(Y.type)).map(Y=>{const fe=Y.fromId===O.id?Y.toId:Y.fromId,xe=_.find(se=>se.id===fe),K=ft[Y.type];return xe?`<b>${xe.name}</b> (${K.label})`:null}).filter(Boolean).join(", "),H=k.filter(Y=>Y.fromId===O.id&&Y.type.startsWith("child")).map(Y=>{const fe=_.find(xe=>xe.id===Y.toId);return fe?fe.name:null}).filter(Boolean).join(", "),ne=k.filter(Y=>(Y.fromId===O.id||Y.toId===O.id)&&!ai.Struttura.includes(Y.type)&&!Y.type.startsWith("child")).map(Y=>{const fe=Y.fromId===O.id?Y.toId:Y.fromId,xe=_.find(Se=>Se.id===fe),K=xe?null:L.find(Se=>Se.id===fe),se=xe?xe.name:K?`Gruppo: ${K.label}`:"Sconosciuto";return`<li>${(ft[Y.type]||{label:Y.type}).label} con <b>${se}</b>${Y.notes.length?` (Note: ${Y.notes.map(Se=>Se.text).join("; ")})`:""}</li>`}).join(""),te=L.filter(Y=>Y.memberIds.includes(O.id)).map(Y=>Y.label).join(", ");return`
            <div class="person-card">
                <h3>${O.name} <small>(${O.gender}, ${Ia(O.birthDate)} anni)</small></h3>
                ${te?`<p><strong>Gruppi:</strong> ${te}</p>`:""}
                ${U?`<p><strong>Partner:</strong> ${U}</p>`:""}
                ${H?`<p><strong>Figli:</strong> ${H}</p>`:""}
                ${ne?`<p><strong>Altre Relazioni:</strong></p><ul>${ne}</ul>`:""}
                ${O.notes.length>0?`<div class="notes-section"><strong>Diario Clinico:</strong><ul>${O.notes.map(Y=>`<li><span class="note-date">${Y.date}</span>: ${Y.text}</li>`).join("")}</ul></div>`:""}
            </div>
          `}).join(""),Ja=()=>{const _=window.open("","_blank");if(_&&wn.current){const k=Zi(),L=wn.current.cloneNode(!0),O=L.querySelector("g");O&&O.setAttribute("transform",""),L.setAttribute("viewBox",`${k.x} ${k.y} ${k.w} ${k.h}`),L.setAttribute("width","100%"),L.setAttribute("height","50vh");const U=new XMLSerializer().serializeToString(L),H=Xa(ee,Me,W),ne=[...new Set(Me.map(K=>K.type))],te=[...new Set(ee.map(K=>K.gender))],Y=K=>{const se=ft[K]||ft.custom;if(!se)return"";const pe=se.color||"#000";let Se="";return se.lineStyle==="dashed"?Se=`<line x1="0" y1="10" x2="40" y2="10" stroke="${pe}" stroke-width="2" stroke-dasharray="4,2"/>`:se.lineStyle==="dotted"?Se=`<line x1="0" y1="10" x2="40" y2="10" stroke="${pe}" stroke-width="2" stroke-dasharray="1,3"/>`:se.lineStyle==="zigzag"?Se=`<path d="M0 10 L5 5 L10 15 L15 5 L20 15 L25 5 L30 15 L35 5 L40 10" stroke="${se.renderType.includes("hostile")?"red":pe}" fill="none" stroke-width="1.5"/>`:Se=`<line x1="0" y1="10" x2="40" y2="10" stroke="${pe}" stroke-width="2"/>`,se.renderType==="double"&&(Se+=`<line x1="0" y1="6" x2="40" y2="6" stroke="${pe}" stroke-width="1.5"/><line x1="0" y1="14" x2="40" y2="14" stroke="${pe}" stroke-width="1.5"/>`),se.renderType==="cutoff"&&(Se+=`<line x1="20" y1="0" x2="20" y2="20" stroke="${pe}" stroke-width="3"/>`),se.renderType==="oblique"&&(Se+=`<line x1="25" y1="5" x2="15" y2="15" stroke="${pe}" stroke-width="2"/>`),se.renderType==="oblique-double"&&(Se+=`<line x1="23" y1="5" x2="13" y2="15" stroke="${pe}" stroke-width="2"/><line x1="27" y1="5" x2="17" y2="15" stroke="${pe}" stroke-width="2"/>`),`<svg width="40" height="20" style="vertical-align:middle; margin-right:8px">${Se}</svg>`},fe=K=>{let se="";const pe="black";return K==="M"?se=`<rect x="2" y="2" width="16" height="16" stroke="${pe}" fill="white" stroke-width="2"/>`:K==="F"?se=`<circle cx="10" cy="10" r="8" stroke="${pe}" fill="white" stroke-width="2"/>`:K==="Pregnancy"?se=`<path d="M10 2 L18 18 L2 18 Z" stroke="${pe}" fill="white" stroke-width="2"/>`:K==="Pet"?se=`<path d="M10 2 L18 10 L10 18 L2 10 Z" stroke="${pe}" fill="white" stroke-width="2"/>`:se='<text x="10" y="15" text-anchor="middle" font-size="14">?</text>',`<svg width="20" height="20" style="vertical-align:middle; margin-right:8px">${se}</svg>`},xe=`
                <div style="margin-top: 30px; border: 1px solid #eee; padding: 15px; border-radius: 8px; background: #fcfcfc; page-break-inside: avoid;">
                    <h3 style="margin-top:0; border-bottom:1px solid #ddd; padding-bottom:5px;">Legenda Simboli Usati</h3>
                    <div style="display: flex; flex-wrap: wrap; gap: 30px;">
                        
                        <!-- Colonna Generi -->
                        <div>
                            <strong style="display:block; margin-bottom:10px; font-size:12px; text-transform:uppercase; color:#666;">Persone</strong>
                            ${te.map(K=>{const se=K==="M"?"Maschio":K==="F"?"Femmina":K;return`<div style="margin-bottom:5px; font-size:13px;">${fe(K)} ${se}</div>`}).join("")}
                            <div style="margin-bottom:5px; font-size:13px;">
                                <svg width="20" height="20" style="vertical-align:middle; margin-right:8px"><rect x="2" y="2" width="16" height="16" stroke="black" fill="none"/><line x1="2" y1="2" x2="18" y2="18" stroke="black"/><line x1="18" y1="2" x2="2" y2="18" stroke="black"/></svg> Deceduto
                            </div>
                        </div>

                        <!-- Colonna Relazioni -->
                        <div>
                            <strong style="display:block; margin-bottom:10px; font-size:12px; text-transform:uppercase; color:#666;">Relazioni</strong>
                            ${ne.map(K=>{const se=ft[K];return se?`<div style="margin-bottom:5px; font-size:13px;">${Y(K)} ${se.label}</div>`:""}).join("")}
                        </div>

                    </div>
                </div>
            `;_.document.write(`
                <html>
                <head>
                    <title>${E} - Report Clinico</title>
                    <style>
                        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 40px; color: #333; max-width: 1200px; margin: 0 auto; background: white; }
                        h1 { border-bottom: 2px solid #3b82f6; padding-bottom: 10px; margin-bottom: 20px; color: #111; }
                        h2 { margin-top: 30px; color: #444; border-bottom: 1px solid #eee; padding-bottom: 5px; }
                        .diagram-container { border: 1px solid #ddd; border-radius: 8px; overflow: hidden; page-break-inside: avoid; margin-bottom: 30px; text-align: center; background: white; }
                        .person-card { background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid #3b82f6; page-break-inside: avoid; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
                        .person-card h3 { margin: 0 0 10px 0; font-size: 1.2em; color: #1e293b; }
                        .notes-section { margin-top: 10px; padding-top: 10px; border-top: 1px dashed #cbd5e1; font-size: 0.9em; }
                        .note-date { font-weight: bold; color: #64748b; }
                        @media print { body { padding: 0; } }
                    </style>
                </head>
                <body>
                    <h1>${E}</h1>
                    <p style="color:#666">Generato il ${new Date().toLocaleDateString()}</p>
                    
                    <div class="diagram-container">
                        ${U}
                    </div>
                    
                    ${xe}
                    
                    <h2>Dettaglio Clinico</h2>
                    ${H}
                </body>
                </html>
            `),_.document.close(),setTimeout(()=>_.print(),500)}},wc=_=>{var O;const k=(O=_.target.files)==null?void 0:O[0];if(!k)return;const L=new FileReader;L.onload=U=>{var H;try{const ne=JSON.parse((H=U.target)==null?void 0:H.result);Array.isArray(ne)&&(h(te=>[...te,...ne]),alert("Importazione completata!"))}catch{alert("Errore file")}},L.readAsText(k)},ts=()=>{const _=new Blob([JSON.stringify(u)],{type:"application/json"}),k=URL.createObjectURL(_),L=document.createElement("a");L.href=k,L.download="backup_genopro.json",L.click()},je=ge.length===1?ee.find(_=>_.id===ge[0]):null,xn=Me.find(_=>_.id===vn[0]),bt=W.find(_=>_.id===br[0]);return n==="dashboard"?d.jsxs("div",{className:`h-screen flex flex-col ${Ze?"dark bg-gray-900 text-white":"bg-gray-50 text-gray-900"}`,children:[gt&&d.jsx(yb,{onClose:()=>vi(!1),onExport:ts,onImport:wc,setCustomUser:s,customUser:i,setFirebaseConfig:l,firebaseConfig:o}),d.jsxs("div",{className:"flex h-full",children:[d.jsxs("div",{className:`w-64 border-r p-4 flex flex-col gap-4 ${Ze?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[d.jsxs("div",{className:"flex items-center gap-2 font-bold text-xl text-blue-600 mb-2",children:[d.jsx(UE,{})," GenoPro"]}),d.jsxs("button",{onClick:Qa,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center justify-center gap-2 font-medium transition-colors shadow-sm",children:[d.jsx(tc,{size:18})," Nuovo"]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("h3",{className:"text-xs font-bold uppercase opacity-50 mb-2 mt-4 px-2",children:"Categorie"}),d.jsxs("button",{onClick:()=>C("ALL"),className:`w-full flex items-center justify-between px-3 py-2 rounded text-sm transition-colors ${v==="ALL"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsx(tg,{size:16})," Tutti"]}),d.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-[10px]",children:u.length})]}),p.map(_=>{const k=wy[_.iconKey]||uh,L=u.filter(O=>O.category===_.id).length;return d.jsxs("button",{onClick:()=>C(_.id),className:`w-full flex items-center justify-between px-3 py-2 rounded text-sm transition-colors ${v===_.id?"bg-gray-100 dark:bg-gray-700 font-medium":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[d.jsxs("span",{className:"flex items-center gap-2",style:{color:v===_.id?void 0:_.color},children:[d.jsx(k,{size:16,color:_.color})," ",_.label]}),L>0&&d.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-500 px-1.5 py-0.5 rounded text-[10px]",children:L})]},_.id)})]}),d.jsxs("div",{className:"mt-auto border-t pt-4 space-y-2",children:[d.jsxs("button",{onClick:()=>Xi(!Ze),className:"w-full flex items-center gap-2 px-3 py-2 rounded text-sm hover:bg-gray-100 dark:hover:bg-gray-700",children:[Ze?d.jsx(rg,{size:16}):d.jsx(ng,{size:16})," ",Ze?"Light Mode":"Dark Mode"]}),d.jsxs("button",{onClick:()=>vi(!0),className:"w-full flex items-center gap-2 px-3 py-2 rounded text-sm hover:bg-gray-100 dark:hover:bg-gray-700",children:[d.jsx(oT,{size:16})," Impostazioni"]})]})]}),d.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-gray-50 dark:bg-gray-900",children:[d.jsxs("div",{className:"h-16 border-b flex items-center justify-between px-8 bg-white dark:bg-gray-800 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center gap-4 flex-1 max-w-2xl",children:[d.jsxs("div",{className:"relative flex-1",children:[d.jsx(lh,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),d.jsx("input",{className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Cerca genogramma...",value:V,onChange:_=>A(_.target.value)})]}),d.jsxs("div",{className:"flex items-center gap-2 border-l pl-4 dark:border-gray-600",children:[d.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:"Ordina"}),d.jsx("button",{onClick:()=>M("date_desc"),className:`p-1.5 rounded ${P==="date_desc"?"bg-blue-100 text-blue-600":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Pi Recenti",children:d.jsx(eg,{className:"rotate-180",size:18})}),d.jsx("button",{onClick:()=>M("date_asc"),className:`p-1.5 rounded ${P==="date_asc"?"bg-blue-100 text-blue-600":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Pi Vecchi",children:d.jsx(eg,{size:18})}),d.jsx("button",{onClick:()=>M("name_asc"),className:`p-1.5 rounded ${P==="name_asc"?"bg-blue-100 text-blue-600":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Alfabetico",children:d.jsx(GE,{size:18})})]})]}),i&&d.jsxs("span",{className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded border border-blue-100",children:["ID: ",i]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[D.map(_=>{var O;const k=p.find(U=>U.id===_.category)||p[p.length-1],L=wy[k.iconKey]||uh;return d.jsxs("div",{onClick:()=>{w(_.id),b(_.title),S(_.category),St(_.data.nodes||[]),At(_.data.edges||[]),ie(_.data.groups||[]),Pe(_.data.presets||[]),r("editor")},className:"group relative bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all cursor-pointer overflow-hidden flex flex-col h-48",children:[d.jsx("div",{className:"absolute top-0 left-0 w-1.5 h-full",style:{backgroundColor:k.color}}),d.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-wider",style:{color:k.color},children:[d.jsx(L,{size:12})," ",k.label]}),d.jsx("button",{onClick:U=>{U.stopPropagation(),confirm("Eliminare?")&&B&&ib(my(B,"artifacts",I,"users",i||(t==null?void 0:t.uid)||"anon","genograms",_.id))},className:"text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(uT,{size:16})})]}),d.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-1 line-clamp-2",children:_.title}),d.jsxs("div",{className:"mt-auto pt-4 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 border-t dark:border-gray-700",children:[d.jsx("span",{children:new Date(_.lastModified).toLocaleDateString()}),d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(Eu,{size:12})," ",((O=_.data.nodes)==null?void 0:O.length)||0]})]})]})]},_.id)}),D.length===0&&d.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center h-64 text-gray-400 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl",children:[d.jsx(lh,{size:48,className:"mb-4 opacity-20"}),d.jsx("p",{children:"Nessun genogramma trovato"}),V&&d.jsx("button",{onClick:()=>A(""),className:"text-blue-500 hover:underline mt-2 text-sm",children:"Pulisci ricerca"})]})]})})]})]})]}):d.jsxs("div",{className:`h-screen flex flex-col overflow-hidden ${Ze?"dark bg-gray-900 text-gray-100":"bg-gray-50 text-slate-900"}`,children:[Ha&&d.jsx(vb,{onClose:()=>lo(!1),onSave:_=>Pe(k=>[...k,_])}),qa&&d.jsx(gb,{onClose:()=>ao(!1),nodes:ee,edges:Me,groups:W}),Nr&&d.jsx(mb,{x:Nr.x,y:Nr.y,mode:Nr.mode,customPresets:le,onClose:()=>Bt(null),onSelect:_=>{Un(k=>k.map(L=>L.id===Nr.edgeId?{...L,type:_}:L)),Bt(null)}}),T&&d.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>x(!1)}),d.jsxs("div",{className:`h-14 border-b flex items-center px-4 justify-between shrink-0 ${Ze?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[d.jsxs("div",{className:"flex gap-3 items-center",children:[d.jsx("button",{onClick:()=>r("dashboard"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:d.jsx(tg,{size:20})}),d.jsxs("div",{className:"flex flex-col ml-2",children:[d.jsx("input",{value:E,onChange:_=>b(_.target.value),className:"bg-transparent font-bold text-sm w-40 outline-none",placeholder:"Titolo Genogramma"}),d.jsxs("div",{className:"relative",children:[d.jsxs("button",{onClick:()=>x(!T),className:"flex items-center gap-1 text-[10px] uppercase font-bold text-gray-500 hover:text-blue-600",children:[($n=p.find(_=>_.id===R))==null?void 0:$n.label," ",d.jsx(Vv,{size:10})]}),T&&d.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 border dark:border-gray-700 shadow-lg rounded-lg p-1 w-40 z-50",children:p.map(_=>d.jsxs("button",{onClick:()=>{S(_.id),x(!1)},className:`w-full text-left px-2 py-1.5 text-xs rounded hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 ${R===_.id?"bg-blue-50 text-blue-600":""}`,children:[d.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:_.color}})," ",_.label]},_.id))})]})]}),d.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>Dr("M"),title:"Maschio (M)",className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:d.jsx(aT,{className:"text-blue-600",size:20})}),d.jsx("button",{onClick:()=>Dr("F"),title:"Femmina (F)",className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:d.jsx(qE,{className:"text-pink-600",size:20})}),d.jsx("button",{onClick:Ji,title:"Gruppo",className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:d.jsx(Eu,{size:20})}),d.jsx("div",{className:"h-4 w-px bg-gray-300 mx-1"}),d.jsx("button",{onClick:()=>Xt("h"),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"Allinea Orizzontale",children:d.jsx(Zm,{size:18})}),d.jsx("button",{onClick:()=>Xt("v"),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"Allinea Verticale",children:d.jsx(Zm,{className:"rotate-90",size:18})}),d.jsx("button",{onClick:()=>Xt("circle"),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"Disponi a Cerchio",children:d.jsx(WE,{size:18})}),d.jsx("button",{onClick:()=>Xt("grid"),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"Disponi a Griglia",children:d.jsx(YE,{size:18})}),d.jsx("button",{onClick:()=>Xt("diagonal"),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"Disponi in Diagonale",children:d.jsx(cT,{size:18})}),d.jsx("div",{className:"h-4 w-px bg-gray-300 mx-1"}),d.jsx("button",{onClick:()=>gc(!nr),className:`p-1.5 rounded ${nr?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,title:"Snap Griglia",children:d.jsx(XE,{size:18})}),d.jsx("button",{onClick:()=>Rr(!_i),className:`p-1.5 rounded ${_i?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,title:"Mod. Selezione",children:d.jsx(nT,{size:18})}),d.jsx("button",{onClick:()=>lo(!0),className:"p-1.5 hover:bg-gray-100 rounded",title:"Stili",children:d.jsx(Uv,{size:18})}),d.jsx("button",{onClick:()=>ot(!yi),className:`p-1.5 rounded ${yi?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,title:"Mostra Legenda",children:d.jsx(tT,{size:18})})]})]}),d.jsxs("div",{className:"flex gap-2 items-center",children:[d.jsx("button",{onClick:gi,disabled:Xe<=0,className:`p-1.5 rounded ${Xe<=0?"opacity-30":"hover:bg-gray-100"}`,title:"Annulla",children:d.jsx(rT,{size:18})}),d.jsx("button",{onClick:Yi,disabled:Xe>=ve.length-1,className:`p-1.5 rounded ${Xe>=ve.length-1?"opacity-30":"hover:bg-gray-100"}`,title:"Ripristina",children:d.jsx(iT,{size:18})}),d.jsx("div",{className:"h-6 w-px bg-gray-300 mx-1"}),d.jsx("button",{onClick:Ya,className:"p-1.5 hover:bg-gray-100 rounded",title:"Ricentra",children:d.jsx(lT,{size:18})}),d.jsx("button",{onClick:()=>wi(_=>Math.max(.2,_-.1)),className:"p-1.5 hover:bg-gray-100 rounded",children:d.jsx(pT,{size:18})}),d.jsxs("span",{className:"text-xs w-8 text-center",children:[Math.round(rr*100),"%"]}),d.jsx("button",{onClick:()=>wi(_=>Math.min(3,_+.1)),className:"p-1.5 hover:bg-gray-100 rounded",children:d.jsx(fT,{size:18})}),d.jsx("div",{className:"h-6 w-px bg-gray-300 mx-1"}),d.jsx("button",{onClick:()=>Xi(!Ze),className:"p-1.5 hover:bg-gray-100 rounded",title:Ze?"Modalit Chiara":"Modalit Scura",children:Ze?d.jsx(rg,{size:18}):d.jsx(ng,{size:18})}),d.jsx("button",{onClick:()=>ao(!0),className:"p-1.5 hover:bg-gray-100 rounded text-blue-600",title:"Report Clinico",children:d.jsx(ah,{size:20})}),d.jsxs("div",{className:"relative group z-50",children:[d.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded",title:"Esporta",children:d.jsx(Ov,{size:20})}),d.jsxs("div",{className:"absolute right-0 top-full bg-white dark:bg-gray-800 border dark:border-gray-700 shadow-lg rounded p-3 hidden group-hover:block w-56 z-50",children:[d.jsxs("div",{className:"mb-3 pb-3 border-b dark:border-gray-700",children:[d.jsx("div",{className:"text-[10px] uppercase font-bold text-gray-400 mb-2",children:"Qualit Esportazione"}),d.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-900 rounded p-1 gap-1 items-center",children:[[1,2,4,6].map(_=>d.jsxs("button",{onClick:k=>{k.stopPropagation(),co(_)},className:`flex-1 text-[10px] py-1.5 rounded transition-all font-medium ${Qt===_?"bg-white dark:bg-gray-600 shadow text-blue-600 dark:text-blue-300":"text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700"}`,title:`Scala ${_}x`,children:[_,"x"]},_)),d.jsx("div",{className:"w-px h-4 bg-gray-300 dark:bg-gray-700 mx-0.5"}),d.jsx("div",{className:"relative group/input",title:"Scala Personalizzata (1-12)",children:d.jsx("input",{type:"number",min:"1",max:"12",value:Qt,onClick:_=>_.stopPropagation(),onChange:_=>{const k=parseInt(_.target.value);isNaN(k)||co(Math.max(1,Math.min(12,k)))},className:"w-10 text-[10px] py-1 rounded border-none bg-white dark:bg-gray-600 text-center outline-none focus:ring-1 focus:ring-blue-500 font-bold text-blue-600 dark:text-blue-300",placeholder:"#"})})]}),d.jsx("div",{className:"text-[9px] text-gray-400 mt-1 text-center",children:Qt===1?"Web / Email (Bassa)":Qt<=3?"Stampa Documenti":Qt<=6?"Alta Qualit (Stampa)":"Ultra Def. (Poster)"})]}),d.jsxs("button",{onClick:()=>es("png"),className:"block w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-xs rounded flex items-center gap-2 text-gray-700 dark:text-gray-200",children:[d.jsx(eT,{size:14})," Scarica Immagine (PNG)"]}),d.jsxs("button",{onClick:()=>es("jpeg"),className:"block w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-xs rounded flex items-center gap-2 text-gray-700 dark:text-gray-200",children:[d.jsx(HE,{size:14})," Scarica Immagine (JPEG)"]}),d.jsxs("button",{onClick:Ja,className:"block w-full text-left p-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-xs rounded flex items-center gap-2 text-gray-700 dark:text-gray-200",children:[d.jsx(ah,{size:14})," Stampa Report PDF"]})]})]}),d.jsxs("button",{onClick:Ei,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-1.5 rounded text-sm font-medium flex items-center gap-2 ml-2",children:[d.jsx(sT,{size:16})," Salva"]})]})]}),d.jsxs("div",{className:"flex-1 flex overflow-hidden relative print:overflow-visible",children:[d.jsx("div",{ref:ln,className:`flex-1 overflow-auto relative scroll-smooth ${Ze?"bg-gray-950":"bg-gray-100"}`,children:d.jsxs("div",{style:{width:jo,height:jo},className:"relative print:w-full print:h-full",children:[d.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none print:hidden",style:{backgroundImage:"radial-gradient(#888 1px, transparent 1px)",backgroundSize:`${Jt}px ${Jt}px`}}),d.jsx("svg",{ref:wn,width:jo,height:jo,className:"block touch-none",onMouseDown:Ka,onTouchStart:Ka,children:d.jsxs("g",{transform:`scale(${rr})`,style:{transformOrigin:`${Vt}px ${Vt}px`},children:[W.map(_=>{const k=us(_,ee);if(!k)return null;const L=br.includes(_.id),O=_.color==="#000000"&&Ze?"#ffffff":_.color;return d.jsxs("g",{onClick:U=>{U.stopPropagation(),zn([_.id]),Je([])},children:[d.jsx("rect",{x:k.x,y:k.y,width:k.w,height:k.h,rx:ub,fill:O,fillOpacity:.05,stroke:O,strokeDasharray:"10,5",strokeWidth:2,className:L?"stroke-blue-500 stroke-[4px]":""}),d.jsxs("g",{transform:`translate(${k.x+k.w-10}, ${k.y+k.h+25})`,children:[d.jsx("rect",{x:-(_.label.length*7),y:"-14",width:_.label.length*7+10,height:"20",fill:Ze?"black":"white",fillOpacity:"0.8",rx:"4"}),d.jsx("text",{textAnchor:"end",fill:O,className:"text-xs font-bold uppercase select-none",children:_.label})]}),L&&d.jsxs("g",{transform:`translate(${k.x}, ${k.y})`,onMouseDown:U=>{U.stopPropagation(),U.preventDefault(),vc(U,_.id)},className:"cursor-alias",children:[d.jsx("rect",{x:-5,y:-5,width:10,height:10,fill:"orange"}),d.jsx(zv,{size:10,x:-5,y:-5,color:"white"})]})]},_.id)}),Me.map(_=>{const k=xy(_.fromId,ee,W),L=xy(_.toId,ee,W);if(!k||!L)return null;let O=k,U=L;const H=W.find(K=>K.id===_.toId);if(H){const K=us(H,ee);K&&(U=dd(K,O))}const ne=W.find(K=>K.id===_.fromId);if(ne){const K=us(ne,ee);K&&(O=dd(K,U))}const te=ee.find(K=>K.id===_.fromId),Y=ee.find(K=>K.id===_.toId),fe=_.type.startsWith("twin");if((_.type.startsWith("child")||fe)&&te&&Y){const K=cd(_.fromId,Me);if(K){const se=ee.find(Se=>Se.id===K.fromId),pe=ee.find(Se=>Se.id===K.toId);se&&pe&&(O={x:(se.x+pe.x+Pn)/2,y:Math.max(se.y,pe.y)+lb})}else O={x:te.x+Pn/2,y:te.y+lr}}const xe=le.find(K=>K.id===_.type);return d.jsx("g",{onClick:K=>{K.stopPropagation(),_c(_.id,K)},children:d.jsx(fb,{edge:_,start:O,end:U,isSelected:vn.includes(_.id),darkMode:Ze,customConfig:xe,onAddChild:(K,se)=>yc(K,se)})},_.id)}),Le&&Le.type!=="move"&&Le.type!=="box"&&d.jsx("line",{x1:Le.startX,y1:Le.startY,x2:Le.currX,y2:Le.currY,stroke:"black",strokeDasharray:"5,5"}),Le&&Le.type==="move"&&ge.map(_=>{var te,Y;if(!ee.find(fe=>fe.id===_))return null;const L=(Y=(te=Ae.current)==null?void 0:te.initialNodePositions)==null?void 0:Y[_];if(!L)return null;const O=Le.currX-Le.startX,U=Le.currY-Le.startY;let H=L.x+O,ne=L.y+U;return nr&&(H=Math.round(H/Jt)*Jt,ne=Math.round(ne/Jt)*Jt),d.jsx("rect",{x:H,y:ne,width:Pn,height:lr,fill:"none",stroke:"gray",strokeDasharray:"2,2"},_)}),ee.map(_=>d.jsx("g",{onMouseDown:k=>ir(k,_.id),onTouchStart:k=>ir(k,_.id),children:d.jsx(pb,{node:_,isSelected:ge.includes(_.id),showLabelType:oo,darkMode:Ze,onHandleDown:xi,selectionMode:_i})},_.id)),Le&&Le.type==="box"&&d.jsx("rect",{x:Math.min(Le.startX,Le.currX),y:Math.min(Le.startY,Le.currY),width:Math.abs(Le.currX-Le.startX),height:Math.abs(Le.currY-Le.startY),fill:"rgba(0,0,255,0.1)",stroke:"blue"}),(()=>{if(!yi)return null;const _=ho();return d.jsx(db,{x:_.minX-270,y:_.minY,darkMode:Ze,nodes:ee,edges:Me})})()]})})]})}),(ge.length>0||vn.length>0||br.length>0)&&d.jsxs("div",{className:`w-80 border-l p-4 overflow-y-auto ${Ze?"bg-gray-800 border-gray-700":"bg-white"} print:hidden`,children:[d.jsxs("h3",{className:"font-bold mb-4 flex justify-between",children:["Propriet ",d.jsx(Us,{className:"cursor-pointer",onClick:()=>{Je([]),_n([]),zn([])}})]}),je&&d.jsxs("div",{className:"space-y-3",children:[d.jsx("input",{className:"w-full border p-1 rounded bg-transparent",value:je.name,onChange:_=>Ue(ee.map(k=>k.id===je.id?{...k,name:_.target.value}:k)),placeholder:"Nome"}),d.jsx("input",{className:"w-full border p-1 rounded bg-transparent",value:je.label||"",onChange:_=>Ue(ee.map(k=>k.id===je.id?{...k,label:_.target.value}:k)),placeholder:"Etichetta (es. Padre)"}),d.jsx("input",{className:"w-full border p-1 rounded bg-transparent",value:je.birthDate,onChange:_=>Ue(ee.map(k=>k.id===je.id?{...k,birthDate:_.target.value}:k)),placeholder:"Nascita (es 1980)"}),d.jsxs("div",{className:"text-xs opacity-50",children:["Et: ",Ia(je.birthDate)]}),d.jsxs("select",{className:"w-full border p-1 rounded bg-transparent",value:je.gender,onChange:_=>Ue(ee.map(k=>k.id===je.id?{...k,gender:_.target.value}:k)),children:[d.jsx("option",{value:"M",children:"Maschio"}),d.jsx("option",{value:"F",children:"Femmina"}),d.jsx("option",{value:"TransWoman",children:"Donna Trans (MTF)"}),d.jsx("option",{value:"TransMan",children:"Uomo Trans (FTM)"}),d.jsx("option",{value:"NonBinary",children:"Non-Binary/Genderqueer"}),d.jsx("option",{value:"Pet",children:"Animale"}),d.jsx("option",{value:"Pregnancy",children:"Gravidanza"}),d.jsx("option",{value:"Miscarriage",children:"Aborto Spontaneo"}),d.jsx("option",{value:"Abortion",children:"Aborto Volontario"}),d.jsx("option",{value:"Stillbirth",children:"Morto alla nascita"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsx("button",{className:`border px-2 py-1 text-xs rounded ${je.deceased?"bg-red-500 text-white":""}`,onClick:()=>Ue(ee.map(_=>_.id===je.id?{..._,deceased:!_.deceased}:_)),children:"Deceduto"}),d.jsx("button",{className:`border px-2 py-1 text-xs rounded ${je.indexPerson?"bg-blue-500 text-white":""}`,onClick:()=>Ue(ee.map(_=>_.id===je.id?{..._,indexPerson:!_.indexPerson}:_)),children:"Pz. Designato"}),d.jsx("button",{className:`border px-2 py-1 text-xs rounded ${je.substanceAbuse?"bg-orange-500 text-white":""}`,onClick:()=>Ue(ee.map(_=>_.id===je.id?{..._,substanceAbuse:!_.substanceAbuse}:_)),children:"Abuso Sost."}),d.jsx("button",{className:`border px-2 py-1 text-xs rounded ${je.mentalIssue?"bg-purple-500 text-white":""}`,onClick:()=>Ue(ee.map(_=>_.id===je.id?{..._,mentalIssue:!_.mentalIssue}:_)),children:"Problema Psi."}),d.jsx("button",{className:`border px-2 py-1 text-xs rounded ${je.gayLesbian?"bg-pink-500 text-white":""}`,onClick:()=>Ue(ee.map(_=>_.id===je.id?{..._,gayLesbian:!_.gayLesbian}:_)),children:"Omosessuale"})]}),d.jsx(fd,{notes:je.notes,onChange:_=>Ue(ee.map(k=>k.id===je.id?{...k,notes:_}:k))}),d.jsx("button",{onClick:()=>{Ue(ee.filter(_=>!ge.includes(_.id))),Un(Me.filter(_=>!ge.includes(_.fromId)&&!ge.includes(_.toId))),Je([])},className:"w-full bg-red-100 text-red-600 py-2 rounded text-xs hover:bg-red-200",children:"Elimina Persona"})]}),xn&&d.jsxs("div",{className:"space-y-3",children:[d.jsx("label",{className:"text-xs opacity-50 font-bold",children:"Tipo"}),d.jsx(hb,{value:xn.type,onChange:_=>{const k=ft[_]||{};Un(L=>L.map(O=>O.id===xn.id?{...O,type:_,color:k.color,lineStyle:k.lineStyle,decorator:k.decorator}:O))},className:"text-black"}),d.jsx("input",{className:"w-full border p-1 rounded bg-transparent",value:xn.label,onChange:_=>Un(k=>k.map(L=>L.id===xn.id?{...L,label:_.target.value}:L)),placeholder:"Etichetta"}),d.jsx(fd,{notes:xn.notes,onChange:_=>Un(k=>k.map(L=>L.id===xn.id?{...L,notes:_}:L))}),d.jsx("button",{onClick:()=>{Un(Me.filter(_=>_.id!==xn.id)),_n([])},className:"w-full bg-red-100 text-red-600 py-2 rounded text-xs hover:bg-red-200",children:"Elimina Relazione"})]}),bt&&d.jsxs("div",{className:"space-y-3",children:[d.jsx("label",{className:"text-xs opacity-50 font-bold",children:"Tipo"}),d.jsxs("select",{className:"w-full p-2 rounded border bg-transparent",value:bt.type,onChange:_=>tr(W.map(k=>k.id===bt.id?{...k,type:_.target.value}:k)),children:[d.jsx("option",{value:"household",children:"Household"}),d.jsx("option",{value:"subsystem",children:"Sottosistema"})]}),d.jsx("input",{className:"w-full border p-1 rounded bg-transparent",value:bt.label,onChange:_=>tr(W.map(k=>k.id===bt.id?{...k,label:_.target.value}:k)),placeholder:"Etichetta"}),d.jsx("input",{type:"color",className:"w-full h-8",value:bt.color,onChange:_=>tr(W.map(k=>k.id===bt.id?{...k,color:_.target.value}:k))}),d.jsx(fd,{notes:bt.notes,onChange:_=>tr(W.map(k=>k.id===bt.id?{...k,notes:_}:k))}),d.jsx("button",{onClick:()=>{tr(W.filter(_=>_.id!==bt.id)),zn([])},className:"w-full bg-red-100 text-red-600 py-2 rounded text-xs hover:bg-red-200",children:"Elimina Gruppo"})]})]})]})]})}class wb extends My.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Errore Critico di Avvio:",e,n)}render(){var e,n;return this.state.hasError?d.jsxs("div",{style:{padding:"2rem",fontFamily:"system-ui, sans-serif",maxWidth:"800px",margin:"0 auto"},children:[d.jsx("h1",{style:{color:"#dc2626",fontSize:"1.5rem",marginBottom:"1rem"},children:"Si  verificato un errore critico"}),d.jsx("p",{style:{marginBottom:"1rem",color:"#4b5563"},children:"L'applicazione non  riuscita ad avviarsi. Ecco i dettagli tecnici:"}),d.jsxs("div",{style:{backgroundColor:"#f3f4f6",padding:"1rem",borderRadius:"0.5rem",overflow:"auto",border:"1px solid #e5e7eb"},children:[d.jsx("code",{style:{color:"#dc2626",fontSize:"0.875rem"},children:(e=this.state.error)==null?void 0:e.message}),d.jsx("pre",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"#374151"},children:(n=this.state.error)==null?void 0:n.stack})]}),d.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1.5rem",padding:"0.5rem 1rem",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"0.25rem",cursor:"pointer",fontWeight:"bold"},children:"Ricarica Applicazione"})]}):this.props.children}}const Ty=document.getElementById("root");Ty?pd.createRoot(Ty).render(d.jsx(My.StrictMode,{children:d.jsx(wb,{children:d.jsx(_b,{})})})):document.body.innerHTML=`<div style="color: red; padding: 20px; font-weight: bold;">ERRORE FATALE: Impossibile trovare l'elemento con id="root" nel file index.html.</div>`;
